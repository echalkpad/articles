<!DOCTYPE html><html><head><title>How to search text files for patterns efficiently</title></head><body>
<h1>How to search text files for patterns efficiently</h1><p><a href="http://xmodulo.com/search-text-files-patterns-efficiently.html" target="_new">Original URL</a></p>
<p><blockquote>For a system admin or a programmer, grep and the likes are probably the most popular tools when it comes to searching through complex configuration directories and large trees of source code for a&hellip;</blockquote></p>
<div><div class="entry-content">

<p>For a system admin or a programmer, <tt>grep</tt> and the likes are probably the most popular tools when it comes to searching through complex configuration directories and large trees of source code for a particular text string or pattern.</p>
<p>If <tt>grep</tt> is one of your favorite tools, chances are that you will like <a target="_blank" href="http://beyondgrep.com/">ack</a> even more. <tt>ack</tt> is a Perl-based command-line utility similar to <tt>grep</tt>, but designed to improve the search speed and capabilities of <tt>grep</tt>. Especially if you are a programmer, I strongly recommend replacing <tt>grep</tt> with <tt>ack</tt>. The usage of <tt>ack</tt> is heavily optimized for code search, so a programmer like you can perform complex search on source code trees with fewer keystrokes.</p>
<h2>Features of ack</h2>
<p>To highlight some of the powerful features of <tt>ack</tt>:</p>
<ul>
<li>Search the current working directory by default.
</li><li>Search sub-directories recursively by default.
</li><li>Ignore metadata directories such as .svn, .git, CSV directories.
</li><li>Ignore binary files (e.g., pdf, image, coredumps) and backup files (e.g., foo~, *.swp).
</li><li>Print line numbers in search results, which helps find the code later.
</li><li>Can search for a specific file type (e.g., Perl, C++, Makefile) (which may have multiple suffixes).
</li><li>Highlight search results by color.
</li><li>Support Perl's advanced regular expression which is more expressive than GNU regular expression used by <tt>grep</tt>.
</li></ul>
<p>As for search speed, <tt>ack</tt> is generally faster than <tt>grep</tt>. The speed of <tt>ack</tt> comes from its built-in file type filters; <tt>ack</tt> maintains a list of recognizable file types, and skips unknown/unnecessary file types during search. It also avoids inspecting superfluous metadata directories.</p>
<h2>Install ack on <a href="http://xmodulo.com/recommend/linuxguide" target="_blank" rel="nofollow">Linux</a></h2>
<p>While <tt>ack</tt> is available as a standard package on major Linux distros (e.g., <tt>ack-grep</tt> package on Debian-based system, and <tt>ack</tt> package for Redhat-based system), the version of <tt>ack</tt> shipped with the distros still remains 1.x, while <tt>ack</tt> 2.0 with more features has already become available.</p>
<p>So I am going to download and install <tt>ack</tt> from the official site.</p>
<p>Conveniently, <tt>ack</tt> is available as a single-file Perl script from the official site, which incorporates all dependent Perl modules in it. So you don't need to install any extra Perl modules to run the script.</p>
<p>To intall <tt>ack</tt> on your Linux system, go to the <a href="http://beyondgrep.com/install/" target="_blank">official site</a> to download the latest <tt>ack</tt>. As of this writing, the latest version is 2.12.</p>
<p class="console">
$ wget http://beyondgrep.com/ack-2.12-single-file<br>
$ sudo mv ack-2.12-single-file /usr/local/bin/ack<br>
$ sudo chmod 0755 /usr/local/bin/ack
</p>

<p>Note that on Debian-based systems, there is a separate package, also called <tt>ack</tt> (Kanji code converter). So if you happen to use that package, you will have to rename <tt>ack</tt> to avoid naming conflicts.</p>
<h2>Usage Examples of ack</h2>
<p>1. Search for "eat" as a word recursively from the current directory. Things like "feature" or "eating" will not be matched.</p>
<p class="console">
$ ack -w eat
</p>





<p>2. Search for a string with special characters: '$path=.' All metacharacters (e.g., '$' or '.') need to be matched as a literal.</p>
<p class="console">
$ ack -Q '$path=.' /etc
</p>

<p>3. Search for 'about' in all directories other than 'downloads' directory.</p>
<p class="console">
$ ack about --ignore-dir=downloads
</p>

<p>4. Search only PHP files which contain 'protected'. Then group search results by file name, and print file name for each search group.</p>
<p class="console">
$ ack --php --group protected
</p>

<p><a target="_blank" rel="nofollow" href="http://www.flickr.com/photos/xmodulo/12058907134/"><img src="http://farm4.staticflickr.com/3683/12058907134_64cac79f7f.jpg"></a></p>
<p>5. Get a list of the names of Makefiles which contain 'CFLAG'. The files named *.mk, makefile, Makefile, GNUmakefile will all be considered.</p>
<p class="console">
$ ack --make -l CFLAG
</p>

<p>6. Highlight a matched string while still showing the entire (growing) log file.</p>
<p class="console">
$ tail -f /var/log/syslog | ack --passthru 192.168.1.10
</p>

<p>To get a list of filetypes recognized by <tt>ack</tt> for filtering, run the following:</p>
<p class="console">
$ ack --help-type
</p>
<p><a target="_blank" rel="nofollow" href="http://www.flickr.com/photos/xmodulo/12058810103/"><img src="http://farm8.staticflickr.com/7376/12058810103_a5bc1386ae_z.jpg"></a></p>
<div><h3><img src="http://xmodulo.com/images/rss_small.png"> Subscribe to Xmodulo</h3>
<p>Do you want to receive <strong>Linux FAQs, detailed tutorials and tips</strong> published at Xmodulo? Enter your email address below, and we will deliver our Linux posts straight to your email box, for free. Delivery powered by Google Feedburner.</p>
</div>
</div> 
 				 
 			</div>
</body></html>
