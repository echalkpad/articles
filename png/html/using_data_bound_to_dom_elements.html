<!DOCTYPE html><html><head><title>Using Data Bound to DOM Elements</title></head><body>
<h1>Using Data Bound to DOM Elements</h1><p><a href="https://www.dashingd3js.com/using-data-bound-to-dom-elements" target="_new">Original URL</a></p>
<p><blockquote>Basic Example In this example, you will use D3.js to bind data to DOM elements of a basic webpage. Then you will use D3.js to use the data bound to DOM Elements to update the basic webpage. In the&hellip;</blockquote></p>
<div><div class="well">		

			
		 <h3>Basic Example</h3>
			<p class="friendly-paragraph">
				In this example, you will use D3.js to bind data to DOM elements of a basic webpage.
				Then you will use D3.js to use the data bound to DOM Elements to update the basic webpage.
			</p>
			<p class="friendly-paragraph">
				In the last section, we started with a basic webpage:
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="line-numbers">2</span><span class="tag">&lt;html&gt;</span>
<span class="line-numbers">3</span> <span class="tag">&lt;head&gt;</span>
<span class="line-numbers">4</span> <span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/javascript</span><span class="delimiter">"</span></span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">d3.v2.min.js</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
<span class="line-numbers">5</span> <span class="tag">&lt;/head&gt;</span>
<span class="line-numbers">6</span> <span class="tag">&lt;body&gt;</span>
<span class="line-numbers">7</span> <span class="tag">&lt;/body&gt;</span>
<span class="line-numbers">8</span><span class="tag">&lt;/html&gt;</span></pre></div>
</div>
				
			
			<p class="friendly-paragraph">
				And then bound data to paragraph HTML elements through the JavaScript Console:
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span><span class="keyword">var</span> theData = [ <span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span> ]
<span class="line-numbers">2</span>
<span class="line-numbers">3</span><span class="keyword">var</span> p = d3.select(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>).selectAll(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers">4</span> .data(theData)
<span class="line-numbers">5</span> .enter()
<span class="line-numbers">6</span> .append(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers">7</span> .text(<span class="string"><span class="delimiter">"</span><span class="content">hello </span><span class="delimiter">"</span></span>);</pre></div>
</div>

			
			<p class="friendly-paragraph">
				Which gave us this:
				<br>
				<br>
				<img alt="Binding Data to DOM Elements with D3.js Full Snapshot" class="img-polaroid img-rounded" src="https://www.dashingd3js.com/assets/binding_data_to_dom_elements_with_d3js_full_snapshot_625x697-f7bd431dce78572c16425935cb876e76.png" width="625">
			</p>
			<p class="friendly-paragraph">
				Which is amazing - we have bound data to the DOM elements using D3.js.
			</p>
			<p class="friendly-paragraph">
				<em>However,</em> what we really want is to get our data back on to the basic webpage.
			</p>
			<p class="friendly-paragraph">
				<em>Put another way,</em> how do we get this value out of the DOM element?
				<br>
				<br>
				<img alt="DOM Element Bound Data" class="img-polaroid img-rounded" src="https://www.dashingd3js.com/assets/dom_element_bound_data_288x254-785a750cde36ff4a10016eef8426ca74.png" width="288">								
			</p>
			<p class="friendly-paragraph">
				Open the Webkit Inspector to get the JavaScript Console going along side the Elements Inspector.
			</p>
			<p class="friendly-paragraph">
				Type the following into the JavaScript Console:
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span><span class="keyword">var</span> theData = [ <span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span> ]
<span class="line-numbers">2</span>
<span class="line-numbers">3</span><span class="keyword">var</span> p = d3.select(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>).selectAll(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers">4</span> .data(theData)
<span class="line-numbers">5</span> .enter()
<span class="line-numbers">6</span> .append(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers">7</span> .text( <span class="keyword">function</span> (d) { <span class="keyword">return</span> d; } );</pre></div>
</div>

			
			<p class="friendly-paragraph">
				Which gives us the following:
				<br>
				<br>
				<img alt="Using Data bound to DOM Elements" class="img-polaroid img-rounded" src="https://www.dashingd3js.com/assets/using_data_bound_to_dom_elements_625x592-9a37d7836a278c4b54fd3c9aa066e4ce.png" width="625">
			</p>
			<p class="friendly-paragraph">
				As you can see - instead of three paragraphs that say "Hello", we now have three paragraphs that contain our data!
				Congratulations - you have used data bound to DOM elements to update the webpage using D3.js!
			</p>
			

			<br>

			
		 <h3>D3.js Text Operator Revisited</h3>
			<p class="friendly-paragraph">
				The only part of the JavaScript code that changed from our previous example to this example is that
				</p>

			
			<p class="friendly-paragraph">
				 became:
				 </p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span>.text( <span class="keyword">function</span> (d) { <span class="keyword">return</span> d; } );</pre></div>
</div>

			
			<p class="friendly-paragraph">
				The selection that the <strong>.text()</strong> operator is working on in both cases is the following:
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span>d3.select(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>).selectAll(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers">2</span> .data(theData)
<span class="line-numbers">3</span> .enter()
<span class="line-numbers">4</span> .append(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)</pre></div>
</div>

			
			<p class="friendly-paragraph">
				This selection represents three HTML <strong>&lt;p&gt;</strong> elements.
			</p>
			<p class="friendly-paragraph">
				As we covered in the previous section, the Text Operator sets the <a href="http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-textContent">textContent</a> of the node to the specified value on all selected elements.				
			</p>
			<p class="friendly-paragraph">
				<em>What is also true of the Text Operator</em> is that if the value passed to it (the Text Operator) is a function, then the function is evaluated for each element in order. <strong>And</strong> the functions result is used to set each element's
				text context.
			</p>
			<p class="friendly-paragraph">
				Which in our case means, that instead of setting "Hello" as the text value, the function goes through each element, gets the __data__ property and returns it to the Text Operator, so that it can set that result as the text content for the element.
			</p>
			

			<br>

			
		 <h3>JavaScript Functions in D3.js Operators</h3>
			<p class="friendly-paragraph">
				 We are passing a JavaScript function to the Text operator:
				 </p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span><span class="keyword">function</span> (d) { <span class="keyword">return</span> d; }</pre></div>
</div>

			
			<p class="friendly-paragraph">
				If you are new to JavaScript functions, here is a brief synopsis:
			 </p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span><span class="keyword">function</span> <span class="function">functionName</span> (variableName) {
<span class="line-numbers">2</span> <span class="keyword">return</span> variableName;
<span class="line-numbers">3</span>}</pre></div>
</div>

			
			<p class="friendly-paragraph">
				The "function" operator defines a function named "functionName" which takes a variable "variableName" and then returns the same variable.
			</p>
			<p class="friendly-paragraph">
				If the functionName is missing, then it is called an <em>anonymous function</em>.
				Anonymous functions are used to make code more concise when declaring a function that will only be used in one place.
				In our case, the function is used only inside of the D3.js Text Operator:
 			 </p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span>.text( <span class="keyword">function</span> (d) { <span class="keyword">return</span> d; } );</pre></div>
</div>

			
			<p class="friendly-paragraph">
				Note - our function doesn't have to be one line or just a simple return, we could so something like this:
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span><span class="keyword">function</span> (d) {
<span class="line-numbers">2</span> <span class="keyword">var</span> addedNumber = <span class="integer">2</span>;
<span class="line-numbers">3</span> <span class="keyword">var</span> tempNumber;
<span class="line-numbers">4</span> 
<span class="line-numbers">5</span> tempNumber = d + addedNumber;
<span class="line-numbers">6</span> <span class="keyword">return</span> tempNumber;
<span class="line-numbers">7</span>}</pre></div>
</div>

			
			<p class="friendly-paragraph">
				Which when put into the JavaScript Console as part of our overall D3.js functions, gives us the following:
				<br>
				<br>
				<img alt="Using Functions inside D3.js Operators" class="img-polaroid img-rounded" src="https://www.dashingd3js.com/assets/using_functions_inside_d3.js_operators_625x655-e2469b143abe7053c6dad17073e68bd2.png" width="625">
			</p>
			<p class="friendly-paragraph">
				As you can see, our function has added the number "2" to our data set and updated the text of the DOM elements.
			</p>
			<p class="friendly-paragraph">
				Using these functions, you can write anything you want using JavaScript to manipulate the data.
				This is powerful in data visualizations when you will want differentiate style and format of SVG objects based on what values the data contains.
			</p>
			

			<br>

			
		 <h3>Variables Available inside D3.js Operators</h3>
			<p class="friendly-paragraph">
				 In our example:
				 </p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span>.text( <span class="keyword">function</span> (d) { <span class="keyword">return</span> d; } );</pre></div>
</div>

			
			<p class="friendly-paragraph">
				You can see that the variable <em>d</em> is available for use in the anonymous function. This variable is provided to us by D3.js and it refers to the current <em>__data__</em> attribute for the specific element being processed.
			</p>
			<p class="friendly-paragraph">
				The are two other variables provided to us by D3.js - <em>this</em> and <em>i</em>.
			</p>
			<p class="friendly-paragraph">
				<strong><em>this</em></strong> refers to the current DOM element being evaluated.
			</p>
			<p class="friendly-paragraph">
			 	<strong><em>i</em></strong> refers to the index of the current HTML element being evaluated in the selected elements selection.
				Remember that all the data is processed at once and in sequential order.
				<strong>Note</strong> - <em>i</em> starts at 0.
				This means in our data set
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span><span class="keyword">var</span> theData = [ <span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span> ]</pre></div>
</div>

			
			<p class="friendly-paragraph">
				The data is processed in order of "1", "2" and then "3".
				With "1" having an <em>i</em> of 0, "2" having an <em>i</em> of 1 and "3" having an <em>i</em> of 2.
			</p>
			<p class="friendly-paragraph">
				You can run the following in the JavaScript Console to see this demonstrated:
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers"> 1</span><span class="keyword">var</span> theData = [ <span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span> ]
<span class="line-numbers"> 2</span>
<span class="line-numbers"> 3</span><span class="keyword">var</span> p = d3.select(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>).selectAll(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers"> 4</span> .data(theData)
<span class="line-numbers"> 5</span> .enter()
<span class="line-numbers"> 6</span> .append(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers"> 7</span> .text(<span class="keyword">function</span> (d,i) {
<span class="line-numbers"> 8</span> <span class="keyword">return</span> <span class="string"><span class="delimiter">"</span><span class="content">i = </span><span class="delimiter">"</span></span> + i + <span class="string"><span class="delimiter">"</span><span class="content"> d = </span><span class="delimiter">"</span></span>+d;
<span class="line-numbers"> 9</span> });</pre></div>
</div>

			
			<p class="friendly-paragraph">
				Which gives us the following:
				<br>
				<br>
				<img alt="Viewing index and datum variables in D3.js operator" class="img-polaroid img-rounded" src="https://www.dashingd3js.com/assets/viewing_index_and_datum_variables_in_d3.js_operator_625x620-14fc4868a3a9ac6aaa8f8633044a4f11.png" width="625">
			</p>
			<p class="friendly-paragraph">
				Having the index available allows for things like alternating style and formatting.
			</p>
			

		</div>
	</div>
</body></html>
