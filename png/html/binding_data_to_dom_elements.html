<!DOCTYPE html><html><head><title>Binding Data to DOM Elements</title></head><body>
<h1>Binding Data to DOM Elements</h1><p><a href="https://www.dashingd3js.com/binding-data-to-dom-elements" target="_new">Original URL</a></p>
<p><blockquote>Basic Example In this example, you will use D3.js to bind data to DOM elements of a basic webpage. Start with a basic HTML webpage: 1&lt;!DOCTYPE html&gt; 2&lt;html&gt; 3 &lt;head&gt; 4 &lt;script&hellip;</blockquote></p>
<div><div class="well">

			
		 <h3>Basic Example</h3>
			<p class="friendly-paragraph">
				In this example, you will use D3.js to bind data to DOM elements of a basic webpage.
			</p>
			<p class="friendly-paragraph">
				Start with a basic HTML webpage:
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="line-numbers">2</span><span class="tag">&lt;html&gt;</span>
<span class="line-numbers">3</span> <span class="tag">&lt;head&gt;</span>
<span class="line-numbers">4</span> <span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">"</span><span class="content">text/javascript</span><span class="delimiter">"</span></span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span><span class="content">d3.v2.min.js</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
<span class="line-numbers">5</span> <span class="tag">&lt;/head&gt;</span>
<span class="line-numbers">6</span> <span class="tag">&lt;body&gt;</span>
<span class="line-numbers">7</span> <span class="tag">&lt;/body&gt;</span>
<span class="line-numbers">8</span><span class="tag">&lt;/html&gt;</span></pre></div>
</div>

			
			<p class="friendly-paragraph">
				Open the Webkit Inspector to get the JavaScript Console going along side the Elements Inspector.
			</p>
			<p class="friendly-paragraph">
				Type the following into the JavaScript Console:
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span><span class="keyword">var</span> theData = [ <span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span> ]
<span class="line-numbers">2</span>
<span class="line-numbers">3</span><span class="keyword">var</span> p = d3.select(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>).selectAll(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers">4</span> .data(theData)
<span class="line-numbers">5</span> .enter()
<span class="line-numbers">6</span> .append(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers">7</span> .text(<span class="string"><span class="delimiter">"</span><span class="content">hello </span><span class="delimiter">"</span></span>);</pre></div>
</div>

			
			<p class="friendly-paragraph">
				This will give you the following:
				<br>
				<br>
				<img alt="Binding Data to DOM Elements with D3.js" class="img-polaroid img-rounded" src="https://www.dashingd3js.com/assets/binding_data_to_dom_elements_with_d3js_625x616-f0e1a8eef9b0469901018b17958a9448.png" width="625">
			</p>
			<p class="friendly-paragraph">
				Congratulations - you have bound some data to some DOM elements using D3.js!
			</p>
			

			<br>

			
		 <h3>D3.js SelectAll Method</h3>
			<p class="friendly-paragraph">
				The first part of the JavaScript code that we wrote which hasn't been covered before is <strong>.selectAll("p")</strong>
			</p>
			<p class="friendly-paragraph">
				The D3.js SelectAll method uses CSS3 selectors to grab DOM elements.
				Unlike the Select method (where the first element is selected), the SelectAll method selects all the elements that match the specific selector string.
			</p>
			<p class="friendly-paragraph">
				<em>But wait!</em> The basic HTML page doesn't contain any <strong>&lt;p&gt;</strong> yet. What is it actually doing?
			</p>
			<p class="friendly-paragraph">
				What it is doing is selecting all of the &lt;p&gt; available on the page. Which in this case is none. So it returns an empty selection.
			</p>
			<p class="friendly-paragraph">
				Later use of .data(theData) and .enter( ) will allow us to bind the data to the empty selection.
			</p>
			

			<br>

			
		 <h3>D3.js Data Operator</h3>
			<p class="friendly-paragraph">
				The next part of the JavaScript code that we wrote which hasn't been covered before is <strong>.data(theData)</strong>
			</p>
			<p class="friendly-paragraph">
				The data operator joins an array of data (which can be numbers, objects or other arrays) with the current selection.
			</p>
			<p class="friendly-paragraph">
				In this example, there is no key provided, so each element of <strong>theData</strong> array of data is assigned to each element of the current selection.
				The first element <strong>1</strong> is assigned to the first <strong>&lt;p&gt;</strong> element, the second to the second, so on and so forth.
			</p>
			<p class="friendly-paragraph">
				<em>But wait!</em> The basic page doesn't contain any <strong>&lt;p&gt;</strong> yet. What is it actually doing?
			</p>
			

			<br>

			
		 <h3>D3.js Virtual Selections (Thinking with Joins)</h3>
			<p class="friendly-paragraph">
				The D3.js Data Operator returns <em>three</em> virtual selections rather than just the regular one like other methods.
			</p>
			<p class="friendly-paragraph">
				The three virtual selections are <em>enter</em>, <em>update</em> and <em>exit</em>.
			</p>
			<p class="friendly-paragraph">
				The <strong><em>enter</em></strong> selection contains placeholders for any missing elements.
			</p>
			<p class="friendly-paragraph">
				The <strong><em>update</em></strong> selection contains existing elements, bound to data.
			</p>
			<p class="friendly-paragraph">
				Any remaining elements end up in the <strong><em>exit</em></strong> selection for removal.
			</p>
			<p class="friendly-paragraph">
				Since our selection from
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span> d3.select(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>).selectAll(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)</pre></div>
</div>

			
			<p class="friendly-paragraph">
				was empty.
			</p>
			<p class="friendly-paragraph">
				The virtual <strong><em>enter</em></strong> selection now contains placeholders for our &lt;p&gt; elements.
			</p>
			<p class="friendly-paragraph">
				We will come back to the power of the virtual selections enter, update, and exit in later sections.
				For now we will concentrate on the enter virtual selection.
			</p>
			<p class="friendly-paragraph">
				To learn more, please visit the classic article by Mike Bostock <a href="http://bost.ocks.org/mike/join/">"Thinking with Joins"</a>.
			</p>
			

			<br>

			
		 <h3>D3.js Enter Method</h3>
			<p class="friendly-paragraph">
				The D3.js Enter Method returns the <strong>virtual enter selection</strong> from the Data Operator.
				This method only works on the Data Operator because the Data Operator is the only one that returns three virtual selections.
			</p>
			<p class="friendly-paragraph">
				In this case
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span><span class="keyword">var</span> p = d3.select(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>).selectAll(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers">2</span> .data(theData)
<span class="line-numbers">3</span> .enter()</pre></div>
</div>

			
			<p class="friendly-paragraph">
				This will return a reference to the placeholder elements (nodes) for each data element that did not have a corresponding existing DOM Element.
			</p>
			<p class="friendly-paragraph">
				Once we have this reference we can then operate on this selection.
			</p>
			<p class="friendly-paragraph">
				However, it is important to note that this reference only allows chaining of <strong>append</strong>, <strong>insert</strong> and <strong>select</strong> operators to be used on it.
			</p>
			<p class="friendly-paragraph">
				After these operators have been chained the the .enter() selection, we can treat the selection just like any other selection to modify the content.
			</p>
			

			<br>

			
		 <h3>D3.js Append Operator Revisited</h3>
			<p class="friendly-paragraph">
				Looking at the code again:
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span><span class="keyword">var</span> p = d3.select(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>).selectAll(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers">2</span> .data(theData)
<span class="line-numbers">3</span> .enter()
<span class="line-numbers">4</span> .append(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)</pre></div>
</div>

			
			<p class="friendly-paragraph">
				We <strong>.append("p")</strong> to the .enter() selection.
			</p>
			<p class="friendly-paragraph">
				For each placeholder element created in the previous step, a <strong>p</strong> element is inserted.
			</p>
			<p class="friendly-paragraph">
				Because we had three data points in our data array and no &lt;p&gt; elements on the webpage, the .append("p") creates and adds three HTML paragraph elements.
			</p>
			<p class="friendly-paragraph">
				In the example, after the append operator has operated on the selection, it will return a selection of three HTML paragraph elements.
			</p>			
			

			<br>

			
		 <h3>D3.js Text Operator</h3>
			<p class="friendly-paragraph">
				If we wrote the code so that it was missing the last text operator as such:
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span><span class="keyword">var</span> theData = [ <span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span> ]
<span class="line-numbers">2</span>
<span class="line-numbers">3</span><span class="keyword">var</span> p = d3.select(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>).selectAll(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers">4</span> .data(theData)
<span class="line-numbers">5</span> .enter()
<span class="line-numbers">6</span> .append(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>);</pre></div>
</div>

			
			<p class="friendly-paragraph">
				This is what we would see:
				<br>
				<br>
				<img alt="Binding Data to DOM Elements with D3.js without Text" class="img-polaroid img-rounded" src="https://www.dashingd3js.com/assets/binding_data_to_dom_elements_with_d3js_without_text_625x519-0f5c0255ad1da33ec765c3d5edb9792f.png" width="625">
			</p>
			<p class="friendly-paragraph">
				Notice that none of the paragraphs contain any text versus the previous picture:
				<br>
				<br>
				<img alt="Binding Data to DOM Elements with D3.js" class="img-polaroid img-rounded" src="https://www.dashingd3js.com/assets/binding_data_to_dom_elements_with_d3js_625x616-f0e1a8eef9b0469901018b17958a9448.png" width="625">
			</p>
			<p class="friendly-paragraph">
				The Text Operator sets the <a href="http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-textContent">textContent</a> of the node to the specified value on all selected elements.
			</p>
			<p class="friendly-paragraph">
				In this example, <strong>.text("hello ")</strong>, the value is <em>"hello "</em>.
				Since the selection was three &lt;p&gt; elements, each element gets a "hello " inserted into it.
			</p>
			

			<br>

			
		 <h3>Where did the Data go?</h3>
			<p class="friendly-paragraph">
				The example starts with a JavaScript data array:
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span><span class="keyword">var</span> theData = [ <span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span> ]</pre></div>
</div>

			
			<p class="friendly-paragraph">
				and some how we end up with three paragraphs that say <strong>Hello</strong>.
			</p>
			<p class="friendly-paragraph">
				What happened to our numbers 1, 2 and 3?
			</p>
			

			<br>

			
		 <h3>D3.js Data Operator Revisited</h3>
			<p class="friendly-paragraph">
				Lets take a look at our Data Operator again with a simple example in the JavaScript Console:
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span>console.log(d3.select(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>));</pre></div>
</div>

			
			<p class="friendly-paragraph">
				When you hit return and click through the down arrows to see the properties of "body", you see something like this:
				<br>
				<br>
				<img alt="JavaScript Console showing D3.js console log of Body Selection" class="img-polaroid img-rounded" src="https://www.dashingd3js.com/assets/d3.js_console_log_of_body_selection_650x147-8b501c52ad6721a12d4ba149f4d23746.png" width="650">
			</p>
			<p class="friendly-paragraph">
				Beneath the line that reads <strong>0: &lt;body&gt;</strong>, you can see the properties of this HTML body element.
			</p>
			<p class="friendly-paragraph">
				Now, run the following example in the JavaScript Console with the .data() operator added in:
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers">1</span>console.log(d3.select(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>).data([<span class="integer">1</span>]));</pre></div>
</div>

			
			<p class="friendly-paragraph">
				Our data appears as a property named <strong>__data__</strong>:
				<br>
				<br>
				<img alt="JavaScript Console showing D3.js console log of Body Selection With Data Property Added" class="img-polaroid img-rounded" src="https://www.dashingd3js.com/assets/d3.js_console_log_of_body_selection_with_data_650x133-822eda741daa407e54b13200b62bca71.png" width="650">
			</p>
			<p class="friendly-paragraph">
				When data is assigned to an element, it is stored in the property __data__.
			</p>
			<p class="friendly-paragraph">
				 This makes the data "sticky" as the __data__ property is available on re-selection.
			</p>
			<p class="friendly-paragraph">
				This is what we mean when we talk about <strong>Binding Data to Dom Elements</strong>.
			</p>
			

			<br>

			
		 <h3>Basic Example Revisited</h3>
			<p class="friendly-paragraph">
				Going back to our basic example at the top of the page, we can now see where the data was bounded to by using the console.log( ):
				</p><div class="CodeRay">
 <div class="code"><pre><span class="line-numbers"> 1</span><span class="keyword">var</span> theData = [ <span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span> ]
<span class="line-numbers"> 2</span>
<span class="line-numbers"> 3</span><span class="keyword">var</span> p = d3.select(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>).selectAll(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers"> 4</span> .data(theData)
<span class="line-numbers"> 5</span> .enter()
<span class="line-numbers"> 6</span> .append(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>)
<span class="line-numbers"> 7</span> .text(<span class="string"><span class="delimiter">"</span><span class="content">hello </span><span class="delimiter">"</span></span>);
<span class="line-numbers"> 8</span>
<span class="line-numbers"> 9</span>console.log(p);</pre></div>
</div>

			
			<p class="friendly-paragraph">
				Gives us this:
				<br>
				<br>
				<img alt="Binding Data to DOM Elements with D3.js Full Snapshot" class="img-polaroid img-rounded" src="https://www.dashingd3js.com/assets/binding_data_to_dom_elements_with_d3js_full_snapshot_625x697-f7bd431dce78572c16425935cb876e76.png" width="625">				
			</p>
			<p class="friendly-paragraph">
				From this you can see the three paragraph elements that were appended.
			</p>
			<p class="friendly-paragraph">
				You can also see that the last (third) paragraph element has the __data__ property with a value of <strong>3</strong>.
				Which came from our data set!
			</p>
			

		</div>
	</div>
</body></html>
