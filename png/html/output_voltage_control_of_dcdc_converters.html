<!DOCTYPE html><html><head><title>Output voltage control of DC/DC converters</title></head><body>
<h1>Output voltage control of DC/DC converters</h1><p><a href="http://www.fischl.de/dcdccontrol/" target="_new">Original URL</a></p>
<p><blockquote>Some applications needs to control the output voltage of a dc/dc converter instead using a fixed output voltage. For example battery chargers has to adjust the output voltage to the current battery&hellip;</blockquote></p>
<div><div id="content">


 
 <i>Some applications needs to control the output voltage of a dc/dc converter instead using a fixed output voltage.
 For example battery chargers has to adjust the output voltage to the current battery level. This page shows how to add such a control function to a buck converter circuit.</i>

 <h2>Control output via external voltage source</h2>
 Typically a voltage divider is used in dc converters to adjust the output voltage to the needed feedback voltage. To control the feedback signal by an external voltage source, a third resistor is added to the circuit.<br>
 A cheap LM2596 converter board is used (pin 4 of LM2596 is the feedback pin):<br>

 <img src="http://www.fischl.de/dcdccontrol/lm2596_board.jpg" alt="LM2596 board">
 <img src="http://www.fischl.de/dcdccontrol/lm2596_board_bot.jpg" alt="LM2596 board bottom view"><br>

 <h2>Calculate resistor network</h2>
 If there is a fixed resistor to ground and a poti to control the feedback voltage, the additional "control"-resistor can be calculated:<br>
 <br>
 <img src="http://www.fischl.de/dcdccontrol/dccontrol_resistors.png" alt="dc/dc converter resistor network"><br>
 <br>
 
 Feedback voltage: V<br>
 Resistor R3: Ohm<br>
 Output voltage range: V ... V<br>
 Control voltage range: V ... V<br>
 
 
 


 <h2>Trim poti for wanted output voltage range</h2>
 If you use a dc/dc converter board with potentiometer, please note that calibrating the poti with a multimeter is not possible because the resistance cannot be measured in circuit.<br>
 <br>
 Steps to set the upper voltage bound:
 <ul>
 <li>Set control voltage to 0V. Note: At 0V I2 is negative.</li>
 <li>Add input voltage to converter board.</li>
 <li>Measure output voltage with multimeter and trim the poti to get the required maximum output voltage.</li>
 </ul>

 <h2>Use DAC to control output voltage</h2>
 Connect a DAC output via resistor (R2) to the feedback pin of the dc converter chip.
 Here, a <img src="http://www.fischl.de/pics/en.png" alt="en"> <a href="https://www.sparkfun.com/products/12918">MCP4725 Breakout Board</a> is used which is controlled via an
 <img src="http://www.fischl.de/pics/de.png" alt="de"> <a href="http://www.elv.de/usb-i2c-interface-komplettbausatz-inkl-gehaeuse-bearbeitet-und-bedruckt-usb-kabel-3-anschlusskabel.html">ELV USB-I2C-Interface</a>.
 The output voltage of the DAC can be set through this interface with serial commands. Example to set 0V DAC voltage (-&gt; maximum output voltage on dc/dc converter):
 <pre>SC0 00 00 P</pre>
 Set maximum DAC voltage (-&gt; minimum output voltage on dc/dc converter):
 <pre>SC0 0F FF P</pre>

 <img src="http://www.fischl.de/dcdccontrol/dac_controlled_converter.jpg" alt="DAC controlled LM2596 converter board"><br>

 <h2>Links</h2>
 <img src="http://www.fischl.de/pics/en.png" alt="en"> <a href="http://forum.arduino.cc/index.php?topic=133001.msg1000888#msg1000888">Arduino Forum - Control the voltage of a buck converter</a><br> 
 <br>


 </div>
 
 </div>
</body></html>
