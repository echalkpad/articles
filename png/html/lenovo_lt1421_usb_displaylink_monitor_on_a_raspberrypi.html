<!DOCTYPE html><html><head><title>Lenovo LT1421 USB DisplayLink monitor on a RaspberryPi</title></head><body>
<h1>Lenovo LT1421 USB DisplayLink monitor on a RaspberryPi</h1><p><a href="https://www.igorkromin.net/index.php/2015/03/14/lenovo-lt1421-usb-displaylink-monitor-on-a-raspberrypi/" target="_new">Original URL</a></p>
<p><blockquote>I started a project to build a photo frame out of a Raspberry Pi (Model A) and an old Lenovo LT1421 USB monitor that I've had laying around. There were lots of confusing posts on whether DisplayLink&hellip;</blockquote></p>
<div><div class="ik_blogpost_content">I started a project to build a photo frame out of a Raspberry Pi (Model A) and an old Lenovo LT1421 USB monitor that I've had laying around. There were lots of confusing posts on whether DisplayLink USB monitors work with a Raspberry Pi and to what lengths you have to go to make them work. The only option I had was to just try it for myself, so I did and these are the results. It's a lot easier than you'd think!<p>
Here is the result, the monitor works as expected, everything is running via the USB hub. The response times are not great, in fact the monitor would be unusable for actual work because the mouse and refresh rate lag quite badly, however for my purpose of using it as a picture frame, it was perfect.<br>
</p><div class="bb_img_center"><a title="IMG_1581.jpg" href="https://www.igorkromin.net/fp-content/images/photoframe/IMG_1581.jpg" rel="lightbox-gallery1"><img src="https://www.igorkromin.net/fp-content/images/photoframe/.thumbs/IMG_1581.jpg" alt="IMG_1581.jpg" class="bb_img_shadow" width="700"></a></div><p>
So lets see how I got to this point. The first thing I did was make sure that I had a small SD card, in this case a microSD and an adapter. The boot up files do not need much space, so a 1Gb SD card is a complete overkill, but it's the smallest I could find. I then dug out an 8Gb USB key, this is where the operating system and the rest of my files would go. It's a lot quicker using USB, especially for things like building the kernel, which is required to get the DisplayLink USB monitor running.<br>
</p><div class="bb_img_center"><a title="IMG_1574.jpg" href="https://www.igorkromin.net/fp-content/images/photoframe/IMG_1574.jpg" rel="lightbox-gallery1"><img src="https://www.igorkromin.net/fp-content/images/photoframe/.thumbs/IMG_1574.jpg" alt="IMG_1574.jpg" class="bb_img_shadow" width="700"></a></div><p>
With all that in my hands, I proceeded <a class="externlink" title="Go to http://www.raspberrypi.org/downloads/" href="http://www.raspberrypi.org/downloads/" target="_blank">to download Raspbian</a>. Once that finished, I followed <a class="externlink" title="Go to http://www.raspipress.com/2013/05/install-and-run-raspbian-from-a-usb-flash-drive/" href="http://www.raspipress.com/2013/05/install-and-run-raspbian-from-a-usb-flash-drive/" target="_blank">this guide</a> on how to transfer the image to the USB key and how to set up the SD card and then how to expand the file system on the USB key to fill the available space.</p><p>
The next step was to compile the kernel. I followed instructions <a class="externlink" title="Go to http://elinux.org/Raspberry_Pi_Kernel_Compilation#1._On_the_Raspberry_Pi" href="http://elinux.org/Raspberry_Pi_Kernel_Compilation#1._On_the_Raspberry_Pi" target="_blank">here</a>. I opted for compiling directly on the Pi itself, it took overnight to complete the compilation.</p><p>
Before I did the compilation, I went through the <em>menuconfig</em> and removed some things that I thought were not necessary, like all of the sound support, etc. In addition to this, and this is the most important step here, I enabled the option for <em>Displaylink USB Framebuffer support</em>. This option is found in:<br>
<em>Device Drivers</em> -&gt; <em>Graphics Support</em> -&gt; <em>Support for Frame buffer devices</em>.</p><p>
I left support for HDMI in place, but strictly speaking this is something that I could have disabled too.</p><p>
Now I put the kernel on to compile and went to sleep. By morning this was completed, I got the new kernel and modules installed next.</p><p>
So now my new kernel was working and I confirmed that I had a new framebuffer device at <em>/dev/fb1</em>. Now it was time to configure Xorg to use the new framebuffer. I found <a class="externlink" title="Go to http://plugable.com/2011/12/23/usb-graphics-and-linux" href="http://plugable.com/2011/12/23/usb-graphics-and-linux" target="_blank">this page</a> useful for this purpose.</p><p>
I created a file named <em>60-plugable.conf</em> in the <em>/usr/share/X11/xorg.conf.d</em> directory with the following content:<br>
<br>
</p><p>
After this I cleaned up the file system a little by deleting the compilation directory and the firmware git checkout. This cleared out around 4.9Gb of space for me, which is significant considering there is only 8Gb of total storage for this setup.</p><p>
After a restart, the DisplayLink monitor worked with Xorg, perfect! I've noticed that immediately after Xorg starts there are some artefacts on the monitor like in the photo below. These quickly disappear and the usual desktop comes to life.<br>
</p><div class="bb_img_center"><a title="IMG_1584.jpg" href="https://www.igorkromin.net/fp-content/images/photoframe/IMG_1584.jpg" rel="lightbox-gallery1"><img src="https://www.igorkromin.net/fp-content/images/photoframe/.thumbs/IMG_1584.jpg" alt="IMG_1584.jpg" class="bb_img_shadow" width="700"></a></div><p>
So there you go, the only steps are to rebuild the kernel with DisplayLink support and to configure Xorg to use the newly created framebuffer.</p></div>
	
		
	</div>
</body></html>
