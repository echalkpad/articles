<!DOCTYPE html><html><head><title>Overview | Wave Shield</title></head><body>
<h1>Overview | Wave Shield</h1><p><a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all" target="_new">Original URL</a></p>
<p><blockquote>Adding quality audio to an electronic project is surprisingly difficult. People tend to end up either using low-quality ISD chips (you might get 8Khz sampling rate for 30seconds out of these, if&hellip;</blockquote></p>
<div><div class="page-content all-page-view-content">
											 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/4693">
 <img class="4693-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/693/medium800/adafruit_products_photo_zoom.jpeg?1396815658" alt="adafruit_products_photo_zoom.jpeg">

</a> </div>
 <div class="row-fluid build-text">
 Adding quality audio to an electronic project is surprisingly difficult. People tend to end up either using <a href="https://www.nuvoton.com/NuvotonMOSS/Community/ProductInfo.aspx?tp_GUID=d2589477-840d-4046-9c3a-2e0e457048b3">low-quality ISD chips</a> (you might get 8Khz sampling rate for 30seconds out of these, if you're lucky!) or mucking around with trying to control a CD or MP3 player. Although it's possible to <a href="http://transistor-man.com/Rage_against_the_arduino.html">generate audio direct from a microcontroller using a PWM output</a>, the quality is often low and it's hard to fit a lot of music in an EEPROM chip. You can buy an embedded MP3 player board, but they're either expensive or difficult to use!
<p>
Here is a shield for Arduino that solves many of these problems. It can play up to 22KHz, 12bit uncompressed audio files of any length. It's low cost, available as an easy-to-make kit. It has an onboard DAC, filter and op-amp for high quality output. Audio files are read off of an SD/MMC card, which are available at nearly any store. Volume can be controlled with the onboard thumbwheel potentiometer.
 </p></div>
 
 <div class="row-fluid build-text">
 
<p><em>Click on the play button to watch a demo of the wave shield playing assorting audio through a small speaker.</em></p>
The shield comes with an Arduino library for easy use; simply drag uncompressed wave files onto the SD card and plug it in. Then use the library to play audio when buttons are pressed, or when a sensor goes off, or when serial data is received, etc. Audio is played asynchronously as an interrupt, so the Arduino can perform tasks while the audio is playing.
<ul>
<li>Can play any uncompressed 22KHz, 12bit, mono Wave (.wav) files of any size. While it isnt CD quality, it is certainly good enough to play music, have spoken word, or audio effects.</li>
<li>Output is mono, into L and R channels, standard 3.5mm headphone jack and a connection for a speaker that is switched on when the headphones are unplugged.</li>
<li>Files are read off of <a href="https://learn.adafruit.com/sd-card">FAT16 formatted SD/MMC card</a>.
</li>
<li>Included library makes playing audio easy.</li>
</ul>
While the shield has been tested and works well, here are some points to keep in mind:
<ul>
<li>The audio playback library uses 10K of flash - so if you want to use an NG arduino, you'll need to upgrade to an Atmega168 chip.</li>
<li>About 600 bytes of SRAM are used to buffer the audio and keep track of file data, so RAM-heavy projects may not work well.</li>
<li>The shield can't play MP3, WMA, Ogg or other compressed audio files. It can only play uncompressed PCM/WAV files. <a href="https://learn.adafruit.com/convert-files">Converting audio to WAV format</a> is very easy, and is often the default format for many audio programs.</li>
<li>Files are stored as 8.3 name format, and can only be placed in the root directory. That means you can only have ~512 files (but they can be any size).</li>
</ul>
<br><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#ideas-for-what-you-can-use-it-for-dot-dot-dot" class="anchor-link"></a>Ideas for what you can use it for...</h2>
<ul>
<li>Make a portable audio player</li>
<li>Use the AT&amp;T text-to-speech site to make snippets of speech that you string together for a talking project, like..</li>
<li>Talking temperature sensor</li>
<li>Talking clock</li>
<li>Interfaces for sight-impared people</li>
<li>Doorbell that plays a cool tune</li>
<li>Jukebox/music-box that plays a song when its opened, or a coin is inserted</li>
<li>Security system that warns the intruder</li>
<li>Audio looper for musical effects and performances</li>
<li>Synthesizer with different sounds</li>
<li>Really freaky halloween props that scream</li>
<li>Display (like a point-of-sale box) that you can plug into to hear the message</li>
</ul>
 </div>

									</div>
									<div class="page-content all-page-view-content">
											 <div class="build-faq">
 <h2 class="question">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#faq-1" class="anchor-link"></a>
 
 <i class="fa fa-question-circle"></i>
 Can this shield play MP3 files? What about WMA, Ogg, AAC, etc?</h2>
 <div class="answer">No, compressed audio requires either a specialized chip (which is expensive) or a very powerful chip. The Arduino microcontroller can't uncompress MP3 on the fly and to keep the shield inexpensive, no mp3 decoder chip is included.
<p>For recording and playback of other file formats, see the <a href="http://www.adafruit.com/products/1381">VS1053 breakout board</a>.</p></div>
 </div>
 <div class="build-faq">
 <h2 class="question">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#faq-2" class="anchor-link"></a>
 
 <i class="fa fa-question-circle"></i>
 What sort of audio can it play?</h2>
 <div class="answer">It can play uncompressed Wave files (.wav format). This is a standard format and pretty much every audio program can convert your music or audio into wave format. Make sure the sample rate is mono, 22KHz (or less) and 16-bit (or less). The user manual has instructions on <a href="http://learn.adafruit.com/audio-shield-for-arduino/convert-files">how to convert</a><span> and adjust files for optimum playback.</span>
</div>
 </div>
 <div class="build-faq">
 <h2 class="question">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#faq-3" class="anchor-link"></a>
 
 <i class="fa fa-question-circle"></i>
 Can I play two files at once?</h2>
 <p class="answer">No, the waveshield can <strong>only play one WAV file at a time</strong><span>. There is no way to play two or more wave files at one time - the Arduino is not fast enough to mix audio.</span>
</p>
 </div>
 <div class="build-faq">
 <h2 class="question">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#faq-4" class="anchor-link"></a>
 
 <i class="fa fa-question-circle"></i>
 Can it play Stereo?</h2>
 <p class="answer"><span>No, the software libraries, and hardware DAC and amplfier do not support stereo sound. You could split the mono output into two speakers but they wont be 'true stereo.'</span></p>
 </div>
 <div class="build-faq">
 <h2 class="question">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#faq-5" class="anchor-link"></a>
 
 <i class="fa fa-question-circle"></i>
 What does it sound like?</h2>
 <div class="answer">The best way to determine if the quality is good enough for your project is use Audacity and go thru the steps in the <a href="http://learn.adafruit.com/audio-shield-for-arduino/convert-files">User Manual</a><span> for converting MP3s (and other files) to 22KHz/16-bit format.</span>
</div>
 </div>
 <div class="build-faq">
 <h2 class="question">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#faq-6" class="anchor-link"></a>
 
 <i class="fa fa-question-circle"></i>
 Can this shield record audio?</h2>
 <div class="answer">There is no hook-up for a microphone, so it will take a bit of hacking. But recording is possible with the <a href="http://code.google.com/p/waverp/downloads/list">WaveRP library</a> by fat16lib.<p>Don't try this with an older Arduino (atmega168). You need the memory of an Atmega328 (such as an Arduino Uno).</p></div>
 </div>
 <div class="build-faq">
 <h2 class="question">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#faq-7" class="anchor-link"></a>
 
 <i class="fa fa-question-circle"></i>
 What pins are used by the shield?</h2>
 <div class="answer">Pins <strong>13, 12, 11</strong><span> are always used by the SD card (they are the only pins that have a high speed SPI interface). Then there are 5 other pins used to talk to the DAC and SD card, but they can be set to connect to any arduino pin. However, by default, the library is configured to use pins </span><strong>10</strong><span> (for SD card) and pins </span><strong>2, 3, 4</strong><span> and </span><strong>5</strong><span> for the DAC. To chanage these pins requires modifying the library - the pins are referenced by their 'hardware' pin names (ie PORTD, etc) not by arduino pins. </span><p><span>That means pins </span><strong>6, 7, 8, 9</strong><span> and the 6 analog in pins (also known as digital i/o pins </span><strong>14-20</strong><span>) are available.</span>
</p></div>
 </div>
 <div class="build-faq">
 <h2 class="question">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#faq-8" class="anchor-link"></a>
 
 <i class="fa fa-question-circle"></i>
 How come I cant use the PWM output on pin 9?</h2>
 <div class="answer">Timer 1 is used by the wave shield for timing, if you want to use a servo, you can use <a href="http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1230479947">ServoTimer2</a><span> or a 'softservo' library.</span>
</div>
 </div>
 <div class="build-faq">
 <h2 class="question">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#faq-9" class="anchor-link"></a>
 
 <i class="fa fa-question-circle"></i>
 What are LED1, LED2, R9 &amp;amp;amp;amp; R10 for? They're not in the instructions.</h2>
 <p class="answer"><span>These are 'spots' for unincluded components, you can install 3mm LEDs into the slots and 1K resistors into the matching resistor slots. Theres a solder hole next to them so you can wire up the LEDs as indicators. There's no software in the shield library to support them, they're just component locations.</span></p>
 </div>
 <div class="build-faq">
 <h2 class="question">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#faq-10" class="anchor-link"></a>
 
 <i class="fa fa-question-circle"></i>
 What is CD, WP and SW?</h2>
 <p class="answer"><span>CD is the Card Detect switch in the SD card holder, WP is the Write Protect detect switch in the SD card holder, SW is the switch in the potentiometer. See the schematics for how these are connected up. They are not used in any libraries, there is no example code for them. If you want to use them they are there but are not necessary.</span></p>
 </div>

									</div>
									<div class="page-content all-page-view-content">
											 <div class="row-fluid build-text">
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#overview" class="anchor-link"></a>Overview</h2>
Here is an explaination of how the wave shield works. We'll go section by section. You'll want to refer to the schematic.
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#voltage-regulator" class="anchor-link"></a>Voltage regulator</h2>
The easiest thing to understand is the 3.3V voltage regulator. This takes the 5V supply from the Arduino and converts it to a nice 3.3V supply. This is necessary because SD/MMC cards only work on 3.3V. If you give them 5V they'll burn out &amp; die!
<p>
The voltage regulator used is the MCP1700-330, which can provide up to 250 mA of current. There are 4 capacitors associated with the regulator. <strong>C1</strong> and <strong>C2</strong> are the input capacitors; they stabilize the 5V input. <strong>C3</strong> and <strong>C4</strong> are the output capacitors, they stabilize the 3.3V output
</p><p>
There is a jumper that allows you to skip the regulator and use the 'built in' 3.3V supply from the Arduino. However, it is not suggested as that supply is not guaranteed to provide the current necessary.
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#sd-slash-mmc-card-holder" class="anchor-link"></a>SD/MMC card holder</h2>

 </div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/4694">
 <img class="4694-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/694/medium800/adafruit_products_sdholder_t.jpg?1396815665" alt="adafruit_products_sdholder_t.jpg">

</a> </div>
 <div class="row-fluid build-text">
 SD/MMC cards are very popular, small, and inexpensive. The card holder is what allows you to remove and replace the card easily. They can be removed/replaced thousands of times. The top three 'pins' are <strong>CD, WP</strong> and <strong>COMMON_SW</strong>. CD stands for "card detect" this is a mechanical switch that closes when the card is inserted. WP stands for "write protect," this is a mechanical switch that closes when the card has the little side tab slid down to 'lock.' COMMON_SW is the common connection for the two switches. We simply connect this to ground. Thus CD and WP will be grounded when active.
<p>
At the bottom are the power supplies. There are 2 mechanical ground connections and a logic ground. There is also the logic power connection, connected to the 3.3v regulator.
 </p></div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/4695">
 <img class="4695-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/695/medium800/adafruit_products_Multi_Media_Card_back.jpg?1396815672" alt="adafruit_products_Multi_Media_Card_back.jpg">

</a> </div>
 <div class="row-fluid build-text">
 In the middle are the data connections. <strong>DAT1</strong> and <strong>DAT2</strong> are for advanced/high-speed SD card interfacing. We don't do this so they are left disconnected. <strong>DATA_OUT</strong> is the serial data out from the card, which is connected to the SPI port of the Arduino. <strong>DATA_IN</strong> is the input and <strong>SCLK</strong> is the clock input. Since they must be 3.3V and the Arduino usually sends 5V data, we use voltage dividers (<strong>R2, R3, R4</strong> and <strong>R5</strong>) to reduce the inputs down.
<p><strong>CS</strong> is the select line, used to tell the MMC that we want to send it data. This line is pulled low (to ground) when we want to send data to the card. That means we need to make sure when we dont have anything connected, the pin is pulled high to ~3.3V. We use <strong>R6</strong> as the pullup and zener diode <strong>D1</strong> to keep the voltage at 3.3V. <strong>R1</strong> allows the diode to bias properly when the Arduino pulls the pin high.
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#the-microcontroller-slash-arduino" class="anchor-link"></a>The microcontroller/Arduino</h2>
The library contains a bunch of specialized code. The first part is a 'FAT16' library, this is a set of functions that allow the chip to read the SD card, locate files and read their contents. The method it does this by is particularly detailed and you can read the <a href="http://www.cs.ucr.edu/~amitra/sdcard/ProdManualSDCardv1.9.pdf">SD/MMC</a> and <a href="http://www.microsoft.com/technet/prodtechnol/windows2000serv/reskit/prork/prdf_fls_tllv.mspx?mfr=true">FAT16 manuals</a> if you're interested.
 </div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/4696">
 <img class="4696-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/696/medium800/adafruit_products_fncc02.gif?1448058658" alt="adafruit_products_fncc02.gif">

</a> </div>
 <div class="row-fluid build-text">
 Once it opens a file and is ready to read it, it looks through the first section of the file. If it's a Wave file, there will be all sorts of information stored in this header that will indicate the channels (mono/stereo/etc), bits-per-sample (8 to 32), sample rate (ie 16KHz) etc. <a href="http://ccrma.stanford.edu/courses/422/projects/WaveFormat/">You can read more about the header format here</a>. Basically, the firmware verifies that it is mono channel, 16 or less bits-per-sample and 22KHz or less sample rate. Then it sets up the audio interrupt that will go off sample-rate times a second. For example, if it's a 22KHz audio sample, the interrupt will go off 22,000 times a second!
 </div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/4697">
 <img class="4697-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/697/medium800/adafruit_products_250px-Pcmsvg.png?1396815698" alt="adafruit_products_250px-Pcmsvg.png">

</a> </div>
 <div class="row-fluid build-text">
 
<p>Image from <a href="http://www.microsoft.com/technet/prodtechnol/windows2000serv/reskit/prork/prdf_fls_tllv.mspx?mfr=true">wikipedia</a></p>
The audio is encoded in <a href="http://en.wikipedia.org/wiki/PCM">PCM format</a>. This means "pulse Code Modulation". Lets say it's a 16bit, 22khz wave. The audio waveform is sliced up 22,000 times a second and a corresponding value (up to 16 bits - from 0 to 65,635) is read from the waveform, then that value is stored in the file. Each sample is a unique value. The file is not compressed. This means the files are very large but the quality is very very good.
<p>
The SD card can provide 512 bytes at a time. This is buffered inside the Arduino's RAM so that we have smooth playback. (Techinally, its a double-buffer which means we read 256 bytes and play 256 bytes, then swap.) The audio interrupt picks one sample at a time and sends the data to the DAC (digital/analog converter).
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#dac" class="anchor-link"></a>DAC</h2>
The DAC is a very simple device. When you send it data it will convert that digital information back into an analog signal!
 </div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/4698">
 <img class="4698-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/698/medium800/adafruit_products_180px-Zeroorderhold.signal.svg.png?1396815719" alt="adafruit_products_180px-Zeroorderhold.signal.svg.png">

</a> </div>
 <div class="row-fluid build-text">
 You'll notice it actually doesn't get the orignal waveform perfect. The more bits of digital data, the higher quality of audio reproduction. CDs have 16-bits per sample. While it would have been nice to have a 16-bit DAC, the best option for this design was a 12-bit dac. (That's still quite good.)
<p>
The microcontroller/Arduino uses the DAC_CS (chip select), DAC_CLK (data clock), DAC_DI (data), and DAC_LATCH (convert the digital to analog) pins to send the sample data over. The DAC also has a Vref input, this is the reference voltage that it uses to define the maximum analog value it can generate. There is a very low low-pass filter connected to it (<strong>C6</strong> and <strong>R8</strong>) so that any digital noise (there is -a lot-) will not make it into the audio signal.
</p><p>
There is another low-pass filter connected to the output of the DAC (<strong>R7</strong> and <strong>C8</strong>). This is for filtering out the 'square wave' component you see in the recreated-audio wave. Even though the noise is only 1/4096'ths of the signal (about 1.2mV) it's still noise and these two components filter out anything above 11KHz. The reason the filter cut-off frequency is 11KHz and not 22KHz is that if you sample at 22KHz you will only be able to reproduce frequencies at half that rate, 11KHz. This is the <a href="http://en.wikipedia.org/wiki/Nyquist%E2%80%93Shannon_sampling_theorem">Nyquist</a> theory. It is sneaky but true. If you try to sample 16KHz waveform at 22KHz it will actually sound much -lower-, it will play at 6KHz (it is 'mirrored' around 11KHz).
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#analog-output" class="anchor-link"></a>Analog output</h2>
Finally there is the volume control and output stage. The potentiometer acts as a simple volume control. It simply divides down the analog signal from 5Vpp down to as low as 0Vpp. The pot is 'audio' type which means that the voltage changes logarithmically, which our ears interpret as linearly.
<p>
The analog signal then goes into a high-output, rail-to-rail opamp. This op-amp can provide up to 100mA per channel. The two channels are hooked up in parallel for up to 200mA output (at 5V). This means it can provide 1/8 W into an 8ohm speaker (or 1/4 W into 4ohm speaker). This isn't enough for a boom-box but its good for headphones and small speakers. The output is filtered through a bypass capacitor <strong>C9</strong> which will keep any DC voltage from going to the speaker, which could damage it.
</p><p>
The headphone jack is stereo, which both mono channels connected in parallel. This gives the most power output. There are internal switches in the jack so that when the headphones are removed, the audio flows to the 'speaker connection' next to the jack.
 </p></div>

									</div>
									<div class="page-content all-page-view-content">
											 <div class="row-fluid build-text">
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#steps" class="anchor-link"></a>Steps</h2>
This is a very easy kit to make, just go through each of these steps to build the kit.
<ol>
<li><a href="http://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino/preparation" title="Link: http://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino/preparation">Tools and preparation</a></li>
<li><a href="http://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino/parts" title="Link: http://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino/parts">Check the parts list</a></li>
<li><a href="http://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino/solder">Solder it</a></li>
</ol>
 </div>

									</div>
									<div class="page-content all-page-view-content">
											 <div class="row-fluid build-text">
 
<h2></h2>
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#prep" class="anchor-link"></a>Prep</h2>
<a href="http://learn.adafruit.com/adafruit-guide-excellent-soldering">Learn how to solder with tons of tutorials</a>!
<a href="http://learn.adafruit.com/multimeters">Don't forget to learn how to use your multimeter too</a>!<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#tools" class="anchor-link"></a>Tools</h2>There are a few tools that are required for assembly. None of these tools are included. If you don't have them, now would be a good time to borrow or purchase them. They are very very handy whenever assembling/fixing/modifying electronic devices! I provide links to buy them, but of course, you should get them where ever is most convenient/inexpensive. Many of these parts are available in a place like Radio Shack or other (higher quality) DIY electronics stores.<br>
 </div>
 

									</div>
									<div class="page-content all-page-view-content">
											 <div class="row-fluid build-text">
 
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#parts-list-for-version-1-dot-1-only" class="anchor-link"></a>Parts list for version 1.1 only!</h2>
Check to make sure your kit comes with the following parts. Sometimes we make mistakes so double check everything and email <a class="__cf_email__" href="https://learn.adafruit.com/cdn-cgi/l/email-protection">[email&#xA0;protected]</a> if you need replacements!
 
 
 </div>
 <div class="editor-table-container">
 
 
 
<table class="editor-table"><tbody>
<tr>
<td>Image</td>
<td>Name</td>
<td>Description</td>
<td>Part information</td>
<td>Qty</td>
</tr>
<tr>
<td class="4775-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4775"><img class="4775-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/775/medium800/adafruit_products_mcp1700.jpg?1396816378" alt="adafruit_products_mcp1700.jpg"></a></p></td>
<td>IC1</td>
<td>3.3V linear voltage regulator, 250mA current</td>
<td><a href="http://www.adafruit.com/partfinder/vreg?s%5B%5D=mcp1700#others">MCP1700-3302E/TO</a></td>
<td>1</td>
</tr>
<tr>
<td class="4776-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4776"><img class="4776-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/776/medium800/adafruit_products_mcp4921.jpg?1396816387" alt="adafruit_products_mcp4921.jpg"></a></p></td>
<td>IC2</td>
<td>12-bit DAC</td>
<td><a href="http://www.adafruit.com/partfinder/codec?s%5B%5D=mcp4921#dacs">MCP4921</a></td>
<td>1</td>
</tr>
<tr>
<td class="4777-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4777"><img class="4777-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/777/medium800/adafruit_products_ts922.jpg?1396816395" alt="adafruit_products_ts922.jpg"></a></p></td>
<td>IC3</td>
<td>High-current opamp</td>
<td>
<a href="http://www.adafruit.com/partfinder/ic?s%5B%5D=ts922#op_amps">TS922IN or TS922AIN</a><br>OR&#xA0; <br>TLV2462<br>
</td>
<td>1</td>
</tr>
<tr>
<td class="4778-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4778"><img class="4778-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/778/medium800/adafruit_products_74hc595_t.jpg?1396816403" alt="adafruit_products_74hc595_t.jpg"></a></p></td>
<td>IC4</td>
<td>Level shifter for SD card<p>If you don't have this part you've probably got a v1.0kit. See the parts list below. </p></td>
<td><a title="Link: http://www.adafruit.com/partfinder/ic?s%5B%5D=74ahc125n#logic" href="http://www.adafruit.com/partfinder/ic?s%5B%5D=74ahc125n#logic">74xx125 (e.g. 74AHC125)<br></a></td>
<td>1</td>
</tr>
<tr>
<td class="4779-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4779"><img class="4779-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/779/medium800/adafruit_products_sdholder.jpg?1396816412" alt="adafruit_products_sdholder.jpg"></a></p></td>
<td></td>
<td>SD/MMC card holder</td>
<td><a href="http://www.adafruit.com/partfinder/connectors#memory_card_connectors">Tyco 2041021-3</a></td>
<td>1</td>
</tr>
<tr>
<td class="4780-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4780"><img class="4780-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/780/medium800/adafruit_products_thumbwheel.jpg?1396816424" alt="adafruit_products_thumbwheel.jpg"></a></p></td>
<td><span>TM1</span></td>
<td>10K or 50K Audio thumbwheel potentiometer.<p>Includes pot, thumbwheel and tiny screw. </p></td>
<td><a href="http://www.adafruit.com/partfinder/pots?s%5B%5D=311-1204f-10k">311-1204F-10K</a></td>
<td>1</td>
</tr>
<tr>
<td class="4781-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4781"><img class="4781-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/781/medium800/adafruit_products_SJ1-3555NG.jpg?1396816433" alt="adafruit_products_SJ1-3555NG.jpg"></a></p></td>
<td>X1</td>
<td>Stereo headphone jack with switches.</td>
<td><a href="http://www.adafruit.com/partfinder/connectors?s%5B%5D=stx-3100#audiovideo">STX-3100-5N</a></td>
<td>1</td>
</tr>
<tr>
<td class="4782-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4782"><img class="4782-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/782/medium800/adafruit_products_r7.gif?1448058654" alt="adafruit_products_r7.gif"></a></p></td>
<td>R7</td>
<td>1/4W 5% 1.5K resistor<p>Brown Green Red Gold</p></td>
<td><a href="http://www.adafruit.com/partfinder/resistors#w_5_carbon">Generic</a></td>
<td>1</td>
</tr>
<tr>
<td class="4783-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4783"><img class="4783-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/783/medium800/adafruit_products_r6.gif?1448058650" alt="adafruit_products_r6.gif"></a></p></td>
<td>R6</td>
<td>1/4W 5% 10K resistor<p>Brown, Black, Orange, Gold</p></td>
<td><a href="http://www.adafruit.com/partfinder/resistors#w_5_carbon">Generic</a></td>
<td>1</td>
</tr>
<tr>
<td class="4784-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4784"><img class="4784-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/784/medium800/adafruit_products_r8.gif?1448058645" alt="adafruit_products_r8.gif"></a></p></td>
<td>R8</td>
<td>1/4W 5% 100K resistor<p>Brown, Black, Yellow, Gold</p></td>
<td><a href="http://www.adafruit.com/partfinder/resistors#w_5_carbon">Generic</a></td>
<td>1</td>
</tr>
<tr>
<td class="4785-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4785"><img class="4785-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/785/medium800/adafruit_products_104cerm.jpg?1396816470" alt="adafruit_products_104cerm.jpg"></a></p></td>
<td>C8</td>
<td>0.01uF ceramic capacitor (103)<p>
May look deceptively like the 0.1uF ceramic capacitors! Lately has been shipped in an 'axial' (not 'radial' package. See instructions for details.</p></td>
<td><a href="http://mouser.com/ProductDetail/AVX/SA105E103MAR/?qs=sGAEpiMZZMuAYrNc52CMZGHh0l%2fWLiqmHJkpK96EGko%3d">Mouser</a></td>
<td>1</td>
</tr>
<tr>
<td class="4786-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4786"><img class="4786-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/786/medium800/adafruit_products_104cerm.jpg?1396816477" alt="adafruit_products_104cerm.jpg"></a></p></td>
<td><span>C2, C3, C5, C6, C7</span></td>
<td>0.1uF ceramic capacitor (104)<p>
Looks deceptively like the 0.01uF ceramic capacitor!</p></td>
<td><a href="http://www.adafruit.com/partfinder/caps?s%5B%5D=0.1uf%20%2F%2050v#ceramic_capacitors">Generic</a></td>
<td>5</td>
</tr>
<tr>
<td class="4787-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4787"><img class="4787-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/787/medium800/adafruit_products_100uf-10v.jpg?1396816487" alt="adafruit_products_100uf-10v.jpg"></a></p></td>
<td><span>C1, C4, C9</span></td>
<td><span>100uF / 6V or greater capacitor</span></td>
<td><a href="http://www.adafruit.com/partfinder/caps#electrolytic">Generic</a></td>
<td>3</td>
</tr>
<tr>
<td class="4788-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4788"><img class="4788-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/788/medium800/adafruit_products_6mmswitch.jpg?1396816496" alt="adafruit_products_6mmswitch.jpg"></a></p></td>
<td><span>RESET</span></td>
<td><span>6mm tactile switch</span></td>
<td><a href="http://www.adafruit.com/partfinder/switches?s%5B%5D=6mm%20tactile#pushbuttons">B3F-1000</a></td>
<td>1</td>
</tr>
<tr>
<td class="4789-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4789"><img class="4789-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/789/medium800/adafruit_products_6pinheader.jpg?1396816504" alt="adafruit_products_6pinheader.jpg"></a></p></td>
<td><span>ICSP</span></td>
<td><span>6-pin ICSP header</span></td>
<td><a href="http://www.adafruit.com/partfinder/header?s%5B%5D=unshrouded%202x3#male_header">Generic</a></td>
<td>1</td>
</tr>
<tr>
<td class="4790-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4790"><img class="4790-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/790/medium800/adafruit_products_headerm36.jpg?1396816513" alt="adafruit_products_headerm36.jpg"></a></p></td>
<td></td>
<td><span>36 pin male header (1x36)</span></td>
<td><a href="http://www.adafruit.com/partfinder/header#male_header">Generic</a></td>
<td>1</td>
</tr>
<tr>
<td></td>
<td><span>PCB</span></td>
<td><span>Circuit board with "v1.1" on it.</span></td>
<td><a href="http://www.adafruit.com/">Adafruit Industries</a></td>
<td>1</td>
</tr>
</tbody></table>
 </div>
 <div class="row-fluid build-text">
 
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#parts-list-for-version-1-dot-0-only" class="anchor-link"></a>Parts list for version 1.0 ONLY</h2>
Check to make sure your kit comes with the following parts.Sometimes we make mistakes so double check everything and email <a class="__cf_email__" href="https://learn.adafruit.com/cdn-cgi/l/email-protection">[email&#xA0;protected]</a> if you need replacements!
 
 
 </div>
 <div class="editor-table-container">
 
 
 
<table class="editor-table"><tbody>
<tr>
<td>Image</td>
<td>Name</td>
<td>Description</td>
<td>Part Information</td>
<td>Qty</td>
</tr>
<tr>
<td class="4791-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4791"><img class="4791-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/791/medium800/adafruit_products_mcp1700.jpg?1396816519" alt="adafruit_products_mcp1700.jpg"></a></p></td>
<td><span>IC1</span></td>
<td><span>3.3V linear voltage regulator, 250mA current</span></td>
<td><a href="http://www.adafruit.com/partfinder/vreg?s%5B%5D=mcp1700#others">MCP1700-3302E/TO</a></td>
<td>1</td>
</tr>
<tr>
<td class="4792-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4792"><img class="4792-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/792/medium800/adafruit_products_mcp4921.jpg?1396816528" alt="adafruit_products_mcp4921.jpg"></a></p></td>
<td>IC2</td>
<td><span>12-bit DAC</span></td>
<td><a href="http://www.adafruit.com/partfinder/codec?s%5B%5D=mcp4921#dacs">MCP4921</a></td>
<td>1</td>
</tr>
<tr>
<td class="4793-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4793"><img class="4793-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/793/medium800/adafruit_products_ts922.jpg?1396816536" alt="adafruit_products_ts922.jpg"></a></p></td>
<td>IC3</td>
<td>High-current opmap</td>
<td><a href="http://www.adafruit.com/partfinder/ic?s%5B%5D=ts922#op_amps">TS922IN or TS922AIN</a></td>
<td>1</td>
</tr>
<tr>
<td class="4794-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4794"><img class="4794-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/794/medium800/adafruit_products_sdholder.jpg?1396816547" alt="adafruit_products_sdholder.jpg"></a></p></td>
<td></td>
<td><span>SD/MMC card holder</span></td>
<td><a href="http://www.adafruit.com/partfinder/connectors#memory_card_connectors">Tyco 2041021-3</a></td>
<td>1</td>
</tr>
<tr>
<td class="4795-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4795"><img class="4795-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/795/medium800/adafruit_products_thumbwheel.jpg?1396816554" alt="adafruit_products_thumbwheel.jpg"></a></p></td>
<td><span>TM1</span></td>
<td>10K Audio thumbwheel potentiometer.<p>
Includes pot, thumbwheel and tiny screw.</p></td>
<td><a href="http://www.adafruit.com/partfinder/pots?s%5B%5D=311-1204f-10k">311-1204F-10K</a></td>
<td>1</td>
</tr>
<tr>
<td class="4796-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4796"><img class="4796-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/796/medium800/adafruit_products_SJ1-3555NG.jpg?1396816563" alt="adafruit_products_SJ1-3555NG.jpg"></a></p></td>
<td><span>X1</span></td>
<td><span>Stereo headphone jack with switches.</span></td>
<td><a href="http://www.adafruit.com/partfinder/connectors?s%5B%5D=stx-3100#audiovideo">STX-3100-5N</a></td>
<td>1</td>
</tr>
<tr>
<td class="4797-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4797"><img class="4797-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/797/medium800/adafruit_products_r1.gif?1448058641" alt="adafruit_products_r1.gif"></a></p></td>
<td>R1</td>
<td>1/4W 5% 1.0K resistor<p>
Brown, Black, Red, Gold</p><p>
If you don't have this part, you've probably got a v1.1 kit. See the parts list above.</p></td>
<td><a href="http://www.adafruit.com/partfinder/resistors#w_5_carbon">Generic</a></td>
<td>1</td>
</tr>
<tr>
<td class="4798-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4798"><img class="4798-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/798/medium800/adafruit_products_r7.gif?1448058636" alt="adafruit_products_r7.gif"></a></p></td>
<td>R7</td>
<td>1/4W 5% 1.5K resistor<p>
Brown, Green, Red, Gold</p></td>
<td><a href="http://www.adafruit.com/partfinder/resistors#w_5_carbon">Generic</a></td>
<td>1</td>
</tr>
<tr>
<td class="4799-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4799"><img class="4799-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/799/medium800/adafruit_products_r3.gif?1448058632" alt="adafruit_products_r3.gif"></a></p></td>
<td><span>R3, R5, R6</span></td>
<td>1/4W 5% 4.7K resistor<p>
Yellow, Purple, Red, Gold</p><p>
If you don't have this part, you've probably got a v1.1 kit. See the parts list above.</p></td>
<td><a href="http://www.adafruit.com/partfinder/resistors#w_5_carbon">Generic</a></td>
<td>3</td>
</tr>
<tr>
<td class="4800-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4800"><img class="4800-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/800/medium800/adafruit_products_r2.gif?1448058627" alt="adafruit_products_r2.gif"></a></p></td>
<td>R2, R4</td>
<td>1/4W 5% 10K resistor<p>
Brown, Black, Orange, Gold</p></td>
<td><a href="http://www.adafruit.com/partfinder/resistors#w_5_carbon">Generic</a></td>
<td>2</td>
</tr>
<tr>
<td class="4801-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4801"><img class="4801-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/801/medium800/adafruit_products_r8.gif?1448058623" alt="adafruit_products_r8.gif"></a></p></td>
<td>R8</td>
<td>1/4W 5% 100K resistor<p>
Brown, Black, Yellow, Gold</p></td>
<td><a href="http://www.adafruit.com/partfinder/resistors#w_5_carbon">Generic</a></td>
<td>1</td>
</tr>
<tr>
<td class="4802-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4802"><img class="4802-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/802/medium800/adafruit_products_104cerm.jpg?1396816618" alt="adafruit_products_104cerm.jpg"></a></p></td>
<td>C8</td>
<td>0.01uF ceramic capacitor (103)<p>
May look deceptively like the 0.1uF ceramic capacitors! Lately has been shipped in an 'axial' (not 'radial' package. See instructions for details.</p></td>
<td><a href="http://mouser.com/ProductDetail/AVX/SA105E103MAR/?qs=sGAEpiMZZMuAYrNc52CMZGHh0l%2fWLiqmHJkpK96EGko%3d">Mouser</a></td>
<td>1</td>
</tr>
<tr>
<td class="4803-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4803"><img class="4803-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/803/medium800/adafruit_products_104cerm.jpg?1396816625" alt="adafruit_products_104cerm.jpg"></a></p></td>
<td><span>C2, C3, C5, C6, C7</span></td>
<td>0.1uF ceramic capacitor (104)<p>
Looks deceptively like the 0.01uF ceramic capacitor!</p></td>
<td><a href="http://www.adafruit.com/partfinder/caps?s%5B%5D=0.1uf%20%2F%2050v#ceramic_capacitors">Generic</a></td>
<td>5</td>
</tr>
<tr>
<td class="4804-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4804"><img class="4804-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/804/medium800/adafruit_products_100uf-10v.jpg?1396816634" alt="adafruit_products_100uf-10v.jpg"></a></p></td>
<td><span>C1, C4, C9</span></td>
<td><span>100uF / 6V capacitor</span></td>
<td><a href="http://www.adafruit.com/partfinder/caps#electrolytic">Generic</a></td>
<td>3</td>
</tr>
<tr>
<td class="4805-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4805"><img class="4805-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/805/medium800/adafruit_products_1n4148.jpg?1396816642" alt="adafruit_products_1n4148.jpg"></a></p></td>
<td>D1</td>
<td>3.6V Zener diode<p>
If you don't have this part, you've probably got a v1.1 kit. See the parts list above.</p></td>
<td><a href="http://www.adafruit.com/partfinder/diodes?s%5B%5D=1n5227b#zener">1N5227B</a></td>
<td>1</td>
</tr>
<tr>
<td class="4806-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4806"><img class="4806-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/806/medium800/adafruit_products_6mmswitch.jpg?1396816652" alt="adafruit_products_6mmswitch.jpg"></a></p></td>
<td>RESET</td>
<td><span>6mm tactile switch</span></td>
<td><a href="http://www.adafruit.com/partfinder/switches?s%5B%5D=6mm%20tactile#pushbuttons">B3F-1000</a></td>
<td>1</td>
</tr>
<tr>
<td class="4807-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4807"><img class="4807-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/807/medium800/adafruit_products_6pinheader.jpg?1396816661" alt="adafruit_products_6pinheader.jpg"></a></p></td>
<td><span>ICSP</span></td>
<td><span>6-pin ICSP header</span></td>
<td><a href="http://www.adafruit.com/partfinder/header?s%5B%5D=unshrouded%202x3#male_header">Generic</a></td>
<td>1</td>
</tr>
<tr>
<td class="4809-asset image-cell"><p class="row-fluid table-image"><a href="https://learn.adafruit.com/assets/4809"><img class="4809-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/809/medium800/adafruit_products_headerm36.jpg?1396816677" alt="adafruit_products_headerm36.jpg"></a></p></td>
<td></td>
<td><span>36 pin male header (1x36)</span></td>
<td><a href="http://www.adafruit.com/partfinder/header#male_header">Generic</a></td>
<td>1</td>
</tr>
<tr>
<td></td>
<td>PCB</td>
<td>Circuit board</td>
<td><a href="http://www.adafruit.com/">Adafruit Industries</a></td>
<td>1</td>
</tr>
</tbody></table>
 </div>

									</div>
									<div class="page-content all-page-view-content">
											 <div class="row-fluid build-text">
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#these-are-instructions-for-version-1-dot-1-of-the-kit" class="anchor-link"></a>These are instructions for version 1.1 of the kit!</h2>
If you are confused because your kit doesn't have a 74HAC125 in it, <a href="http://www.ladyada.net/make/waveshield/solder10.html">you probably want to read the v1.0 instructions</a>.<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#make-it" class="anchor-link"></a>Make it</h2>

 
 </div>
 <table class="build-table">
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-2" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text"><span>Get ready by placing the PCB in a vise.</span></p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-3" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><div class="text">We're going to the SD card first. While surface mount parts are a little tougher than thru-hole, this piece has pin spacing of 0.1" so it is quite easy. Doing it first also gives us lots of working room.
<p>
The holder should 'snap' perfectly into place thanks to two bumps on the bottom.</p></div></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-4" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><div class="text">We'll start with the four side tabs that are used to mechanically secure the card holder in place.
<p>
Heat up the metal tab and the pad (the silver square beneath it) for 3 seconds with a hot soldering iron, then poke just a bit of solder in.
</p><p>
Do this for all three corners. Once this is done you should not be able to lift the card holder</p></div></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-5" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><div class="text">Now go thru and solder the 8 leftmost pins that stick out from the holder. The three rightmost pins are thinner and closer together so they are tougher to solder. Luckily they are not used and you simply skip them (although the photo shows them done).
<p>
Check that you have no solder bridges - the pins should not be soldered to the metal body of the holder or to each other.</p></div></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-6" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><div class="text">Next, we will solder all of the many resistors. The 10K resistor <strong>R6</strong> is first.
<p>
Form them into staples (as shown left with a 100 ohm resistor), then place them so they sit flat against the PCB, in the correct locations. Resistors don't have <em>polarity</em> so they can go in 'either way' and work fine!
</p><p>
Once placed, bend the leads out so the resistors don't fall out.</p></div></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-7" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Solder the leads to the pads (metal ring) by heating both with the side-tip of the iron for 3 seconds and then poking in a bit of solder.</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-8" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Use your diagonal cutters to clip the leads off just above the solder joint.</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-9" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Finish up the resistors by placing <strong>R8</strong> (100Kohm), and <strong>R7</strong> (1.5K)</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-10" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Solder the components.</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-11" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><div class="text">Next is the 0.01uF ceramic capacitor <strong>C8</strong>. The tricky part here is that in older kits there are many 0.1uF ceramic capacitors in the kit that look identical to the 0.01uF!
<p>
The way to tell the difference is look for the <strong>103</strong> printed on it. If it says <strong>104</strong> then it's a 0.1uF. Make sure it says <strong>103</strong>! This capacitor forms the output low-pass filter for the audio so its important to have the right value.
</p><p>
Lately I have been shipping kits with <em>axial</em> (long-ways) package, not <em>radial</em> (side-ways) package. These are longer (see left) and are easy to bend over for soldering. This way there is less confusion. Either way, try to spot the <strong>103</strong> marking.</p></div></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-12" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><div class="text">Place the capacitor right next to R7.
<p>
Ceramic capacitors are non-polarized and can go in 'either way.'</p></div></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-13" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Solder and clip the small capacitor leads.</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-14" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><div class="text">Once you're sure you have <strong>C8</strong> correct, you can place the remaining 0.1uF ceramic capacitors <strong>C2, C3, C5, C6</strong> and <strong>C7</strong>.
<p>
Ceramic capacitors are non-polarized and can go in 'either way.'
</p><p>
Note carefully where C5 goes, it doesnt go below C1 but rather next to the 1.5K resistor</p></div></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-15" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text"><span>Solder and clip the capacitors.</span></p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-16" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><div class="text">Next is the DAC (digital-analog converter) <strong>IC2</strong>. This is what turns the data into music. Make sure you pick the DAC to solder in here, it says MCP4921 on it and has a stylized M.
<p>
The chip has a notch in one end and that notch must line up with the notch in the silkscreen. In this photo, thats on the left.</p></div></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-17" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Flip over the board and solder in each pin of the chip. The pins are already quite short so you dont have to clip them.</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-18" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><div class="text">Next is the operational-amplifier (op-amp) <strong>IC3</strong>. It is used to buffer and amplify the output, so that it can drive a small speaker or headphones.
<p>This chip may be labeled TS922 <b>or</b> TLV2462</p><p>
This is a similar-looking chip to the DAC. Again, check that the notch matches the silkscreen notch. In this photo, thats to the left.
</p><p>
Solder it in, just like you did with the DAC.</p></div></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-19" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Next is <strong>IC4</strong>, the buffer to talk to the SD card. Match up the notch just like you did with the smaller chips.</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-20" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Next is the 3.3V regulator <strong>IC1</strong> that provides a nice powersupply to run the SD card. The regulator comes in a semi-circular package, so make sure it matches up with the silkscreened image.</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-21" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Turn the board over and solder/clip the three leads.</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-22" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><div class="text">Next is the reset button and the ICSP header. These let you reset the Arduino manually, and reprogram it directly with a AVR programmer.
<p>
The button will snap in, its symmetric so it goes in 'either way'. The header is also symmetric, make sure the long end sticks up.</p></div></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-23" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text"><span>Solder in both components. Their leads are pretty short so you dont need to clip them.</span></p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-24" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><div class="text">Next are the three electrolytic capacitors <strong>C1 C4</strong> and <strong>C9</strong>.
<p>
Electrolytic capacitors are polarized so make sure they go in the right way! The long lead is the positive lead, make sure that goes into the hole marked with a + as shown here.</p></div></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-25" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Solder them in.</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-26" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text"><span>Next is the headphone jack. It snaps into place right at the edge of the PCB.</span></p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-27" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text"><span>Solder the jack in place. You'll want to clip the legs a little if you can, so that it will sit better on the Arduino.</span></p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-28" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Next is the volume potentiometer <strong>TM1</strong><span>. This is an audio-type 10K pot. It will slip into place pretty easily.</span>
</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-29" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text"><span>Solder all 5 pins of the potentiometer. Use plenty of solder so that it has a lot of mechanical strength.</span></p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-30" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Next, break the 36-pin header strip into smaller sections so that the shield can be placed on the Arduino. You can use pliers or diagonal cutters. Clip off 2-6pin and 2-8pin pieces.</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-31" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><div class="text">If you're using a Diecimila, Duemilanove, Uno or later Arduino, place the 6 and 8 pin headers into the female sockes.
<p>
If you have an NG Arduino, you can place a 3-pin female header (not included) as shown, which will let you use the reset button.</p></div></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-32" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text"><span>Place the shield PCB onto the arduino so that all the holes match up with the header.</span></p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-33" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Solder in each and every pin of header.</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-34" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text">Next you can install the thumbwheel. Use a #0 screwdriver. Align the thumbwheel so it 'grabs' the potentiometer, then gently screw it in place.</p></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-35" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-36" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><div class="text">Pins 13, 12 and 11 are used to talk to the SD card and cant be changed. The rest of the pins, however, are more flexible. Still, for all the examples on the site we'll be using this wiring, so it is suggested to just go with this.
<p>2 -&gt; LCS
<br>3 -&gt; CLK
<br>4 -&gt; DI
<br>5 -&gt; LAT
<br>10 -&gt; CCS
</p><p>You can use any sort of wire. Solder the jumper wires in place.</p></div></td>
 </tr>
 <tr class="build-row">
 <td class="side-images">
 <a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-37" class="anchor-link"></a>
 
 
 </td>
 <td class="side-text"><p class="text"><span>Hooray you are done! Now onto the user manual...</span></p></td>
 </tr>
 </table>

									</div>
									<div class="page-content all-page-view-content">
											 <div class="row-fluid build-text">
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#how-to-use-it" class="anchor-link"></a>How to use it</h2>
Once you've got your wave shield assembled and tested you can now customize it as desired, See the next 6 steps for instructions on 
<ol>
<li>Format an SD/MMC card</li>
<li>Convert audio files so they are suitable for playing</li>
<li>Check out documentation for WaveHC library</li>
<li>Check out walkthroughs for a digital audio player and 6-button audio player<with></with>
</li>
<li>Try out some of the example sketches.</li>
</ol>
 </div>

									</div>
									<div class="page-content all-page-view-content">
											 <div class="row-fluid build-text">
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#introduction" class="anchor-link"></a>Introduction</h2>
The wave shield uses SD/MMC cards. They are extraordinarily popular, sometimes even available in grocery stores! They are used in MP3 players, cameras, audio recorders, etc. You can use any card that can store 32 MB ore more. A 4 gigabyte card can hold 25 hours of uncompressed audio for the shield, and <a href="http://www.adafruit.com/products/102">costs $12</a>.
<p>
The shield kit doesn't come with an SD card but <a href="http://www.adafruit.com/products/102">we carry one in the shop that is guaranteed to work</a>. Pretty much any SD card should work but be aware that some cheap cards are 'fakes' and can cause headaches.
 </p></div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/4979">
 <img class="4979-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/979/medium800/adafruit_products_SD_Cards.jpg?1396818585" alt="adafruit_products_SD_Cards.jpg">

</a> </div>
 <p class="row-fluid build-text">
 <span>You'll also need a way to read and write from the SD card. Sometimes you can use your camera and MP3 player - when its plugged in you will be able to see it as a disk. Or you may need an SD card reader.</span>
 </p>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/4980">
 <img class="4980-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/980/medium800/adafruit_products_SADSDDR99A15.PNG.jpg?1396818594" alt="adafruit_products_SADSDDR99A15.PNG.jpg">

</a> </div>
 <div class="row-fluid build-text">
 These are very common, available in any computer store. The shield <strong>doesn't</strong> have the ability to display the SD card as a 'hard disk' like some MP3 players or games, the Arduino does not have the hardware for that, so you will need an external reader!
<p><strong>To use the SD card interface library you'll need a '328 Arduino</strong>. If you have an NG or '168 chipped Arduino <a href="http://www.adafruit.com/index.php?main_page=product_info&amp;cPath=17&amp;products_id=123">we suggest upgrading to a '328</a>. It's easy and inexpensive and you'll be very happy with the 2x RAM and Flash. All UNO's have Atmega328 chips.
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#formatting-under-windows-slash-mac" class="anchor-link"></a>Formatting under Windows/Mac</h2>
If you bought an SD card, chances are it's already pre-formatted with a FAT filesystem. However you may have problems with how the factory formats the card, or if it's an old cart it needs to be reformatted. The Arduino SD library we use supports both <strong>FAT16</strong> and <strong>FAT32</strong> filesystems. If you have a very small SD card, say 8-32 Megabytes you might find it is formatted <strong>FAT12</strong> which isn't supported. You'll have to reformat these card. Either way, it's always a good idea to format the card before using, even if it's new! Note that formatting will erase the card so save anything you want first.
 </div>
 <div class="row-fluid build-alert">
 <p class="alert">
 <i class="fa fa-exclamation-circle"></i>
 We strongly recommend you use the official SD card formatter utility - written by the SD association it solves many problems that come with bad formatting!
 </p>
 </div>
 
 <p class="row-fluid build-text">
 Download it and run it on your computer, there's also a manual linked from that page for use.
 </p>

									</div>
									<div class="page-content all-page-view-content">
											 <div class="row-fluid build-text">
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#intro" class="anchor-link"></a>Intro</h2>
The wave shield is designed to play a very specific type of audio. If your music sample is in MP3 format, or 44KHz wav, you'll want to convert it to the right format. This way you will get the best sounding audio.
 
 </div>
 <div class="row-fluid build-alert">
 <p class="alert">
 <i class="fa fa-exclamation-circle"></i>
 
 
 The Wave Shield does not support "long filenames" - so if you have a file called, say, "My favorite song.wav" it will show up as "MY FAV~1.WAV" in the shield, which can be confusing. To make your brain hurt a little less, rename your files to 8.3 all-caps format so for example, "My favorite song.wav" -&gt; "MYFAVSNG.WAV"
 
 </p>
 </div>
 <div class="row-fluid build-text">
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#check-the-file" class="anchor-link"></a>Check the file</h2>
If you have a wave file already, you should check to see if it's already in a proper format. That way you will save yourself some time! In windows, right-click on the file, and select<b> Properties</b> then click on the <b>Summary</b> tab.
 
 </div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/4998">
 <img class="4998-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/998/medium800/adafruit_products_wavpropcheck.gif?1448058617" alt="adafruit_products_wavpropcheck.gif">

</a> </div>
 <div class="row-fluid build-text">
 
 This file is 16KHz, 16-bit, mono PCM. Since thats below the maximum (22KHz, 16-bit, mono PCM) you are good to go. No need to convert the file.
<p>
OK lets say the file is an MP3 or 44KHz or stereo wave file. We will need to convert it down.
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#option-1-use-itunes" class="anchor-link"></a>Option 1. Use iTunes</h2>
You can do the conversion easily with iTunes (available for Mac/Windows) if you have your music in iTunes already this will be super fast to convert multiple files!
<p>
You'll have to set the preferences first, but you only have to do it once.
 
 </p></div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/4999">
 <img class="4999-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/004/999/medium800/adafruit_products_itunes-step1.png?1396819968" alt="adafruit_products_itunes-step1.png">

</a> </div>
 <p class="row-fluid build-text">
 
 Go to the <strong>Advanced-&gt;Importing</strong><span> tab. Make sure it is set to 22KHz (or less), 16bit (or less) and Mono channels. Click OK.</span>

 
 </p>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5000">
 <img class="5000-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/000/medium800/adafruit_products_itunes-step2.png?1396819980" alt="adafruit_products_itunes-step2.png">

</a> </div>
 <p class="row-fluid build-text">
 
 Next find the files you want to convert. Select <strong>Convert Selection to WAV</strong><span> from the menu.</span>

 
 </p>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5001">
 <img class="5001-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/001/medium800/adafruit_products_itunes-step3.png?1396819995" alt="adafruit_products_itunes-step3.png">

</a> </div>
 <p class="row-fluid build-text">
 
 <span>Then simply drag the sounds onto an SD card.</span>
 
 </p>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5002">
 <img class="5002-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/002/medium800/adafruit_products_itunes-step4.png?1396820012" alt="adafruit_products_itunes-step4.png">

</a> </div>
 <div class="row-fluid build-text">
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#option-2-use-sox" class="anchor-link"></a>Option 2. Use SoX</h2>
<a href="http://forums.adafruit.com/viewtopic.php?p=29636">Check out this tutorial</a> on using a command-line tool to quickly convert files.
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#option-3-use-audacity" class="anchor-link"></a>Option 3. Use Audacity</h2>
If you dont have or don't want to use iTunes you can convert files (one at a time) with Audacity.
<p>
This is pretty easy. You can use the free <a href="http://audacity.sourceforge.net/">Audacity software</a> - available for windows, linux or mac.
 
 </p></div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5003">
 <img class="5003-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/003/medium800/adafruit_products_Audacity-logo-r_50pct.jpg?1396820019" alt="adafruit_products_Audacity-logo-r_50pct.jpg">

</a> </div>
 <div class="row-fluid build-text">
 
 Grab it from the download page and install it on your computer
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-3-start-up-audacity-and-open-the-file" class="anchor-link"></a>Step 3. Start up Audacity and open the file</h2>
Start up Audacity

 
 </div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5004">
 <img class="5004-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/004/medium800/adafruit_products_audstart.gif?1448058602" alt="adafruit_products_audstart.gif">

</a> </div>
 <p class="row-fluid build-text">
 
 Select <strong>File-&gt;Open...</strong><span> and open the file. In my case its an MP3.</span>

 
 </p>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5005">
 <img class="5005-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/005/medium800/adafruit_products_audopenmp3.gif?1448058596" alt="adafruit_products_audopenmp3.gif">

</a> </div>
 <p class="row-fluid build-text">
 
 <span>Audacity will spend some time uncompressing and opening the file and then present you with something like this:</span>
 
 </p>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5006">
 <img class="5006-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/006/medium800/adafruit_products_openedmp3.gif?1448058590" alt="adafruit_products_openedmp3.gif">

</a> </div>
 <div class="row-fluid build-text">
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-4-split-and-mix-a-stereo-track" class="anchor-link"></a>Step 4. Split and Mix a stereo track</h2>
Next, if you have a stero track, you'll probably want to turn it into a mixed mono track. That way it will sound most like the original. Click on the title and select <strong>Split Stereo Track</strong>.
 
 </div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5007">
 <img class="5007-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/007/medium800/adafruit_products_audsplit.gif?1448058584" alt="adafruit_products_audsplit.gif">

</a> </div>
 <p class="row-fluid build-text">
 
 Next, when you mix a track you'll end up adding both of them together. This means that if both sides are loud, you'll get distortion. Reduce the gain on both tracks to -6dB.
 
 </p>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5008">
 <img class="5008-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/008/medium800/adafruit_products_audreducegain.gif?1448058579" alt="adafruit_products_audreducegain.gif">

</a> </div>
 <p class="row-fluid build-text">
 
 Then convert both tracks to <strong>Mono</strong><span> by clicking on each title. Make sure you do it for both tracks!</span>

 
 </p>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5009">
 <img class="5009-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/009/medium800/adafruit_products_audmono.gif?1448058574" alt="adafruit_products_audmono.gif">

</a> </div>
 <div class="row-fluid build-text">
 <p>Now to mix! From the menu select <strong>Project -&gt; Quick Mix</strong> (or in later versions its<strong> Track-&gt;Mix and Render</strong>)<strong><br></strong></p>
 </div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5010">
 <img class="5010-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/010/medium800/adafruit_products_audmix.gif?1448058569" alt="adafruit_products_audmix.gif">

</a> </div>
 <div class="row-fluid build-text">
 
 A few seconds later, you have converted your stereo track to mono!
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-5-convert-to-16-bit-audio" class="anchor-link"></a>Step 5. Convert to 16 bit audio</h2>
If your audio rate is higher than 16-bit, you will want to downconvert it. Click on the track title and select <strong>Set Sample Format -&gt; 16-bit</strong>

 
 </div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5017">
 <img class="5017-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/017/medium800/adafruit_products_aud16bit.gif?1448058564" alt="adafruit_products_aud16bit.gif">

</a> </div>
 <div class="row-fluid build-text">
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-6-convert-to-22-khz-or-less" class="anchor-link"></a>Step 6. Convert to 22-KHz or less</h2>
Finally, make sure the audio file will be saved as 22KHz. If the the track label says 44KHz you will want to convert it.<p>
At the bottom of the window there is a little button named <strong>Project rate</strong>: Make sure this is 22KHz or less.
 
 </p></div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5018">
 <img class="5018-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/018/medium800/adafruit_products_aud22khz.gif?1448058560" alt="adafruit_products_aud22khz.gif">

</a> </div>
 <div class="row-fluid build-text">
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-7-prepare-to-export" class="anchor-link"></a>Step 7. Prepare to export</h2>
Check the <strong>Preferences</strong> menu item and select the <strong>File Formats</strong> tab. Make sure the Uncompressed Export Format is WAV (Microsoft 16 bit PCM).
 
 </div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5020">
 <img class="5020-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/020/medium800/adafruit_products_audsaveformat.gif?1448058555" alt="adafruit_products_audsaveformat.gif">

</a> </div>
 <div class="row-fluid build-text">
 
 You only have to do this once!
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#step-8-export" class="anchor-link"></a>Step 8. Export!</h2>
Finally, you're ready to export the file. Select <strong>Export as WAV...</strong> from the pulldown

 
 </div>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5023">
 <img class="5023-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/023/medium800/adafruit_products_audexport.gif?1448058550" alt="adafruit_products_audexport.gif">

</a> </div>
 <p class="row-fluid build-text">
 
 <span>It may take a few seconds to convert and save the file.</span>
 
 </p>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5025">
 <img class="5025-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/025/medium800/adafruit_products_audexporting.gif?1448058545" alt="adafruit_products_audexporting.gif">

</a> </div>
 <p class="row-fluid build-text">
 
 <span>Finally, check the file Properties. It should be 16 bit, mono, 22KHz (or less) and PCM format.</span>
 
 </p>
 <div class="row-fluid build-image">
 <a href="https://learn.adafruit.com/assets/5027">
 <img class="5027-asset img-responsive" src="https://learn.adafruit.com/system/assets/assets/000/005/027/medium800/adafruit_products_checkexported.gif?1448058540" alt="adafruit_products_checkexported.gif">

</a> </div>
 <p class="row-fluid build-text">
 
 <span>OK! Now you can go to the next step, which is formatting an SD card and copying files over.</span>
 
 </p>

									</div>
									<div class="page-content all-page-view-content">
											 <div class="row-fluid build-text">
 <h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#get-more-ram-and-flash" class="anchor-link"></a>Get more RAM &amp; Flash!</h2>
<p>This library uses a lot of RAM, if you are using an older '168 or '8 Arduino, you must <a href="http://learn.adafruit.com/arduino-tips-tricks-and-techniques/upgrade">upgrade to an ATmega328</a>. The shield was designed with the expectation that this upgrade would be available. </p>
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#a-tour-of-dap-hc-dot-pde" class="anchor-link"></a>A tour of dap_hc.pde</h2>
<p>This is a tutorial of the <a href="https://github.com/adafruit/WaveHC">waveHC library</a> by going through dap_hc.pde </p><p> It's detailed and a little daunting. But stick with it since much of the code is going to be duplicated from this sketch to others! </p><p> Make sure you install the library by downloading it from the link above and sticking WaveHC folder in the <strong>libraries</strong> folder. The zip also contains <strong>dap_hc.pde</strong> </p><p><strong>Note</strong>: <em>The WaveHC library repository has an extra level of folders in it. To install the WaveHC library, you must first remove it from the top-level folder that you downloaded.</em></p><p> In case you need the sketch we're referring to here, it's at the bottom of the page. </p>
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#initialize-the-card" class="anchor-link"></a>Initialize the card</h2>
<p>The hard work of playing music is all done right on the Arduino. This lets us skip having an MP3 decoder or other dedicated chip. That means more control and flexibility, but more firmware! Lets take a tour through the canonical sketch "dapHC.pde" this is a Digital Audio Player (dap) sketch using the Wave HC librarry. We used to use the Adafruit AF_Wave library but Mr. Fat16 did a fantastic job rewriting our code and making it faster, smaller and better. So we're going to use his library in this tutorial! </p><p> Download the dapHC.pde sketch and read along! The first thing we need are some objects. The tough part is talking to the card. All cards are manufactured and formatted a little different. And the formatting has many layers - the card format - the partition format and the filesystem formatting. At the beginning of the sketch we have the #include to get the library header files in and an object for storing information about the card <strong>card</strong>, partition volume <strong>vol</strong> and filesystem <strong>root</strong>. We also have a directory buffer, for information on any folder/directories and an object for storing information about a single wave file <strong>wave</strong>. </p><p> These are all pretty much manditory unless perhaps you dont want directory traversal in which case you can probably skip <strong>dirBuf</strong>.</p>
 </div>
 <div class="build-code">
 
 <pre class="code-text-only">#include "WaveUtil.h"
#include "WaveHC.h"


SdReader card; // This object holds the information for the card
FatVolume vol; // This holds the information for the partition on the card
FatReader root; // This holds the information for the filesystem on the card

uint8_t dirLevel; // indent level for file/dir names (for prettyprinting)
dir_t dirBuf; // buffer for directory reads

WaveHC wave; // This is the only wave (audio) object, since we will only play one at a time
</pre>
 <pre class="prettyprint linenums">#include "WaveUtil.h"
#include "WaveHC.h"


SdReader card; // This object holds the information for the card
FatVolume vol; // This holds the information for the partition on the card
FatReader root; // This holds the information for the filesystem on the card

uint8_t dirLevel; // indent level for file/dir names (for prettyprinting)
dir_t dirBuf; // buffer for directory reads

WaveHC wave; // This is the only wave (audio) object, since we will only play one at a time
</pre>
 </div>
 <div class="row-fluid build-text">
 
 
 
 First thing that must be done is initializing the SD card for reading. This is a multistep process. In the setup loop you can see the multiple checks we do as we proceed through the initialization process.
<p>
Here are the steps:
</p><ol>
<li>
<strong>Wake up and print</strong> out the to Serial Monitor that we're running. (<strong>OPTIONAL</strong>)</li>
<li>
<strong>Check how much free RAM we have</strong> after we have used the buffer for storing Wave audio data, make sure its more than 100 bytes and keep an eye on it as you modify your code. This test can be removed, it's for your use. (<strong>OPTIONAL</strong>)</li>
<li>
<strong>Set the pin modes for the DAC</strong> control lines. These should not be changed unless you've modified them in the library as well. It's probably best to keep them as-is.</li>
<li>
<strong>Initialize the SD card</strong> and see if it responds. We try to talk to it at 8MHz. If you have a waveshield 1.0 you may need to use 4MHz mode so comment out one line and uncommment the other to swap which method is used. If the card fails to initialize, print out an error and halt.</li>
<li>
<strong>Allow partial block reads</strong>. Some SD cards don't like this so if you're having problems, comment this out first! (<strong>OPTIONAL</strong>)</li>
<li>
<strong>Try to find a FAT partition</strong> in the first 5 slots. You did format the card to FAT format, right? If it can't find a FAT partition it will print out that it failed, so make sure you format it again if it's giving you trouble.</li>
<li>
<strong>Print out what kind of FAT</strong> partition was found. (<strong>OPTIONAL</strong>)</li>
<li>
<strong>Try to open up the root directory</strong>. If this doesnt work, something is messed up with the formatting. Try to format it again!</li>
<li>Finally, print out the files found, one after the other in the directories on the card. This is great for debugging and will show you what you've got on there. Since we don't have long filename access and use the 'base' 8.3 format to define files, you'll need to see what the files are named on the partition and this helps a lot. (<strong>OPTIONAL</strong>)</li>
</ol>
 
 </div>
 <div class="build-code">
 
 <pre class="code-text-only">void setup() {
 Serial.begin(9600); // set up Serial library at 9600 bps for debugging
 
 putstring_nl("\nWave test!"); // say we woke up!
 
 putstring("Free RAM: "); // This can help with debugging, running out of RAM is bad
 Serial.println(freeRam()); 
 
 // Set the output pins for the DAC control. This pins are defined in the library
 pinMode(2, OUTPUT);
 pinMode(3, OUTPUT);
 pinMode(4, OUTPUT);
 pinMode(5, OUTPUT);
 
 // if (!card.init(true)) { //play with 4 MHz spi if 8MHz isn't working for you
 if (!card.init()) { //play with 8 MHz spi (default faster!) 
 putstring_nl("Card init. failed!"); // Something went wrong, lets print out why
 sdErrorCheck();
 while(1); // then 'halt' - do nothing!
 }
 
 // enable optimize read - some cards may timeout. Disable if you're having problems
 card.partialBlockRead(true);
 
 // Now we will look for a FAT partition!
 uint8_t part;
 for (part = 0; part &lt; 5; part++) { // we have up to 5 slots to look in
 if (vol.init(card, part)) 
 break; // we found one, lets bail
 }
 if (part == 5) { // if we ended up not finding one :(
 putstring_nl("No valid FAT partition!");
 sdErrorCheck(); // Something went wrong, lets print out why
 while(1); // then 'halt' - do nothing!
 }
 
 // Lets tell the user about what we found
 putstring("Using partition ");
 Serial.print(part, DEC);
 putstring(", type is FAT");
 Serial.println(vol.fatType(),DEC); // FAT16 or FAT32?
 
 // Try to open the root directory
 if (!root.openRoot(vol)) {
 putstring_nl("Can't open root dir!"); // Something went wrong,
 while(1); // then 'halt' - do nothing!
 }
 
 // Whew! We got past the tough parts.
 putstring_nl("Files found:");
 dirLevel = 0;
 // Print out all of the files in all the directories.
 lsR(root);
}</pre>
 <pre class="prettyprint linenums">void setup() {
 Serial.begin(9600); // set up Serial library at 9600 bps for debugging
 
 putstring_nl("\nWave test!"); // say we woke up!
 
 putstring("Free RAM: "); // This can help with debugging, running out of RAM is bad
 Serial.println(freeRam()); 
 
 // Set the output pins for the DAC control. This pins are defined in the library
 pinMode(2, OUTPUT);
 pinMode(3, OUTPUT);
 pinMode(4, OUTPUT);
 pinMode(5, OUTPUT);
 
 // if (!card.init(true)) { //play with 4 MHz spi if 8MHz isn't working for you
 if (!card.init()) { //play with 8 MHz spi (default faster!) 
 putstring_nl("Card init. failed!"); // Something went wrong, lets print out why
 sdErrorCheck();
 while(1); // then 'halt' - do nothing!
 }
 
 // enable optimize read - some cards may timeout. Disable if you're having problems
 card.partialBlockRead(true);
 
 // Now we will look for a FAT partition!
 uint8_t part;
 for (part = 0; part &lt; 5; part++) { // we have up to 5 slots to look in
 if (vol.init(card, part)) 
 break; // we found one, lets bail
 }
 if (part == 5) { // if we ended up not finding one :(
 putstring_nl("No valid FAT partition!");
 sdErrorCheck(); // Something went wrong, lets print out why
 while(1); // then 'halt' - do nothing!
 }
 
 // Lets tell the user about what we found
 putstring("Using partition ");
 Serial.print(part, DEC);
 putstring(", type is FAT");
 Serial.println(vol.fatType(),DEC); // FAT16 or FAT32?
 
 // Try to open the root directory
 if (!root.openRoot(vol)) {
 putstring_nl("Can't open root dir!"); // Something went wrong,
 while(1); // then 'halt' - do nothing!
 }
 
 // Whew! We got past the tough parts.
 putstring_nl("Files found:");
 dirLevel = 0;
 // Print out all of the files in all the directories.
 lsR(root);
}</pre>
 </div>
 <div class="row-fluid build-text">
 
 
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#looking-for-files-in-a-directory" class="anchor-link"></a>Looking for files in a directory</h2>
OK now that you've initialized the card, we perform a recursive list of all files found. This is useful for debugging and ALSO shows how you can navigate the file system.
<p>
To start, pass a directory object (like <strong>root</strong>) to <strong>lsR</strong>() which will do the following:
</p><ol>
<li>Read a file from the directory. The files are read in the order they are copied into the directory, <strong>not</strong> alphabetical order!</li>
<li>If the directories are the special links "." (current directory) or ".." (upper directory) it ignores them and goes to step 1 again.</li>
<li>It prints out spaces to create a nicely formatted output. Each level of directory gets 2 spaces.</li>
<li>It prints out the name of the file in 8.3 format.</li>
<li>If it is a subdirectory, it makes a new object and opens up the subdirectory. Then it prints out all of the files in that new directory.</li>
<li>It continues to step 1 until there are no more files to be read.</li>
</ol>
 
 </div>
 <div class="build-code">
 
 <pre class="code-text-only">/*
 articles _articles bin CAs devops Documents dotfiles gethtml go hnews jason js netdata start-thesrc thesrc ucii list recursively - possible stack overflow if subdirectories too nested
 */
void lsR(FatReader &amp;d)
{
 int8_t r; // indicates the level of recursion
 
 while ((r = d.readDir(dirBuf)) &gt; 0) { // read the next file in the directory 
 // skip subdirs . and ..
 if (dirBuf.name[0] == '.') 
 continue;
 
 for (uint8_t i = 0; i &lt; dirLevel; i++) 
 Serial.print(' '); // this is for prettyprinting, put spaces in front
 printEntryName(dirBuf); // print the name of the file we just found
 Serial.println(); // and a new line
 
 if (DIR_IS_SUBDIR(dirBuf)) { // we will recurse on any direcory
 FatReader s; // make a new directory object to hold information
 dirLevel += 2; // indent 2 spaces for future prints
 if (s.open(vol, dirBuf)) 
 lsR(s); // list all the files in this directory now!
 dirLevel -=2; // remove the extra indentation
 }
 }
 sdErrorCheck(); // are we doign OK?
}
</pre>
 <pre class="prettyprint linenums">/*
 articles _articles bin CAs devops Documents dotfiles gethtml go hnews jason js netdata start-thesrc thesrc ucii list recursively - possible stack overflow if subdirectories too nested
 */
void lsR(FatReader &amp;d)
{
 int8_t r; // indicates the level of recursion
 
 while ((r = d.readDir(dirBuf)) &gt; 0) { // read the next file in the directory 
 // skip subdirs . and ..
 if (dirBuf.name[0] == '.') 
 continue;
 
 for (uint8_t i = 0; i &lt; dirLevel; i++) 
 Serial.print(' '); // this is for prettyprinting, put spaces in front
 printEntryName(dirBuf); // print the name of the file we just found
 Serial.println(); // and a new line
 
 if (DIR_IS_SUBDIR(dirBuf)) { // we will recurse on any direcory
 FatReader s; // make a new directory object to hold information
 dirLevel += 2; // indent 2 spaces for future prints
 if (s.open(vol, dirBuf)) 
 lsR(s); // list all the files in this directory now!
 dirLevel -=2; // remove the extra indentation
 }
 }
 sdErrorCheck(); // are we doign OK?
}
</pre>
 </div>
 <p class="row-fluid build-text">
 
 
 
 There is also a helper called <strong>printEntryName</strong> which prints out the file in a nice format. Files are named in <strong>8.3</strong> format, an older and simpler way of addressing files. It's a little less pretty than "Long Name Format" so watch out to see what your files are renamed as. For example "Bird song.wav" may be renamed to "BIRDSONG.WAV" or "BIRDSO~1.WAV" !
 
 
 
 </p>
 <div class="build-code">
 
 <pre class="code-text-only">/*
 articles _articles bin CAs devops Documents dotfiles gethtml go hnews jason js netdata start-thesrc thesrc ucii print dir_t name field. The output is 8.3 format, so like SOUND.WAV or FILENAME.DAT
 */
void printEntryName(dir_t &amp;dir)
{
 for (uint8_t i = 0; i &lt; 11; i++) { // 8.3 format has 8+3 = 11 letters in it
 if (dir.name[i] == ' ')
 continue; // dont print any spaces in the name
 if (i == 8) 
 Serial.print('.'); // after the 8th letter, place a dot
 Serial.print(dir.name[i]); // print the n'th digit
 }
 if (DIR_IS_SUBDIR(dir)) 
 Serial.print('/'); // directories get a / at the end
}</pre>
 <pre class="prettyprint linenums">/*
 articles _articles bin CAs devops Documents dotfiles gethtml go hnews jason js netdata start-thesrc thesrc ucii print dir_t name field. The output is 8.3 format, so like SOUND.WAV or FILENAME.DAT
 */
void printEntryName(dir_t &amp;dir)
{
 for (uint8_t i = 0; i &lt; 11; i++) { // 8.3 format has 8+3 = 11 letters in it
 if (dir.name[i] == ' ')
 continue; // dont print any spaces in the name
 if (i == 8) 
 Serial.print('.'); // after the 8th letter, place a dot
 Serial.print(dir.name[i]); // print the n'th digit
 }
 if (DIR_IS_SUBDIR(dir)) 
 Serial.print('/'); // directories get a / at the end
}</pre>
 </div>
 <div class="row-fluid build-text">
 
 
 
 One thing that appears in <strong>loop</strong>() is <strong>dir.rewind</strong>(). The reason we rewind a directory is that our Arduino code is very simple. It can go through the files in a directory but only 'forward', not backward (FAT format is kinda like that). So if you skipped a file and want to go back, or you've gone through the directory, you will need to call <strong>rewind</strong>() to set it back to the beginning!
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#playing-all-the-files" class="anchor-link"></a>Playing all the files</h2>
The digital audio player plays all files in the card. To do that it recursively looks in every directory, just like <strong>lsR</strong>() above so the code looks somewhat similar. The big difference is we call the <strong>play</strong>() routine to play a file!
<p>
To start, pass a directory object (like <strong>root</strong>) to <strong>lsR</strong>() which will do the following:
</p><ol>
<li>Read a file from the directory. The files are read in the order they are copied into the directory, <strong>not</strong> alphabetical order!</li>
<li>If the directories are the special links "." (current directory) or ".." (upper directory) it ignores them and goes to step 1 again.</li>
<li>It prints out spaces to create a nicely formatted output. Each level of directory gets 2 spaces.</li>
<li>It prints out the name of the file in 8.3 format.</li>
<li>If it is a subdirectory, it makes a new object and opens up the subdirectory. Then it plays all of the wave files in that new directory.</li>
<li>If it isn't a subdirectory, it will try to play the file by opening it as a Wave object. That requires looking through the file and trying to find a Wave header, etc. If it doesn't succeed it will print out that it's not valid and skip to the next file.</li>
<li>If the wave file is valid, it will finally start the file by calling <strong>play</strong>() on the Wave object.</li>
<li>While the wave sound file is playing, it prints out a dot every 100 ms or so.</li>
<li>It continues to step 1 until there are no more files to be read.</li>
</ol>
 
 </div>
 <div class="build-code">
 
 <pre class="code-text-only">/*
 articles _articles bin CAs devops Documents dotfiles gethtml go hnews jason js netdata start-thesrc thesrc ucii play recursively - possible stack overflow if subdirectories too nested
 */
void play(FatReader &amp;dir)
{
 FatReader file;
 while (dir.readDir(dirBuf) &gt; 0) { // Read every file in the directory one at a time
 // skip . and .. directories
 if (dirBuf.name[0] == '.') 
 continue;
 
 Serial.println(); // clear out a new line
 
 for (uint8_t i = 0; i &lt; dirLevel; i++) 
 Serial.print(' '); // this is for prettyprinting, put spaces in front

 if (!file.open(vol, dirBuf)) { // open the file in the directory
 Serial.println("file.open failed"); // something went wrong :(
 while(1); // halt
 }
 
 if (file.isDir()) { // check if we opened a new directory
 putstring("Subdir: ");
 printEntryName(dirBuf);
 dirLevel += 2; // add more spaces
 // play files in subdirectory
 play(file); // recursive!
 dirLevel -= 2; 
 }
 else {
 // Aha! we found a file that isnt a directory
 putstring("Playing "); printEntryName(dirBuf); // print it out
 if (!wave.create(file)) { // Figure out, is it a WAV proper?
 putstring(" Not a valid WAV"); // ok skip it
 } else {
 Serial.println(); // Hooray it IS a WAV proper!
 wave.play(); // make some noise!
 
 while (wave.isplaying) { // playing occurs in interrupts, so we print dots in realtime
 putstring(".");
 delay(100);
 }
 sdErrorCheck(); // everything OK?
// if (wave.errors)Serial.println(wave.errors); // wave decoding errors
 }
 }
 }
}
</pre>
 <pre class="prettyprint linenums">/*
 articles _articles bin CAs devops Documents dotfiles gethtml go hnews jason js netdata start-thesrc thesrc ucii play recursively - possible stack overflow if subdirectories too nested
 */
void play(FatReader &amp;dir)
{
 FatReader file;
 while (dir.readDir(dirBuf) &gt; 0) { // Read every file in the directory one at a time
 // skip . and .. directories
 if (dirBuf.name[0] == '.') 
 continue;
 
 Serial.println(); // clear out a new line
 
 for (uint8_t i = 0; i &lt; dirLevel; i++) 
 Serial.print(' '); // this is for prettyprinting, put spaces in front

 if (!file.open(vol, dirBuf)) { // open the file in the directory
 Serial.println("file.open failed"); // something went wrong :(
 while(1); // halt
 }
 
 if (file.isDir()) { // check if we opened a new directory
 putstring("Subdir: ");
 printEntryName(dirBuf);
 dirLevel += 2; // add more spaces
 // play files in subdirectory
 play(file); // recursive!
 dirLevel -= 2; 
 }
 else {
 // Aha! we found a file that isnt a directory
 putstring("Playing "); printEntryName(dirBuf); // print it out
 if (!wave.create(file)) { // Figure out, is it a WAV proper?
 putstring(" Not a valid WAV"); // ok skip it
 } else {
 Serial.println(); // Hooray it IS a WAV proper!
 wave.play(); // make some noise!
 
 while (wave.isplaying) { // playing occurs in interrupts, so we print dots in realtime
 putstring(".");
 delay(100);
 }
 sdErrorCheck(); // everything OK?
// if (wave.errors)Serial.println(wave.errors); // wave decoding errors
 }
 }
 }
}
</pre>
 </div>
 

									</div>
									<div class="page-content all-page-view-content">
											 <div class="row-fluid build-text">
 <h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#get-more-ram-and-flash" class="anchor-link"></a>Get more RAM &amp; Flash!</h2>
<p>Before you try to play audio, you'll want to free up some Arduino RAM, so that you don't end up with a nasty stack-overflow. Running out of RAM is hard to debug and frustrating, and likely if you're using a '168. </p><p><a href="http://learn.adafruit.com/arduino-tips-tricks-and-techniques/arduino-hacks">Follow these instructions</a> on how to get more RAM by reducing the input Serial library buffer. You don't need to do this if you're using an <a href="http://learn.adafruit.com/arduino-tips-tricks-and-techniques/upgrade">ATmega328</a>. </p><p> Note that the library is pretty big (about 10K) so if you want to do a lot more, I suggest <a title="Link: http://learn.adafruit.com/arduino-tips-tricks-and-techniques/upgrade" href="http://learn.adafruit.com/arduino-tips-tricks-and-techniques/upgrade">upgrading to an ATmega328</a>. The shield was designed with the expectation that this upgrade would be available. </p>
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#a-tour-of-play6-hc-dot-pde" class="anchor-link"></a>A tour of play6_hc.pde</h2>
<p>This is a tutorial of the <a title="Link: https://code.google.com/p/wavehc/" href="https://github.com/adafruit/WaveHC">waveHC library</a>. </p><p> It's detailed and a little daunting. But stick with it since much of the code is going to be duplicated from this sketch to others! </p><p> Make sure you install the library by downloading it from the link above and sticking WaveHC folder in the <strong>libraries</strong> folder. </p><p> In case you need the sketch we're referring to here, it's at the bottom of the page. </p>
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#initialize-the-card" class="anchor-link"></a>Initialize the card</h2>
<p>The hard work of playing music is all done right on the Arduino. This lets us skip having an MP3 decoder or other dedicated chip. That means more control and flexibility, but more firmware! Lets take a tour through the canonical sketch "dapHC.pde" this is a Digital Audio Player (dap) sketch using the Wave HC librarry. We used to use the Adafruit AF_Wave library but Mr. Fat16 did a fantastic job rewriting our code and making it faster, smaller and better. So we're going to use his library in this tutorial :) </p><p> Download the dapHC.pde sketch and read along! The first thing we need are some objects. The tough part is talking to the card. All cards are manufactured and formatted a little different. And the formatting has many layers - the card format - the partition format and the filesystem formatting. At the beginning of the sketch we have the #include to get the library header files in and an object for storing information about the card <strong>card</strong>, partition volume <strong>vol</strong> and filesystem <strong>root</strong>. We also have an object for holding the current file information <strong>f</strong> and an object for storing information about a single wave file <strong>wave</strong>.</p>
 </div>
 <div class="build-code">
 
 <pre class="code-text-only">#include "WaveUtil.h"
#include "WaveHC.h"


SdReader card; // This object holds the information for the card
FatVolume vol; // This holds the information for the partition on the card
FatReader root; // This holds the information for the filesystem on the card
FatReader f; // This holds the information for the file we're playing


WaveHC wave; // This is the only wave (audio) object, since we will only play one at a time

#define DEBOUNCE 100 // button debouncer</pre>
 <pre class="prettyprint linenums">#include "WaveUtil.h"
#include "WaveHC.h"


SdReader card; // This object holds the information for the card
FatVolume vol; // This holds the information for the partition on the card
FatReader root; // This holds the information for the filesystem on the card
FatReader f; // This holds the information for the file we're playing


WaveHC wave; // This is the only wave (audio) object, since we will only play one at a time

#define DEBOUNCE 100 // button debouncer</pre>
 </div>
 <div class="row-fluid build-text">
 
 First thing that must be done is initializing the SD card for reading. This is a multistep process. In the setup loop you can see the multiple checks we do as we proceed through the initialization process.
<p>
Here are the steps:
</p><ol>
<li>
<strong>Wake up and print</strong> out the to Serial Monitor that we're running. (<strong>OPTIONAL</strong>)</li>
<li>
<strong>Check how much free RAM we have</strong> after we have used the buffer for storing Wave audio data, make sure it's more than 100 bytes and keep an eye on it as you modify your code. This test can be removed, it's for your use. (<strong>OPTIONAL</strong>)</li>
<li>
<strong>Set the pin modes for the DAC</strong> control lines. These should not be changed unless you've modified them in the library as well. It's probably best to keep them as-is.</li>
<li>
<strong>Initialize the SD card</strong> and see if it responds. We try to talk to it at 8MHz. If you have a waveshield 1.0 you may need to use 4MHz mode so comment out one line and uncommment the other to swap which method is used. If the card fails to initialize, print out an error and halt.</li>
<li>
<strong>Allow partial block reads</strong>. Some SD cards don't like this so if you're having problems, comment this out first! (<strong>OPTIONAL</strong>)</li>
<li>
<strong>Try to find a FAT partition</strong> in the first 5 slots. You did format the card to FAT format, right? If it can't find a FAT partition it will print out that it failed, so make sure you format it again if it's giving you trouble.</li>
<li>
<strong>Print out what kind of FAT</strong> partition was found. (<strong>OPTIONAL</strong>)</li>
<li>
<strong>Try to open up the root directory</strong>. If this doesn't work, something is messed up with the formatting. Try to format it again!</li>
</ol>
 
 </div>
 <div class="build-code">
 
 <pre class="code-text-only">void setup() {
 // set up serial port
 Serial.begin(9600);
 putstring_nl("WaveHC with 6 buttons");
 
 putstring("Free RAM: "); // This can help with debugging, running out of RAM is bad
 Serial.println(freeRam()); // if this is under 150 bytes it may spell trouble!
 
 // Set the output pins for the DAC control. This pins are defined in the library
 pinMode(2, OUTPUT);
 pinMode(3, OUTPUT);
 pinMode(4, OUTPUT);
 pinMode(5, OUTPUT);
 
 // pin13 LED
 pinMode(13, OUTPUT);
 
 // enable pull-up resistors on switch pins (analog inputs)
 digitalWrite(14, HIGH);
 digitalWrite(15, HIGH);
 digitalWrite(16, HIGH);
 digitalWrite(17, HIGH);
 digitalWrite(18, HIGH);
 digitalWrite(19, HIGH);
 
 // if (!card.init(true)) { //play with 4 MHz spi if 8MHz isn't working for you
 if (!card.init()) { //play with 8 MHz spi (default faster!) 
 putstring_nl("Card init. failed!"); // Something went wrong, lets print out why
 sdErrorCheck();
 while(1); // then 'halt' - do nothing!
 }
 
 // enable optimize read - some cards may timeout. Disable if you're having problems
 card.partialBlockRead(true);
 
// Now we will look for a FAT partition!
 uint8_t part;
 for (part = 0; part &lt; 5; part++) { // we have up to 5 slots to look in
 if (vol.init(card, part)) 
 break; // we found one, lets bail
 }
 if (part == 5) { // if we ended up not finding one :(
 putstring_nl("No valid FAT partition!");
 sdErrorCheck(); // Something went wrong, lets print out why
 while(1); // then 'halt' - do nothing!
 }
 
 // Lets tell the user about what we found
 putstring("Using partition ");
 Serial.print(part, DEC);
 putstring(", type is FAT");
 Serial.println(vol.fatType(),DEC); // FAT16 or FAT32?
 
 // Try to open the root directory
 if (!root.openRoot(vol)) {
 putstring_nl("Can't open root dir!"); // Something went wrong,
 while(1); // then 'halt' - do nothing!
 }
 
 // Whew! We got past the tough parts.
 putstring_nl("Ready!");
 dirLevel = 0;
}
</pre>
 <pre class="prettyprint linenums">void setup() {
 // set up serial port
 Serial.begin(9600);
 putstring_nl("WaveHC with 6 buttons");
 
 putstring("Free RAM: "); // This can help with debugging, running out of RAM is bad
 Serial.println(freeRam()); // if this is under 150 bytes it may spell trouble!
 
 // Set the output pins for the DAC control. This pins are defined in the library
 pinMode(2, OUTPUT);
 pinMode(3, OUTPUT);
 pinMode(4, OUTPUT);
 pinMode(5, OUTPUT);
 
 // pin13 LED
 pinMode(13, OUTPUT);
 
 // enable pull-up resistors on switch pins (analog inputs)
 digitalWrite(14, HIGH);
 digitalWrite(15, HIGH);
 digitalWrite(16, HIGH);
 digitalWrite(17, HIGH);
 digitalWrite(18, HIGH);
 digitalWrite(19, HIGH);
 
 // if (!card.init(true)) { //play with 4 MHz spi if 8MHz isn't working for you
 if (!card.init()) { //play with 8 MHz spi (default faster!) 
 putstring_nl("Card init. failed!"); // Something went wrong, lets print out why
 sdErrorCheck();
 while(1); // then 'halt' - do nothing!
 }
 
 // enable optimize read - some cards may timeout. Disable if you're having problems
 card.partialBlockRead(true);
 
// Now we will look for a FAT partition!
 uint8_t part;
 for (part = 0; part &lt; 5; part++) { // we have up to 5 slots to look in
 if (vol.init(card, part)) 
 break; // we found one, lets bail
 }
 if (part == 5) { // if we ended up not finding one :(
 putstring_nl("No valid FAT partition!");
 sdErrorCheck(); // Something went wrong, lets print out why
 while(1); // then 'halt' - do nothing!
 }
 
 // Lets tell the user about what we found
 putstring("Using partition ");
 Serial.print(part, DEC);
 putstring(", type is FAT");
 Serial.println(vol.fatType(),DEC); // FAT16 or FAT32?
 
 // Try to open the root directory
 if (!root.openRoot(vol)) {
 putstring_nl("Can't open root dir!"); // Something went wrong,
 while(1); // then 'halt' - do nothing!
 }
 
 // Whew! We got past the tough parts.
 putstring_nl("Ready!");
 dirLevel = 0;
}
</pre>
 </div>
 <div class="row-fluid build-text">
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#button-interfacing" class="anchor-link"></a>Button interfacing</h2>
We want to play a sound each time a button is pressed. We will use a function called check_switches() that goes through the 6 buttons (digital 14 through 20) to see if they have been pressed. If so, we play <strong>SOUND1.WAV</strong> (for example) completely through. The function that we call here that does the playing is called <strong>playcomplete</strong>() and we pass the name of the Wave file in quotes just like you see here.

 
 </div>
 <div class="build-code">
 
 <pre class="code-text-only">void loop() {
 //putstring("."); // uncomment this to see if the loop isnt running
 switch (check_switches()) {
 case 1:
 playcomplete("SOUND1.WAV");
 break;
 case 2:
 playcomplete("SOUND2.WAV");
 break;
 case 3:
 playcomplete("SOUND3.WAV");
 break;
 case 4:
 playcomplete("SOUND4.WAV");
 break;
 case 5:
 playcomplete("SOUND5.WAV");
 break;
 case 6:
 playcomplete("SOUND6.WAV");
 }
}

byte check_switches()
{
 static byte previous[6];
 static long time[6];
 byte reading;
 byte pressed;
 byte index;
 pressed = 0;

 for (byte index = 0; index &lt; 6; ++index) {
 reading = digitalRead(14 + index);
 if (reading == LOW &amp;&amp; previous[index] == HIGH &amp;&amp; millis() - time[index] &gt; DEBOUNCE)
 {
 // switch pressed
 time[index] = millis();
 pressed = index + 1;
 break;
 }
 previous[index] = reading;
 }
 // return switch number (1 - 6)
 return (pressed);
}
</pre>
 <pre class="prettyprint linenums">void loop() {
 //putstring("."); // uncomment this to see if the loop isnt running
 switch (check_switches()) {
 case 1:
 playcomplete("SOUND1.WAV");
 break;
 case 2:
 playcomplete("SOUND2.WAV");
 break;
 case 3:
 playcomplete("SOUND3.WAV");
 break;
 case 4:
 playcomplete("SOUND4.WAV");
 break;
 case 5:
 playcomplete("SOUND5.WAV");
 break;
 case 6:
 playcomplete("SOUND6.WAV");
 }
}

byte check_switches()
{
 static byte previous[6];
 static long time[6];
 byte reading;
 byte pressed;
 byte index;
 pressed = 0;

 for (byte index = 0; index &lt; 6; ++index) {
 reading = digitalRead(14 + index);
 if (reading == LOW &amp;&amp; previous[index] == HIGH &amp;&amp; millis() - time[index] &gt; DEBOUNCE)
 {
 // switch pressed
 time[index] = millis();
 pressed = index + 1;
 break;
 }
 previous[index] = reading;
 }
 // return switch number (1 - 6)
 return (pressed);
}
</pre>
 </div>
 <div class="row-fluid build-text">
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#playcomplete-and-playfile" class="anchor-link"></a>Playcomplete &amp; Playfile</h2>
Here is where we open the file and play it.
<p><strong>Playcomplete</strong> is very simple, it just calls a function that starts the audio playback and then sits in a loop doing nothing.
</p><p><strong>Playfile</strong> is the important function. It finds and opens the file and plays it.
</p><ol>
<li>It first sees if we're already playing any audio. If so, it stops it.</li>
<li>Now it opens the root directory and looks for the file by the name we requested. If it can't find it, the function returns.</li>
<li>If it finds it, it tries to turn it into a Wave file object, looking for the right header in the file. If not it also returns.</li>
<li>If it succeeds, it begins to play.</li>
</ol>
 
 </div>
 <div class="build-code">
 
 <pre class="code-text-only">// Plays a full file from beginning to end with no pause.
void playcomplete(char *name) {
 // call our helper to find and play this name
 playfile(name);
 while (wave.isplaying) {
 // do nothing while its playing
 }
 // now its done playing
}

void playfile(char *name) {
 // see if the wave object is currently doing something
 if (wave.isplaying) {// already playing something, so stop it!
 wave.stop(); // stop it
 }
 // look in the root directory and open the file
 if (!f.open(root, name)) {
 putstring("Couldn't open file "); Serial.print(name); return;
 }
 // OK read the file and turn it into a wave object
 if (!wave.create(f)) {
 putstring_nl("Not a valid WAV"); return;
 }
 
 // ok time to play! start playback
 wave.play();
}
</pre>
 <pre class="prettyprint linenums">// Plays a full file from beginning to end with no pause.
void playcomplete(char *name) {
 // call our helper to find and play this name
 playfile(name);
 while (wave.isplaying) {
 // do nothing while its playing
 }
 // now its done playing
}

void playfile(char *name) {
 // see if the wave object is currently doing something
 if (wave.isplaying) {// already playing something, so stop it!
 wave.stop(); // stop it
 }
 // look in the root directory and open the file
 if (!f.open(root, name)) {
 putstring("Couldn't open file "); Serial.print(name); return;
 }
 // OK read the file and turn it into a wave object
 if (!wave.create(f)) {
 putstring_nl("Not a valid WAV"); return;
 }
 
 // ok time to play! start playback
 wave.play();
}
</pre>
 </div>
 
 <div class="build-code">
 
 <pre class="code-text-only">#include &lt;FatReader.h&gt;
#include &lt;SdReader.h&gt;
#include &lt;avr/pgmspace.h&gt;
#include "WaveUtil.h"
#include "WaveHC.h"


SdReader card; // This object holds the information for the card
FatVolume vol; // This holds the information for the partition on the card
FatReader root; // This holds the information for the filesystem on the card
FatReader f; // This holds the information for the file we're play

WaveHC wave; // This is the only wave (audio) object, since we will only play one at a time

#define DEBOUNCE 100 // button debouncer

// this handy function will return the number of bytes currently free in RAM, great for debugging! 
int freeRam(void)
{
 extern int __bss_end; 
 extern int *__brkval; 
 int free_memory; 
 if((int)__brkval == 0) {
 free_memory = ((int)&amp;free_memory) - ((int)&amp;__bss_end); 
 }
 else {
 free_memory = ((int)&amp;free_memory) - ((int)__brkval); 
 }
 return free_memory; 
} 

void sdErrorCheck(void)
{
 if (!card.errorCode()) return;
 putstring("\n\rSD I/O error: ");
 Serial.print(card.errorCode(), HEX);
 putstring(", ");
 Serial.println(card.errorData(), HEX);
 while(1);
}

void setup() {
 // set up serial port
 Serial.begin(9600);
 putstring_nl("WaveHC with 6 buttons");
 
 putstring("Free RAM: "); // This can help with debugging, running out of RAM is bad
 Serial.println(freeRam()); // if this is under 150 bytes it may spell trouble!
 
 // Set the output pins for the DAC control. This pins are defined in the library
 pinMode(2, OUTPUT);
 pinMode(3, OUTPUT);
 pinMode(4, OUTPUT);
 pinMode(5, OUTPUT);
 
 // pin13 LED
 pinMode(13, OUTPUT);
 
 // enable pull-up resistors on switch pins (analog inputs)
 digitalWrite(14, HIGH);
 digitalWrite(15, HIGH);
 digitalWrite(16, HIGH);
 digitalWrite(17, HIGH);
 digitalWrite(18, HIGH);
 digitalWrite(19, HIGH);
 
 // if (!card.init(true)) { //play with 4 MHz spi if 8MHz isn't working for you
 if (!card.init()) { //play with 8 MHz spi (default faster!) 
 putstring_nl("Card init. failed!"); // Something went wrong, lets print out why
 sdErrorCheck();
 while(1); // then 'halt' - do nothing!
 }
 
 // enable optimize read - some cards may timeout. Disable if you're having problems
 card.partialBlockRead(true);
 
// Now we will look for a FAT partition!
 uint8_t part;
 for (part = 0; part &lt; 5; part++) { // we have up to 5 slots to look in
 if (vol.init(card, part)) 
 break; // we found one, lets bail
 }
 if (part == 5) { // if we ended up not finding one :(
 putstring_nl("No valid FAT partition!");
 sdErrorCheck(); // Something went wrong, lets print out why
 while(1); // then 'halt' - do nothing!
 }
 
 // Lets tell the user about what we found
 putstring("Using partition ");
 Serial.print(part, DEC);
 putstring(", type is FAT");
 Serial.println(vol.fatType(),DEC); // FAT16 or FAT32?
 
 // Try to open the root directory
 if (!root.openRoot(vol)) {
 putstring_nl("Can't open root dir!"); // Something went wrong,
 while(1); // then 'halt' - do nothing!
 }
 
 // Whew! We got past the tough parts.
 putstring_nl("Ready!");
}

void loop() {
 //putstring("."); // uncomment this to see if the loop isnt running
 switch (check_switches()) {
 case 1:
 playcomplete("SOUND1.WAV");
 break;
 case 2:
 playcomplete("SOUND2.WAV");
 break;
 case 3:
 playcomplete("SOUND3.WAV");
 break;
 case 4:
 playcomplete("SOUND4.WAV");
 break;
 case 5:
 playcomplete("SOUND5.WAV");
 break;
 case 6:
 playcomplete("SOUND6.WAV");
 }
}

byte check_switches()
{
 static byte previous[6];
 static long time[6];
 byte reading;
 byte pressed;
 byte index;
 pressed = 0;

 for (byte index = 0; index &lt; 6; ++index) {
 reading = digitalRead(14 + index);
 if (reading == LOW &amp;&amp; previous[index] == HIGH &amp;&amp; millis() - time[index] &gt; DEBOUNCE)
 {
 // switch pressed
 time[index] = millis();
 pressed = index + 1;
 break;
 }
 previous[index] = reading;
 }
 // return switch number (1 - 6)
 return (pressed);
}


// Plays a full file from beginning to end with no pause.
void playcomplete(char *name) {
 // call our helper to find and play this name
 playfile(name);
 while (wave.isplaying) {
 // do nothing while its playing
 }
 // now its done playing
}

void playfile(char *name) {
 // see if the wave object is currently doing something
 if (wave.isplaying) {// already playing something, so stop it!
 wave.stop(); // stop it
 }
 // look in the root directory and open the file
 if (!f.open(root, name)) {
 putstring("Couldn't open file "); Serial.print(name); return;
 }
 // OK read the file and turn it into a wave object
 if (!wave.create(f)) {
 putstring_nl("Not a valid WAV"); return;
 }
 
 // ok time to play! start playback
 wave.play();
}</pre>
 <pre class="prettyprint linenums">#include &lt;FatReader.h&gt;
#include &lt;SdReader.h&gt;
#include &lt;avr/pgmspace.h&gt;
#include "WaveUtil.h"
#include "WaveHC.h"


SdReader card; // This object holds the information for the card
FatVolume vol; // This holds the information for the partition on the card
FatReader root; // This holds the information for the filesystem on the card
FatReader f; // This holds the information for the file we're play

WaveHC wave; // This is the only wave (audio) object, since we will only play one at a time

#define DEBOUNCE 100 // button debouncer

// this handy function will return the number of bytes currently free in RAM, great for debugging! 
int freeRam(void)
{
 extern int __bss_end; 
 extern int *__brkval; 
 int free_memory; 
 if((int)__brkval == 0) {
 free_memory = ((int)&amp;free_memory) - ((int)&amp;__bss_end); 
 }
 else {
 free_memory = ((int)&amp;free_memory) - ((int)__brkval); 
 }
 return free_memory; 
} 

void sdErrorCheck(void)
{
 if (!card.errorCode()) return;
 putstring("\n\rSD I/O error: ");
 Serial.print(card.errorCode(), HEX);
 putstring(", ");
 Serial.println(card.errorData(), HEX);
 while(1);
}

void setup() {
 // set up serial port
 Serial.begin(9600);
 putstring_nl("WaveHC with 6 buttons");
 
 putstring("Free RAM: "); // This can help with debugging, running out of RAM is bad
 Serial.println(freeRam()); // if this is under 150 bytes it may spell trouble!
 
 // Set the output pins for the DAC control. This pins are defined in the library
 pinMode(2, OUTPUT);
 pinMode(3, OUTPUT);
 pinMode(4, OUTPUT);
 pinMode(5, OUTPUT);
 
 // pin13 LED
 pinMode(13, OUTPUT);
 
 // enable pull-up resistors on switch pins (analog inputs)
 digitalWrite(14, HIGH);
 digitalWrite(15, HIGH);
 digitalWrite(16, HIGH);
 digitalWrite(17, HIGH);
 digitalWrite(18, HIGH);
 digitalWrite(19, HIGH);
 
 // if (!card.init(true)) { //play with 4 MHz spi if 8MHz isn't working for you
 if (!card.init()) { //play with 8 MHz spi (default faster!) 
 putstring_nl("Card init. failed!"); // Something went wrong, lets print out why
 sdErrorCheck();
 while(1); // then 'halt' - do nothing!
 }
 
 // enable optimize read - some cards may timeout. Disable if you're having problems
 card.partialBlockRead(true);
 
// Now we will look for a FAT partition!
 uint8_t part;
 for (part = 0; part &lt; 5; part++) { // we have up to 5 slots to look in
 if (vol.init(card, part)) 
 break; // we found one, lets bail
 }
 if (part == 5) { // if we ended up not finding one :(
 putstring_nl("No valid FAT partition!");
 sdErrorCheck(); // Something went wrong, lets print out why
 while(1); // then 'halt' - do nothing!
 }
 
 // Lets tell the user about what we found
 putstring("Using partition ");
 Serial.print(part, DEC);
 putstring(", type is FAT");
 Serial.println(vol.fatType(),DEC); // FAT16 or FAT32?
 
 // Try to open the root directory
 if (!root.openRoot(vol)) {
 putstring_nl("Can't open root dir!"); // Something went wrong,
 while(1); // then 'halt' - do nothing!
 }
 
 // Whew! We got past the tough parts.
 putstring_nl("Ready!");
}

void loop() {
 //putstring("."); // uncomment this to see if the loop isnt running
 switch (check_switches()) {
 case 1:
 playcomplete("SOUND1.WAV");
 break;
 case 2:
 playcomplete("SOUND2.WAV");
 break;
 case 3:
 playcomplete("SOUND3.WAV");
 break;
 case 4:
 playcomplete("SOUND4.WAV");
 break;
 case 5:
 playcomplete("SOUND5.WAV");
 break;
 case 6:
 playcomplete("SOUND6.WAV");
 }
}

byte check_switches()
{
 static byte previous[6];
 static long time[6];
 byte reading;
 byte pressed;
 byte index;
 pressed = 0;

 for (byte index = 0; index &lt; 6; ++index) {
 reading = digitalRead(14 + index);
 if (reading == LOW &amp;&amp; previous[index] == HIGH &amp;&amp; millis() - time[index] &gt; DEBOUNCE)
 {
 // switch pressed
 time[index] = millis();
 pressed = index + 1;
 break;
 }
 previous[index] = reading;
 }
 // return switch number (1 - 6)
 return (pressed);
}


// Plays a full file from beginning to end with no pause.
void playcomplete(char *name) {
 // call our helper to find and play this name
 playfile(name);
 while (wave.isplaying) {
 // do nothing while its playing
 }
 // now its done playing
}

void playfile(char *name) {
 // see if the wave object is currently doing something
 if (wave.isplaying) {// already playing something, so stop it!
 wave.stop(); // stop it
 }
 // look in the root directory and open the file
 if (!f.open(root, name)) {
 putstring("Couldn't open file "); Serial.print(name); return;
 }
 // OK read the file and turn it into a wave object
 if (!wave.create(f)) {
 putstring_nl("Not a valid WAV"); return;
 }
 
 // ok time to play! start playback
 wave.play();
}</pre>
 </div>

									</div>
									<div class="page-content all-page-view-content">
											 <div class="row-fluid build-text">
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#discontinued" class="anchor-link"></a>DISCONTINUED!</h2>This documentation is for historical reference only!<br>
 
 </div>
 <div class="row-fluid build-alert">
 <p class="alert">
 <i class="fa fa-exclamation-circle"></i>
 
 
 AF_Wave is no longer supported or used, it does not work with the SDHC SD Cards, so we put it to pasture. Please use the superior WaveHC instead!
 
 </p>
 </div>
 <div class="row-fluid build-text">
 <h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#get-more-ram-and-flash" class="anchor-link"></a>Get more RAM &amp; Flash!</h2>
Before you try to play audio, you'll want to free up some Arduino RAM, so that you don't end up with a nasty stack-overflow.
<p><a href="http://learn.adafruit.com/arduino-tips-tricks-and-techniques/arduino-hacks">Follow these instructions</a> on how to get more RAM by reducing the input Serial library buffer. You dont need to do this if you're using an <a href="http://learn.adafruit.com/arduino-tips-tricks-and-techniques/upgrade">ATmega328</a>.
</p><p>
Note that the library is pretty big (about 10K) so if you want to do a lot more, I suggest <a href="http://learn.adafruit.com/arduino-tips-tricks-and-techniques/upgrade">upgrading to an ATmega328</a>. The shield was designed with the expectation that this part would be available.
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#a-tour-of-the-af-wave-library" class="anchor-link"></a>A tour of the AF_Wave library</h2>
This is a description of the AF_Wave library, which is the 'default' library for the Wave shield. However, there is an 'updated' and superior library, <a href="https://code.google.com/p/wavehc/" title="Link: https://code.google.com/p/wavehc/">WaveHC written by Mr Fat16</a> in the forums. This library is powerful, works with more cards and card formatting issues, and uses less space. This tutorial is here for those who want to use the classic AF_Wave library but we suggest you also <a href="http://code.google.com/p/wavehc/">check out WaveHC</a>. It's very similar to AF_Wave so you can probably switch between the two.
<p><a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino/wavehc-library">We have a runthrough of WaveHC over here</a>.</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#initialize-the-card" class="anchor-link"></a>Initialize the card</h2>
The first thing that must be done is initializing the SD card for reading. You should copy &amp; paste this code from the examples since there's really only one way to do it.
<p>
Note that this here is a snippet, use the examples in the library for the 'full listing.'
 </p></div>
 <div class="build-code">
 
 <pre class="code-text-only">AF_Wave card;


void setup() 
{
 ...
 
 if (!card.init_card()) {
 putstring_nl("Card init. failed!"); return;
 }
 if (!card.open_partition()) {
 putstring_nl("No partition!"); return;
 }
 if (!card.open_filesys()) {
 putstring_nl("Couldn't open filesys"); return;
 }

 if (!card.open_rootdir()) {
 putstring_nl("Couldn't open dir"); return;
 }
}


...
</pre>
 <pre class="prettyprint linenums">AF_Wave card;


void setup() 
{
 ...
 
 if (!card.init_card()) {
 putstring_nl("Card init. failed!"); return;
 }
 if (!card.open_partition()) {
 putstring_nl("No partition!"); return;
 }
 if (!card.open_filesys()) {
 putstring_nl("Couldn't open filesys"); return;
 }

 if (!card.open_rootdir()) {
 putstring_nl("Couldn't open dir"); return;
 }
}


...
</pre>
 </div>
 <div class="row-fluid build-text">
 
 This code will try to initialize the card, open the partition table, open the FAT16 filesystem and finally open the root directory. If it fails it will print out an error message.
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#looking-for-files" class="anchor-link"></a>Looking for files</h2>
There isn't a lot of interface code for going through the root directory. Basically you can reset the directory (start over from beginning) and get the name of the next file. The files are not organized alphabetically but rather in the order that they were created on the card.
<p>
You'll need to make a character array 13 characters long to store the 8.3 + terminating 0 of the file. Here is an example of displaying the name of each file available. When done, it resets the directory.
 
 </p></div>
 <div class="build-code">
 
 <pre class="code-text-only">void ls() {
 char name[13];
 int ret;
 
 card.reset_dir();
 putstring_nl("Files found:");
 while (1) {
 ret = card.get_next_name_in_dir(name);
 if (!ret) {
 card.reset_dir();
 return;
 }
 Serial.println(name);
 }
}
</pre>
 <pre class="prettyprint linenums">void ls() {
 char name[13];
 int ret;
 
 card.reset_dir();
 putstring_nl("Files found:");
 while (1) {
 ret = card.get_next_name_in_dir(name);
 if (!ret) {
 card.reset_dir();
 return;
 }
 Serial.println(name);
 }
}
</pre>
 </div>
 <div class="row-fluid build-text">
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#opening-a-file-for-playing" class="anchor-link"></a>Opening a file for playing</h2>
There are two steps to opening a file for playing. The first is to just open the file itself, then the file must be converted to a wavefile. That means the file is read and checked for a wavetable header. To open a file, you just need the name, you can pass in a string such as "MYSOUND.WAV" or read through the directory and use the name returned from <strong>get_next_name_in_dir</strong>(). Since long names arent supported (to keep the library smaller) you may want to use <strong>ls</strong>() function above to see what the 8.3 format name of the file is.
 
 </div>
 <div class="build-code">
 
 <pre class="code-text-only">AF_Wave card;
File f;
Wavefile wave; // only one!



void playfile(char *name) {
 f = card.open_file(name);
 if (!f) {
 putstring_nl(" Couldn't open file"); return;
 }
 if (!wave.create(f)) {
 putstring_nl(" Not a valid WAV"); return;
 }


 ...
}
</pre>
 <pre class="prettyprint linenums">AF_Wave card;
File f;
Wavefile wave; // only one!



void playfile(char *name) {
 f = card.open_file(name);
 if (!f) {
 putstring_nl(" Couldn't open file"); return;
 }
 if (!wave.create(f)) {
 putstring_nl(" Not a valid WAV"); return;
 }


 ...
}
</pre>
 </div>
 <div class="row-fluid build-text">
 
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#playing-the-file" class="anchor-link"></a>Playing the file</h2>
Finally we can play the file! It's quite easy, once the wavefile has been opened as above, simply call <strong>wave.play</strong>() to being playback. The Arduino plays audio in an interrupt, which means that <strong>wave.play</strong>() returns immediately. You can then mess with sensors, print feedback or buttons or whatever.
<p>
While the wavefile is playing, you can check its status with the variable <strong>wave.isplaying</strong>. If the variable is 1 then the audio is playing. If its 0 that means it has finished playing.
</p><p>
You can stop playback by calling <strong>wave.stop</strong>()
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#closing-the-file" class="anchor-link"></a>Closing the file</h2>
When you're done playing audio from a file, you must close it! You can close the file by calling <strong>card.close_file(f)</strong> where <strong>f</strong> is the file you created using <strong>card.open_file(name)</strong>
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#changing-sample-rate" class="anchor-link"></a>Changing sample rate</h2>
This is sort of strange, but may be useful if, say, you have a sine wave or sample that youd like to change the pitch of or if you'd like to 'fast forward' through some music.
<p>
The sample rate (i.g. 22kHz) is stored in <strong>wave.dwSamplesPerSec</strong>. It will be initially set to whatever the wave file is supposed to be. Simply assign a new sample rate to the variable to change it on the fly.
</p><p><a href="http://learn.adafruit.com/audio-shield-for-arduino/examples">See here for more information.</a>
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#saving-and-restoring-the-play-position" class="anchor-link"></a>Saving &amp; restoring the play position</h2>
If, say, you want to know where along in the wave file you are, that information is also available in <strong>wave. in wave.getSize</strong>() (the number of bytes in the entire wave) and <strong>wave.remainingBytesInChunk</strong> (how many bytes are left to play).
<p>
You can set the current place to play from using <strong>wave.seek</strong>(), the Arduino will immediately start to fastforward to that location. For example, <strong>wave.seek</strong>(0) will take you to the beginning, <strong>wave.seek(wave.getSize()/2)</strong> will take you to the middle of the file.
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#volume-adjust" class="anchor-link"></a>Volume adjust</h2>
You can change the volume of the audio 'digitally' on the fly. Note that this doesn't change the volume control potentiometer, it actually just reduces the digital values going to the DAC. Thus the quality of the audio will be degraded. However, it may come in handy so it has been included. Since it slows down playback a bit, it is not enabled by default. To enable digital volume control, open up <strong>wave.cpp</strong> in the library folder and look for the line <strong>#define DVOLUME 0</strong> and change the <strong>0</strong> to a <strong>1</strong>. Then delete all the files in the library folder that end with .o, this will force the software to recompile the library when the sketch is compiled.
<p>
The volume is controlled by a variable in the Wavefile object. For example, if you have <strong>Wavefile wave</strong> at the top of your sketch, then you can set the volume by calling <strong>wave.volume = 4</strong>. The volume can be set from 0 to 12. A volume value of 0 is maximum, and 12 is silence. Anything higher than 12 will be the same as 12.
</p><p><a href="http://learn.adafruit.com/audio-shield-for-arduino/examples">See here for more information</a>.
 
 </p></div>

									</div>
									<div class="page-content all-page-view-content">
											 <div class="row-fluid build-text">
 
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#getting-stack-overflow-errors" class="anchor-link"></a>Getting Stack overflow errors?</h2>
These examples are all tested to work with IDE v13 or higher, so try to use that if possible!
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#get-more-ram-and-flash" class="anchor-link"></a>Get more RAM &amp; Flash!</h2>
This library uses a lot of RAM, if you are using an older '168 or '8 Arduino, you must <a href="http://learn.adafruit.com/arduino-tips-tricks-and-techniques/upgrade">upgrade to an ATmega328</a>. The shield was designed with the expectation that this upgrade would be available.
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#generating-speech" class="anchor-link"></a>Generating speech</h2>
If you want a human voice in your project, you can use the free generator at <a href="http://www.research.att.com/~ttsweb/tts/demo.php#top">AT&amp;T Text-to-Speech demo page</a>.
<p>
It will create a 16KHz, 16-bit audio file so you can use the audio 'right out of the box.'
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#sound-sample-library" class="anchor-link"></a>Sound sample library</h2>
<a href="http://wiki.laptop.org/go/Sound_samples" title="Link: http://wiki.laptop.org/go/Sound_samples">Here is huge collection of C.C. Attribution licensed sound samples!</a> A lot of it is already mono, 16 or 22KHz.
<h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#digital-audio-player" class="anchor-link"></a>Digital audio player</h2>
This is the simplest example. It plays every audio file it finds on the SD card in a loop. This sketch is also included in the library.

<br><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#pi-party" class="anchor-link"></a>PI party!</h2>
This example shows how to use the AT&amp;T text-to-speech website to speak the first n digits of pi. The number is stored in flash, each digit is spoken one at a time.

<br><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#6-buttons-6-sounds-multiple-possibilities" class="anchor-link"></a>6 buttons, 6 sounds, multiple possibilities!</h2>
Here is a collection of different playback techniques with 6 buttons (connected to analog 0-5).
<p>
You can change the # of buttons and what they're wired to easily. This isn't an exhaustive list but will give you some ideas about how you can do a lot with the <a href="http://code.google.com/p/wavehc/">WaveHC library</a>. Note that all the changes occur in loop(). The button checking and everything else is the same.
</p>
<br><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#playing-sound-based-on-input" class="anchor-link"></a>Playing sound based on input</h2>
<a href="http://learn.adafruit.com/system/assets/assets/000/010/349/original/wavehc_play6.pde.txt" title="Link: http://learn.adafruit.com/system/assets/assets/000/010/349/original/wavehc_play6.pde.txt">This similar example plays 6 different files</a> but its for <a href="http://code.google.com/p/wavehc/">WaveHC library</a> <a href="http://learn.adafruit.com/audio-shield-for-arduino/wavehc-number-2" title="Link: http://learn.adafruit.com/audio-shield-for-arduino/wavehc-number-2">(there's a walkthrough here).</a>
<p><a href="http://learn.adafruit.com/system/assets/assets/000/010/350/original/SerialControl.pde.txt" title="Link: http://learn.adafruit.com/system/assets/assets/000/010/350/original/SerialControl.pde.txt">This one plays 4 different files depending on serial characters</a>, good if you have say an xbee you want to use.
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#changing-the-playback-rate" class="anchor-link"></a>Changing the playback rate</h2>
By messing with the playback interrupt, <a href="http://www.adafruit.com/blog/2008/05/21/wave-shield-bending-the-playback-sample-rate/" title="Link: http://www.adafruit.com/blog/2008/05/21/wave-shield-bending-the-playback-sample-rate/">you can change the speed of playback for an interesting effect</a>.
<p><a href="http://learn.adafruit.com/system/assets/assets/000/010/351/original/SampleRateMod.pde.txt">Here is the sketch</a>, connect the potentiometer to analog pin 0 (or change the code).
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#wave-shield-voice-changer" class="anchor-link"></a>Wave Shield Voice Changer</h2>
<a href="http://learn.adafruit.com/wave-shield-voice-changer/" title="Link: http://learn.adafruit.com/wave-shield-voice-changer/">Speak like everyone's favorite baritone Sith lord or sing along with the Lollipop Guild!</a><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#volume-control-via-software" class="anchor-link"></a>Volume control via software</h2>
By changing the #define DVOLUME 1 in wave.cpp and recompiling you can do <a href="http://learn.adafruit.com/system/assets/assets/000/010/352/original/SoftVolumeChange.pde.txt" title="Link: http://learn.adafruit.com/system/assets/assets/000/010/352/original/SoftVolumeChange.pde.txt">rudimentary software volume control as in this sketch</a>.
 </div>

									</div>
									<div class="page-content all-page-view-content">
											 
 <div class="row-fluid build-alert">
 <p class="alert">
 <i class="fa fa-exclamation-circle"></i>
 
 
 
 
 This library is no longer supported, but I'm keeping it here for history sake - please use only WaveHC above!
 
 
 </p>
 </div>
 <div class="row-fluid build-text">
 
 
 
<a href="http://learn.adafruit.com/system/assets/assets/000/010/160/original/AFWave_18-02-09.zip">Download the latest library here</a> (currently: Feb 18, 2008 which now supports the 328P and arduino v13 under mac and windows &amp; probably linux).
<p><a href="http://learn.adafruit.com/arduino-tips-tricks-and-techniques/arduino-libraries">For information how to use and install libraries, see our tutorial!</a> Then check out <a href="http://learn.adafruit.com/audio-shield-for-arduino/examples">the examples</a> for how to use it.
</p><p>
Before you try to play audio, you'll want to free up some Arduino RAM, so that you don't end up with a nasty stack-overflow. <a href="http://www.adafruit.com/blog/?main_page=blog" title="Link: http://www.adafruit.com/blog/?main_page=blog">Follow these instructions</a> on how to get more RAM by reducing the input Serial library buffer.
</p><p>
The library is based off of <a href="http://www.roland-riegel.de/sd-reader/index.html" title="Link: http://www.roland-riegel.de/sd-reader/index.html">Roland Riegel's AVR FAT16 code</a>, but pared down quite a bit to reduce flash and RAM usage. There are also some strange optimizations to make it play audio better.
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#demo-waves" class="anchor-link"></a>Demo waves</h2>
If you need some audio to test with, <a href="http://learn.adafruit.com/system/assets/assets/000/010/161/original/helloworld.wav">here is a synthesized voice saying "Hello world."</a>
<p>
Here is the <a href="http://learn.adafruit.com/system/assets/assets/000/010/162/original/piwav.zip" title="Link: http://learn.adafruit.com/system/assets/assets/000/010/162/original/piwav.zip">collection of numbers for the pispeak example!</a>
</p><h2>
<a href="https://learn.adafruit.com/adafruit-wave-shield-audio-shield-for-arduino?view=all#schematics-and-layout" class="anchor-link"></a>Schematics &amp; Layout</h2>

 
 </div>

									</div>
					</div>
</body></html>
