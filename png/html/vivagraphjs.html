<!DOCTYPE html><html><head><title>VivaGraphJS</title></head><body>
<h1>VivaGraphJS</h1><p><a href="https://github.com/anvaka/VivaGraphJS" target="_new">Original URL</a></p>
<p><blockquote>VivaGraphJS is a free graph drawing library for JavaScript. It is designed to be extensible and to support different rendering engines and layout algorithms. At the moment it supports rendering&hellip;</blockquote></p>
<div><article class="markdown-body entry-content">

<p><strong>VivaGraphJS</strong> is a free <a href="http://en.wikipedia.org/wiki/Graph_drawing">graph drawing</a> library for JavaScript.
It is designed to be extensible and to support different rendering engines and layout algorithms. At the moment
it supports rendering graphs using either SVG or CSS formats. Layout algorithms currently implemented are:</p>

<ul><li>
<a href="http://en.wikipedia.org/wiki/Force-based_algorithms_(graph_drawing)">Force Directed</a> - based on Barnes-Hut
simulation and optimized for JavaScript language this algorithm gives <code>N aria2cweb.service articles _articles bin CAs devops Documents dotfiles gethtml go hnews jason js mailpile MITIE netdata png pngquant start-thesrc thesrc traefik.sample.toml ucii lg(N) + V</code> performance per iteration. </li>
<li>
<a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.113.9565&amp;rep=rep1&amp;type=pdf"> <img src="https://github.com/anvaka/VivaGraphJS/raw/master/packages/Images/pdf-icon.gif" alt="PDF download"> GEM</a> - Graph Embedder
algorithm created by Arne Frick, Andreas Ludwig and Heiko Mehldau. Estimated compleixity of this algorithm
is <code>O(|V|^3)</code> - though I must have made a mistake somewhere, because force directed algorithm almost
always produces better results faster. This algorithm is included to demonstrate how
one can implement a new layout algorithm.</li>
</ul><p>Library provides API which tracks graph changes and reflect changes on the rendering surface
accordingly.</p>

<h2>
<a name="enough-talking-show-me-the-demo" class="anchor" href="https://github.com/anvaka/VivaGraphJS#enough-talking-show-me-the-demo"></a>Enough talking. Show me the demo!</h2>

<p>To start using the library include <code>vivagraph.js</code> script from the <a href="https://github.com/anvaka/VivaGraphJS/tree/master/dist">dist</a> folder. The following code is the minimum required to render a graph with two nodes and one edge:</p>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">graph</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">graph</span><span class="p">();</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addLink</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">renderer</span><span class="p">(</span><span class="nx">graph</span><span class="p">);</span>
<span class="nx">renderer</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre>
</div>


<p>This will produce the following layout:</p>

<p><a href="https://github.com/anvaka/VivaGraphJS/raw/master/packages/Images/mingraph.png" target="_blank"><img src="https://github.com/anvaka/VivaGraphJS/raw/master/packages/Images/mingraph.png" alt="Simple graph"></a></p>

<p>The code above adds a link to the graph between nodes <code>1</code> and <code>2</code>. Since nodes are not yet in the graph
they will be created. It's equivalent to </p>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">graph</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">graph</span><span class="p">();</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addLink</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">renderer</span><span class="p">(</span><span class="nx">graph</span><span class="p">);</span>
<span class="nx">renderer</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre>
</div>


<h2>
<a name="customization" class="anchor" href="https://github.com/anvaka/VivaGraphJS#customization"></a>Customization</h2>

<p>VivaGraphJS is all about customization. You can easily change nodes and links appearance, switch layouting algorithm and medium used to display elements of the graph. For example to use CSS-based rendering (instead of default SVG) the following code is required:</p>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">graph</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">graph</span><span class="p">();</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addLink</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">graphics</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">cssGraphics</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">renderer</span><span class="p">(</span><span class="nx">graph</span><span class="p">,</span> 
 <span class="p">{</span>
 <span class="nx">graphics</span> <span class="o">:</span> <span class="nx">graphics</span>
 <span class="p">});</span>
<span class="nx">renderer</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre>
</div>


<p><code>graphics</code> class is responsible for rendering nodes and links on the page. And <code>renderer</code> orchestrates the process. To change nodes appearance tell <code>graphics</code> how to represent them. Here is an example of graph with six people whom I follow at github:</p>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">graph</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">graph</span><span class="p">();</span>

<span class="c1">// Construct the graph</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="s1">'anvaka'</span><span class="p">,</span> <span class="p">{</span><span class="nx">url</span> <span class="o">:</span> <span class="s1">'https://secure.gravatar.com/avatar/91bad8ceeec43ae303790f8fe238164b'</span><span class="p">});</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="s1">'manunt'</span><span class="p">,</span> <span class="p">{</span><span class="nx">url</span> <span class="o">:</span> <span class="s1">'https://secure.gravatar.com/avatar/c81bfc2cf23958504617dd4fada3afa8'</span><span class="p">});</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="s1">'thlorenz'</span><span class="p">,</span> <span class="p">{</span><span class="nx">url</span> <span class="o">:</span> <span class="s1">'https://secure.gravatar.com/avatar/1c9054d6242bffd5fd25ec652a2b79cc'</span><span class="p">});</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="s1">'bling'</span><span class="p">,</span> <span class="p">{</span><span class="nx">url</span> <span class="o">:</span> <span class="s1">'https://secure.gravatar.com/avatar/24a5b6e62e9a486743a71e0a0a4f71af'</span><span class="p">});</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="s1">'diyan'</span><span class="p">,</span> <span class="p">{</span><span class="nx">url</span> <span class="o">:</span> <span class="s1">'https://secure.gravatar.com/avatar/01bce7702975191fdc402565bd1045a8?'</span><span class="p">});</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="s1">'pocheptsov'</span><span class="p">,</span> <span class="p">{</span><span class="nx">url</span> <span class="o">:</span> <span class="s1">'https://secure.gravatar.com/avatar/13da974fc9716b42f5d62e3c8056c718'</span><span class="p">});</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="s1">'dimapasko'</span><span class="p">,</span> <span class="p">{</span><span class="nx">url</span> <span class="o">:</span> <span class="s1">'https://secure.gravatar.com/avatar/8e587a4232502a9f1ca14e2810e3c3dd'</span><span class="p">});</span>

<span class="nx">graph</span><span class="p">.</span><span class="nx">addLink</span><span class="p">(</span><span class="s1">'anvaka'</span><span class="p">,</span> <span class="s1">'manunt'</span><span class="p">);</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addLink</span><span class="p">(</span><span class="s1">'anvaka'</span><span class="p">,</span> <span class="s1">'thlorenz'</span><span class="p">);</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addLink</span><span class="p">(</span><span class="s1">'anvaka'</span><span class="p">,</span> <span class="s1">'bling'</span><span class="p">);</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addLink</span><span class="p">(</span><span class="s1">'anvaka'</span><span class="p">,</span> <span class="s1">'diyan'</span><span class="p">);</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addLink</span><span class="p">(</span><span class="s1">'anvaka'</span><span class="p">,</span> <span class="s1">'pocheptsov'</span><span class="p">);</span>
<span class="nx">graph</span><span class="p">.</span><span class="nx">addLink</span><span class="p">(</span><span class="s1">'anvaka'</span><span class="p">,</span> <span class="s1">'dimapasko'</span><span class="p">);</span>

<span class="c1">// Set custom nodes appearance</span>
<span class="kd">var</span> <span class="nx">graphics</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">svgGraphics</span><span class="p">();</span>
<span class="nx">graphics</span><span class="p">.</span><span class="nx">node</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
 <span class="c1">// The function is called every time renderer needs a ui to display node</span>
 <span class="k">return</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">svg</span><span class="p">(</span><span class="s1">'image'</span><span class="p">)</span>
 <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'width'</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
 <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'height'</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
 <span class="p">.</span><span class="nx">link</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span> <span class="c1">// node.data holds custom object passed to graph.addNode();</span>
 <span class="p">})</span>
 <span class="p">.</span><span class="nx">placeNode</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">nodeUI</span><span class="p">,</span> <span class="nx">pos</span><span class="p">){</span>
 <span class="c1">// Shift image to let links go to the center:</span>
 <span class="nx">nodeUI</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'x'</span><span class="p">,</span> <span class="nx">pos</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="mi">12</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'y'</span><span class="p">,</span> <span class="nx">pos</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="mi">12</span><span class="p">);</span>
 <span class="p">});</span>

<span class="kd">var</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">renderer</span><span class="p">(</span><span class="nx">graph</span><span class="p">,</span> 
 <span class="p">{</span>
 <span class="nx">graphics</span> <span class="o">:</span> <span class="nx">graphics</span>
 <span class="p">});</span>
<span class="nx">renderer</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre>
</div>


<p>The result is:</p>

<p><a href="https://github.com/anvaka/VivaGraphJS/raw/master/packages/Images/customNode.png" target="_blank"><img src="https://github.com/anvaka/VivaGraphJS/raw/master/packages/Images/customNode.png" alt="Custom nodes"></a></p>

<h2>
<a name="tuning-layout-algorithm" class="anchor" href="https://github.com/anvaka/VivaGraphJS#tuning-layout-algorithm"></a>Tuning layout algorithm</h2>

<p>Graphs vary by their nature. Some graphs has hundreds of nodes and few edges (or links), others connect every node with each other. To get the best layout tuning is usually required.
Consider the following example:</p>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">graphGenerator</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">generator</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">graph</span> <span class="o">=</span> <span class="nx">graphGenerator</span><span class="p">.</span><span class="nx">grid</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">renderer</span><span class="p">(</span><span class="nx">graph</span><span class="p">);</span>
<span class="nx">renderer</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre>
</div>


<p>Graph generators are part of the library, which can produce classic graphs. <code>grid</code> generator creates a grid with given number of columns and rows. But with default parameters the rendering is pretty ugly:</p>

<p><a href="https://github.com/anvaka/VivaGraphJS/raw/master/packages/Images/gridBad.png" target="_blank"><img src="https://github.com/anvaka/VivaGraphJS/raw/master/packages/Images/gridBad.png" alt="Grid 3x3 bad"></a></p>

<p>Let's tweak original code:</p>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">graphGenerator</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">generator</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">graph</span> <span class="o">=</span> <span class="nx">graphGenerator</span><span class="p">.</span><span class="nx">grid</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">layout</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">Layout</span><span class="p">.</span><span class="nx">forceDirected</span><span class="p">(</span><span class="nx">graph</span><span class="p">,</span> <span class="p">{</span>
 <span class="nx">springLength</span> <span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
 <span class="nx">springCoeff</span> <span class="o">:</span> <span class="mf">0.0005</span><span class="p">,</span>
 <span class="nx">dragCoeff</span> <span class="o">:</span> <span class="mf">0.02</span><span class="p">,</span>
 <span class="nx">gravity</span> <span class="o">:</span> <span class="o">-</span><span class="mf">1.2</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="nx">Viva</span><span class="p">.</span><span class="nx">Graph</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">renderer</span><span class="p">(</span><span class="nx">graph</span><span class="p">,</span> <span class="p">{</span>
 <span class="nx">layout</span> <span class="o">:</span> <span class="nx">layout</span>
<span class="p">});</span>
<span class="nx">renderer</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre>
</div>


<p>Now result is much better:</p>

<p><a href="https://github.com/anvaka/VivaGraphJS/raw/master/packages/Images/gridGood.png" target="_blank"><img src="https://github.com/anvaka/VivaGraphJS/raw/master/packages/Images/gridGood.png" alt="Grid 3x3"></a></p>

<p>Tuning layout algorithm is definitely one of the hardest part of using this library. It has to be improved in future to simplify usage. Each of the force directed algorithm parameters are described in the source code.</p>

<p><code>TODO: Add more examples and library API to wiki</code></p>

<h2>
<a name="i-need-your-feedback" class="anchor" href="https://github.com/anvaka/VivaGraphJS#i-need-your-feedback"></a>I need your feedback</h2>

<p>Disclaimer: I wrote this library to learn JavaScript. By no means I pretend to be an expert in the language and choosen approach to design may not be the optimal. I would love to hear your feedback and suggestions. </p>

<p>Though I implemented this library from scratch, I went through many existing libraries to pick the best (at my view) out of them. If you are evaluating libraries for your project make sure to check them out as well:</p>

<p>My goal is to create highly performant javascript library which serves in the field of graph drawing. To certain extent I ahcieved it. But I have no doubt there is much more to improve here.</p></article></div>
</body></html>
