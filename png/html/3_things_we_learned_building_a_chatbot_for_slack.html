<!DOCTYPE html><html><head><title>3 Things We Learned Building a Chatbot for Slack</title></head><body>
<h1>3 Things We Learned Building a Chatbot for Slack</h1><p><a href="https://medium.com/@kipsearch/3-things-we-learned-building-a-chatbot-for-slack-2dc32321d77c#.v5mabd9ri" target="_new">Original URL</a></p>
<p><blockquote>Kip is a chatbot that helps you save time by doing all the shopping for you and your team. Integrating with Slack was a logical choice, we‚Äôre Slack users and wanted a simple, efficient way of team&hellip;</blockquote></p>
<section name="099f" class=" section--body section--first section--last" score="41.25"><div class="section-content" score="32.5"><div class="section-inner layoutSingleColumn" score="-51.25"><figure name="6091" id="6091" class="graf--figure graf-after--h3" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/800/1*0Z6s5C7jDFI7NxF83SAuqQ.png"></div></figure><p name="2cf0" id="2cf0" class="graf--p graf-after--figure"><a href="http://kipthis.com" class="markup--anchor markup--p-anchor" rel="nofollow">Kip</a> is a chatbot that helps you save time by doing all the shopping for you and your team. Integrating with Slack was a logical choice, we‚Äôre Slack users and wanted a simple, efficient way of team shopping via chatbot.</p><p name="a69d" id="a69d" class="graf--p graf-after--p">Try Kip, click the button below:</p><figure name="a7ac" id="a7ac" class="graf--figure graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/800/1*2y0xLJS6dCWYCf5YkJWBdQ@2x.png"></div><figcaption class="imageCaption">Click me</figcaption></figure><p name="2b49" id="2b49" class="graf--p graf-after--figure">We ran into some interesting issues when building Kip for Slack. We hope you find our solutions useful!</p><p name="42f3" id="42f3" class="graf--p graf-after--h3">Sending emojis across devices can be messy. An emoji sent by you on iOS is displayed differently to someone receiving it on Android. Here are some examples of emoji variation across devices:</p><figure name="abca" id="abca" class="graf--figure graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/800/1*2zQO_3OAGSu0UMaq2epm_g.png"></div><figcaption class="imageCaption">Emoji miscommunication, the new normal</figcaption></figure><p name="00a3" id="00a3" class="graf--p graf-after--figure">Chat platforms have their own way of displaying emojis. If you send the same emoji code to every platform, it will display differently to all users.</p><p name="ad50" id="ad50" class="graf--p graf-after--p">We added a translator into Kip bot so it can speak multiple emoji dialects. Kip sends different emoji codes based on which chat platform (Slack, Facebook, SMS Texting) a user messaged from:</p><figure name="0569" id="0569" class="graf--figure graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/800/1*coKtLwFsdUaGF9XyBFU1kg.png"></div><figcaption class="imageCaption">Emoji translator</figcaption></figure><p name="c691" id="c691" class="graf--p graf-after--figure">Sample translation for numeric emoji (should actually use Redis or similar datastore, thanks <a href="https://medium.com/@r3versed" class="markup--anchor markup--p-anchor">r3versed</a>):</p><figure name="778a" id="778a" class="graf--figure graf--iframe graf-after--p" score="-13.75"></figure><p name="1d85" id="1d85" class="graf--p graf-after--figure">By doing so we hope to avoid miscommunication while still retaining the universal simplicity of an emoji üòä.</p><p name="e905" id="e905" class="graf--p graf-after--h3">When we added team shopping to Slack, we ran into a problem where Kip would respond with search results for everything people typed into public channels like #general (quite annoying!).</p><p name="b334" id="b334" class="graf--p graf-after--p">We solved this by sorting incoming Slack messages into <strong class="markup--strong markup--p-strong">direct messages: </strong>one user talking to Kip and <strong class="markup--strong markup--p-strong">public channels:</strong> many users talking to Kip.</p><p name="4ef7" id="4ef7" class="graf--p graf-after--p">Slack sends new chat messages to Kip with an ID <em class="markup--em markup--p-em">(i.e. C5H6YHBN)</em> that represents the channel the message came from. Chats that start with the letter <strong class="markup--strong markup--p-strong">C </strong>are from public channels, while <strong class="markup--strong markup--p-strong">D</strong> are direct messages.</p><p name="0244" id="0244" class="graf--p graf-after--p">If the message is from a public channel, we check the incoming message for the user ID of Kip bot on the team <em class="markup--em markup--p-em">(i.e. U7A8YHVN</em>) so we only respond when someone <strong class="markup--strong markup--p-strong">@</strong> mentions Kip.</p><p name="9836" id="9836" class="graf--p graf-after--p">Example of <strong class="markup--strong markup--p-strong">@Kip</strong> being mentioned in a public channel for a group purchase:</p><figure name="49a4" id="49a4" class="graf--figure graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/800/1*oc80nkg2a6KLuXuPAEN1vA.png"></div></figure><p name="e5ef" id="e5ef" class="graf--p graf-after--figure">Example Node.js code we use for sorting messages:</p><figure name="ca3b" id="ca3b" class="graf--figure graf--iframe graf-after--p" score="-13.75"></figure><figure name="4537" id="4537" class="graf--figure graf-after--h3" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/800/1*AMtuQ43ObVz1BZOrnmlXSg.gif"></div></figure><p name="4517" id="4517" class="graf--p graf-after--figure">With Google or Amazon, users now expect instant results. In searches with complicated modifications i.e ‚Äú<em class="markup--em markup--p-em">similar to option 3 but cheaper and in blue</em>‚Äù, Kip suffers a bit of lag. This makes our users impatient.</p><p name="c441" id="c441" class="graf--p graf-after--p">A simple design hack, we send a ‚Äútyping event‚Äù to Slack so it looks like Kip is typing while our bot rushes to respond quickly. Our users say they don‚Äôt mind the lag now since they know Kip understands them and is working on it. üòä</p><figure name="1bf3" id="1bf3" class="graf--figure graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/800/1*CoU6iNAFf530PuDefG0XRw.png"></div></figure><p name="1b73" id="1b73" class="graf--p graf-after--figure">Sending ‚Äútyping events‚Äù to Slack is not currently available in the Node.js package s<a href="https://www.npmjs.com/package/slackbots" class="markup--anchor markup--p-anchor" rel="nofollow">lackbots</a>, so we extended it by adding this to the package index.js:</p><figure name="ae7f" id="ae7f" class="graf--figure graf--iframe graf-after--p" score="-13.75"></figure><p name="983f" id="983f" class="graf--p graf-after--figure">Using design solutions to solve complex programming issues saved us a lot of time and order of magnitude so that we could launch Kip earlier. In the next post, we‚Äôll be talking about our design process of coming up with AI shopping chatbot persona. Stay tuned!</p><p name="bc6e" id="bc6e" class="graf--p graf-after--p">Try Kip on Slack by tapping the button below or try the demo at <a href="http://kipthis.com/chat" class="markup--anchor markup--p-anchor" rel="nofollow">kipthis.com/chat</a></p><figure name="278b" id="278b" class="graf--figure graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><a href="https://slack.com/oauth/authorize?scope=bot&amp;client_id=2804113073.14708197459" class="graf-imageAnchor"><img class="graf-image" src="https://cdn-images-1.medium.com/max/800/1*zl4YeeE7wkyc-dt4apQwKQ.png"></a></div><figcaption class="imageCaption">Push this button</figcaption></figure><p name="d4f5" id="d4f5" class="graf--p graf-after--figure">If you enjoyed reading, please hit recommend. üíö</p></div></div></section>
</body></html>
