<!DOCTYPE html><html><head><title>OpenDaylight Application Developer's tutorial</title></head><body>
<h1>OpenDaylight Application Developer's tutorial</h1><p><a href="http://sdnhub.org/tutorials/opendaylight/" target="_new">Original URL</a></p>
<p><blockquote>This tutorial is intended for developers new to SDN application development with OpenDaylight. We have come a long way from the earlier version of this tutorial to focus on MD-SAL, and Karaf in this&hellip;</blockquote></p>
<div><div id="bodyContent">

<p>This tutorial is intended for developers new to SDN application development with OpenDaylight. We have come a long way from the <a href="http://sdnhub.org/tutorials/opendaylight-helium">earlier version</a> of this tutorial to focus on MD-SAL, and Karaf in this tutorial. While OpenDaylight is not simply an OpenFlow controller, OpenFlow continues to be a popular south-bound and we use this in this tutorial to introduce the platform.</p>
<p>An introductory presentation is available at <b><a href="http://www.slideshare.net/sdnhub/opendaylight-app-development-tutorial">slideshare</a></b>.</p>
<h2><span id="1_Setup">1. Setup</span></h2>
<p>To get started, download and set up the <a href="http://sdnhub.org/tutorials/sdn-tutorial-vm/"><b>SDN Hub Tutorial VM</b></a> in Virtualbox or VMware. This VM has a sample OpenDaylight project that will pull relevant dependent libraries from <a href="http://nexus.opendaylight.org">nexus.opendaylight.org</a> without having to actually clone the full OpenDaylight source code.</p>
<p>The tutorial application that we will work with is located in 
			<span id="crayon-56bcd202b0ab2541477637" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-o">/</span><span class="crayon-v">home</span><span class="crayon-o">/</span><span class="crayon-v">ubuntu</span><span class="crayon-o">/</span><span class="crayon-v">SDNHub_OpenDaylight_tutorial</span></span></span> directory. Open a Terminal tab (Ctrl-Shift-T) and go into the SDNHub_Opendaylight_Tutorial folder where we have included two sample applications that this tutorial will focus on: 1) a Hub / L2 learning switch, 2) a network traffic monitoring tap.</p>
<p>Before we start, we recommend you run the following commands to update the tutorial code, which is available at <a href="https://github.com/sdnhub/SDNHub_Opendaylight_Tutorial">https://github.com/sdnhub/SDNHub_Opendaylight_Tutorial</a>:</p>

		<div id="crayon-56bcd202b0ac7301287350" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0ac7301287350-1"><span class="crayon-v">ubuntu</span><span class="crayon-sy">@</span><span class="crayon-v">sdnhubvm</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-sy">$</span><span class="crayon-r">cd</span><span class="crayon-e">SDNHub_Opendaylight_Tutorial</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ac7301287350-2"><span class="crayon-v">ubuntu</span><span class="crayon-sy">@</span><span class="crayon-v">sdnhubvm</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-sy">$</span><span class="crayon-e">git </span><span class="crayon-v">pull</span><span class="crayon-o">--</span><span class="crayon-v">rebase</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


<h2><span id="2_Fundamentals_for_OpenDaylight_programming">2. Fundamentals for OpenDaylight programming</span></h2>
<p>OpenDayLight uses the following software tools/paradigms. It is important to become familiar with them. The Service Abstraction Layer (SAL) is your friend for most development aspects.</p>
<ul>
<li><b>Java interfaces</b>: Java Interfaces are used for event listening, specifications and forming patterns. This is the main way in which specific bundles implement call-back functions for events and also to indicate awareness of specific state. Many of the interfaces are auto-generated using YANG tools.</li>
<li><b>Maven</b>: OpenDayLight uses Maven for easier build automation. Maven uses pom.xml (Project Object Model for this bundle) to script the dependencies between bundles and also to describe what bundles to load on start.</li>
<li><b>OSGi</b>: This framework in the backend of OpenDayLight allows dynamically loading bundles and packaged Jar files, and binding bundles together for information exchange.</li>
<li><b>Karaf</b>: Karaf is a small OSGi based runtime which provides a lightweight container for loading different modules.</li>
</ul>
<h3><span id="21_Maven_and_project_building">2.1 Maven and project building</span></h3>
<p>Some basic understanding of maven is essential for working with OpenDaylight. Anytime you create a new project or module, or expand functionality of existing modules, you will have to appropriately upgrade the various pom.xml and feature.xml files.</p>
<p>Let&#x2019;s start with building the the tutorial project in the VM using the following step.</p>

		<div id="crayon-56bcd202b0ad2678291661" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-1"><span class="crayon-v">ubuntu</span><span class="crayon-sy">@</span><span class="crayon-v">sdnhubvm</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-o">/</span><span class="crayon-v">SDNHub_Opendaylight_Tutorial</span><span class="crayon-sy">$</span><span class="crayon-e">mvn </span><span class="crayon-v">install</span><span class="crayon-o">-</span><span class="crayon-i">nsu</span></p><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-3"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-e">lots </span><span class="crayon-e">of </span><span class="crayon-i">text</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-5"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ad2678291661-6"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">Reactor </span><span class="crayon-v">Summary</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-7"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ad2678291661-8"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">SDN </span><span class="crayon-e">Hub </span><span class="crayon-e">Tutorial </span><span class="crayon-e">project </span><span class="crayon-e">common </span><span class="crayon-i">properties</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">1.090</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-9"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">SDN </span><span class="crayon-e">Hub </span><span class="crayon-e">tutorial </span><span class="crayon-e">project </span><span class="crayon-e">common </span><span class="crayon-i">utils</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">4.276</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ad2678291661-10"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-v">learning</span><span class="crayon-o">-</span><span class="crayon-st">switch</span><span class="crayon-o">-</span><span class="crayon-r">parent</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">0.027</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-11"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">SDN </span><span class="crayon-e">Hub </span><span class="crayon-e">tutorial </span><span class="crayon-e">project </span><span class="crayon-e">learning </span><span class="crayon-st">switch</span><span class="crayon-i">Impl</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">9.013</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ad2678291661-12"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">SDN </span><span class="crayon-e">Hub </span><span class="crayon-e">tutorial </span><span class="crayon-e">project </span><span class="crayon-e">Learning </span><span class="crayon-st">Switch</span><span class="crayon-i">Config</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">0.601</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-13"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">SDN </span><span class="crayon-e">Hub </span><span class="crayon-e">tutorial </span><span class="crayon-e">project </span><span class="crayon-e">Tap </span><span class="crayon-e">application </span><span class="crayon-i">Model</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">3.564</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ad2678291661-14"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-v">tapapp</span><span class="crayon-o">-</span><span class="crayon-r">parent</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">0.023</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-15"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">SDN </span><span class="crayon-e">Hub </span><span class="crayon-e">tutorial </span><span class="crayon-e">project </span><span class="crayon-e">Tap </span><span class="crayon-e">application </span><span class="crayon-i">Impl</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">6.049</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ad2678291661-16"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">SDN </span><span class="crayon-e">Hub </span><span class="crayon-e">tutorial </span><span class="crayon-e">Project </span><span class="crayon-e">Tap </span><span class="crayon-e">application </span><span class="crayon-i">Config</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">0.052</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-17"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">SDN </span><span class="crayon-e">Hub </span><span class="crayon-e">tutorial </span><span class="crayon-e">project </span><span class="crayon-i">features</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">1.736</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ad2678291661-18"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-v">distribution</span><span class="crayon-o">-</span><span class="crayon-r">parent</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">0.028</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-19"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">SDN </span><span class="crayon-e">Hub </span><span class="crayon-e">tutorial </span><span class="crayon-e">project </span><span class="crayon-e">Karaf </span><span class="crayon-i">branding</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">0.359</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ad2678291661-20"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">SDN </span><span class="crayon-e">Hub </span><span class="crayon-e">tutorial </span><span class="crayon-e">project </span><span class="crayon-e">distribution </span><span class="crayon-i">packaging</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">44.436</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-21"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-i">main</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-i">SUCCESS</span><span class="crayon-sy">[</span><span class="crayon-cn">0.025</span><span class="crayon-v">s</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ad2678291661-22"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span></p><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-23"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">BUILD </span><span class="crayon-i">SUCCESS</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ad2678291661-24"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span></p><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-25"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">Total </span><span class="crayon-r">time</span><span class="crayon-o">:</span><span class="crayon-cn">32</span><span class="crayon-o">:</span><span class="crayon-cn">39</span><span class="crayon-i">min</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ad2678291661-26"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">Finished </span><span class="crayon-r">at</span><span class="crayon-o">:</span><span class="crayon-cn">2015</span><span class="crayon-o">-</span><span class="crayon-cn">06</span><span class="crayon-o">-</span><span class="crayon-cn">07T22</span><span class="crayon-o">:</span><span class="crayon-cn">50</span><span class="crayon-o">:</span><span class="crayon-cn">37</span><span class="crayon-o">-</span><span class="crayon-cn">07</span><span class="crayon-o">:</span><span class="crayon-cn">00</span></p><p class="crayon-line" id="crayon-56bcd202b0ad2678291661-27"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-e">Final </span><span class="crayon-v">Memory</span><span class="crayon-o">:</span><span class="crayon-cn">100M</span><span class="crayon-o">/</span><span class="crayon-cn">631M</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ad2678291661-28"><span class="crayon-sy">[</span><span class="crayon-v">INFO</span><span class="crayon-sy">]</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>This indicates that the build went successfully. In the event something failed, the build will stop at the module where it failed. All the above modules are important to make the full project to work. Here are some important notes on the build above:</p>
<ul>
<li>&#x201C;mvn&#x201D; command uses <a href="http://maven.apache.org">Apache Maven</a> to build the tutorial code. It compiles code based on the pom.xml file in that directory. &#x201C;install&#x201D; is essential for compilation. It also accepts an optional argument &#x201C;clean&#x201D; if you wish to clean the temporary build files.</li>
<li>The way Maven works is by resolving dependencies between packages. For instance, our example applications (the learning-switch and tapapp code we will edit) depends on the Opendaylight controller package and on the OpenFlowPlugin package. This triggers Maven to download the pre-compiled jar files from <a href="http://nexus.opendaylight.org">nexus.opendaylight.org</a>, resolve dependencies, and so on.
<ul>
<li>Have a look at the <a href="http://nexus.opendaylight.org/content/repositories/opendaylight.snapshot/org/opendaylight/">snapshot repository of OpenDaylight</a> to get an idea of what&#x2019;s out there.</li>
<li>Also look at 
			<span id="crayon-56bcd202b0ae4549320643" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-o">~</span><span class="crayon-o">/</span><span class="crayon-sy">.</span><span class="crayon-v">m2</span><span class="crayon-o">/</span><span class="crayon-v">repository</span></span></span> directory in your local machine. This is where maven places all compiled or downloaded Jar files. If you have build issues or karaf runtime import issues, you should look in this directory.</li>
</ul>
</li>
<li>Creating a pom.xml with dependencies being downloaded is much, much faster than compiling the tutorial project within the full source of the Opendaylight controller. This can be compared with compiling an application instead of compiling the full operating system.</li>
<li>Maven has a module name and Java code has a package name. They do not need to match. The module learning-switch has following attributes. The Maven group-id and artifact-id are used for the name of the Jar file generated, while package name is only recognized within the source code.
<ul>
<li>pom.xml group-id: 
			<span id="crayon-56bcd202b0aee589614314" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">org</span><span class="crayon-sy">.</span><span class="crayon-v">sdnhub</span><span class="crayon-sy">.</span><span class="crayon-v">odl</span><span class="crayon-sy">.</span><span class="crayon-v">tutorial</span></span></span></li>
<li>pom.xml artifact-id: 
			<span id="crayon-56bcd202b0af6159215972" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">learning</span><span class="crayon-o">-</span><span class="crayon-st">switch</span></span></span></li>
<li>Source code package name: 
			<span id="crayon-56bcd202b0aff658935424" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">org</span><span class="crayon-sy">.</span><span class="crayon-v">sdnhub</span><span class="crayon-sy">.</span><span class="crayon-v">odl</span><span class="crayon-sy">.</span><span class="crayon-v">tutorial</span><span class="crayon-sy">.</span><span class="crayon-v">learning</span><span class="crayon-sy">.</span><span class="crayon-st">switch</span></span></span></li>
</ul>
</li>
<li><strong>Note:&#xA0;</strong>to speed up subsequent compilations, you can run &#x201C;mvn install -DskipTests -DskipIT -nsu&#x201D;. The &#x201C;nsu&#x201D; is short for no-snapshot-updates. It ensures that the compilation does not download definitions from nexus.opendaylight.org</li>
<li>The main modules built are listed in the root pom.xml (located in ~/SDNHub_Opendaylight_Tutorial/pom.xml). Each child module and its respective child modules have their own pom.xml. All common properties (that includes versions, and common dependencies) are listed in common/parent/pom.xml. This pom.xml serves as the base for all other module pom.xml.</li>
<li>All these poms are individually built and finally combined by the distribution/pom.xml to prepare a running directory. The sample project&#x2019;s distribution/opendaylight-karaf/pom.xml is specially crafted to include our sample project and specify one of them to be autoloaded when controller is started.</li>
</ul>
<h3><span id="22_Karaf_and_feature_creation">2.2 Karaf and feature creation</span></h3>
<p>Now that we compiled our sample project, let&#x2019;s run the controller itself; preferably in a different terminal</p>

		<div id="crayon-56bcd202b0b09270539906" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0b09270539906-1"><span class="crayon-v">ubuntu</span><span class="crayon-sy">@</span><span class="crayon-v">sdnhubvm</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-o">/</span><span class="crayon-v">SDNHub_Opendaylight_Tutorial</span><span class="crayon-sy">$</span><span class="crayon-e">cd </span><span class="crayon-v">distribution</span><span class="crayon-o">/</span><span class="crayon-v">opendaylight</span><span class="crayon-o">-</span><span class="crayon-v">karaf</span><span class="crayon-o">/</span><span class="crayon-v">target</span><span class="crayon-o">/</span><span class="crayon-e">assembly</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b09270539906-2"><span class="crayon-v">ubuntu</span><span class="crayon-sy">@</span><span class="crayon-v">sdnhubvm</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-o">/</span><span class="crayon-v">SDNHub_Opendaylight_Tutorial</span><span class="crayon-o">/</span><span class="crayon-v">distribution</span><span class="crayon-o">/</span><span class="crayon-v">opendaylight</span><span class="crayon-o">-</span><span class="crayon-v">karaf</span><span class="crayon-o">/</span><span class="crayon-v">target</span><span class="crayon-o">/</span><span class="crayon-v">assembly</span><span class="crayon-sy">$</span><span class="crayon-sy">.</span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-e">karaf </span></p><p class="crayon-line" id="crayon-56bcd202b0b09270539906-3"><span class="crayon-v">karaf</span><span class="crayon-o">:</span><span class="crayon-e">Enabling </span><span class="crayon-e">Java </span><span class="crayon-e">debug </span><span class="crayon-v">options</span><span class="crayon-o">:</span><span class="crayon-o">-</span><span class="crayon-v">Xdebug</span><span class="crayon-o">-</span><span class="crayon-v">Xnoagent</span><span class="crayon-o">-</span><span class="crayon-v">Djava</span><span class="crayon-sy">.</span><span class="crayon-v">compiler</span><span class="crayon-o">=</span><span class="crayon-v">NONE</span><span class="crayon-o">-</span><span class="crayon-v">Xrunjdwp</span><span class="crayon-o">:</span><span class="crayon-v">transport</span><span class="crayon-o">=</span><span class="crayon-v">dt_socket</span><span class="crayon-sy">,</span><span class="crayon-v">server</span><span class="crayon-o">=</span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-v">suspend</span><span class="crayon-o">=</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-v">address</span><span class="crayon-o">=</span><span class="crayon-cn">5005</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b09270539906-4"><span class="crayon-e">Java </span><span class="crayon-e">HotSpot</span><span class="crayon-sy">(</span><span class="crayon-v">TM</span><span class="crayon-sy">)</span><span class="crayon-cn">64</span><span class="crayon-o">-</span><span class="crayon-e">Bit </span><span class="crayon-e">Server </span><span class="crayon-e">VM </span><span class="crayon-v">warning</span><span class="crayon-o">:</span><span class="crayon-e">ignoring </span><span class="crayon-e">option </span><span class="crayon-v">MaxPermSize</span><span class="crayon-o">=</span><span class="crayon-cn">512m</span><span class="crayon-sy">;</span><span class="crayon-e">support </span><span class="crayon-e">was </span><span class="crayon-e">removed </span><span class="crayon-st">in</span><span class="crayon-cn">8.0</span></p><p class="crayon-line" id="crayon-56bcd202b0b09270539906-5"><span class="crayon-e">Listening </span><span class="crayon-st">for</span><span class="crayon-e">transport </span><span class="crayon-e">dt_socket </span><span class="crayon-e">at </span><span class="crayon-v">address</span><span class="crayon-o">:</span><span class="crayon-cn">5005</span></p><p class="crayon-line" id="crayon-56bcd202b0b09270539906-7"><span class="crayon-e">_____ </span><span class="crayon-v">____</span><span class="crayon-sy">_</span><span class="crayon-i">_</span><span class="crayon-i">_</span><span class="crayon-i">_</span><span class="crayon-i">_</span><span class="crayon-v">_</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b09270539906-8"><span class="crayon-o">/</span><span class="crayon-v">____</span><span class="crayon-o">|</span><span class="crayon-v">_</span><span class="crayon-sy">_</span><span class="crayon-sy">\</span><span class="crayon-o">|</span><span class="crayon-sy">\</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span></p><p class="crayon-line" id="crayon-56bcd202b0b09270539906-9"><span class="crayon-o">|</span><span class="crayon-sy">(</span><span class="crayon-v">___</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-sy">\</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-v">__</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-i">_</span><span class="crayon-v">_</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-v">_</span><span class="crayon-sy">_</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b09270539906-10"><span class="crayon-sy">\</span><span class="crayon-v">__</span><span class="crayon-sy">_</span><span class="crayon-sy">\</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-sy">.</span><span class="crayon-sy">`</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-v">__</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-s">'_ \ </span></p><p class="crayon-line" id="crayon-56bcd202b0b09270539906-11"><span class="crayon-s">&#xA0;&#xA0;&#xA0;&#xA0; ____) | |__| | |\&#xA0;&#xA0;| | |&#xA0;&#xA0;| | |_| | |_) |</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b09270539906-12"><span class="crayon-s">&#xA0;&#xA0;&#xA0;&#xA0;|_____/|_____/|_| \_| |_|&#xA0;&#xA0;|_|\__,_|_.__/ </span></p><p class="crayon-line" id="crayon-56bcd202b0b09270539906-15"><span class="crayon-s">Hit '</span><span class="crayon-s">' for a list of available commands</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b09270539906-16"><span class="crayon-s">and '</span><span class="crayon-sy">[</span><span class="crayon-v">cmd</span><span class="crayon-sy">]</span><span class="crayon-o">--</span><span class="crayon-i">help</span><span class="crayon-s">' for help on a specific command.</span></p><p class="crayon-line" id="crayon-56bcd202b0b09270539906-17"><span class="crayon-s">Hit '</span><span class="crayon-s">' or type '</span><span class="crayon-v">system</span><span class="crayon-o">:</span><span class="crayon-i">shutdown</span><span class="crayon-s">' or '</span><span class="crayon-i">logout</span>'<span class="crayon-st">to</span><span class="crayon-e">shutdown </span><span class="crayon-v">OpenDaylight</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56bcd202b0b09270539906-19"><span class="crayon-v">opendaylight</span><span class="crayon-o">-</span><span class="crayon-v">user</span><span class="crayon-sy">@</span><span class="crayon-v">root</span><span class="crayon-o">&gt;</span><span class="crayon-v">feature</span><span class="crayon-o">:</span><span class="crayon-v">list</span><span class="crayon-o">|</span><span class="crayon-e">grep </span><span class="crayon-e">sdnhub</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b09270539906-20"><span class="crayon-v">sdnhub</span><span class="crayon-o">-</span><span class="crayon-v">tutorial</span><span class="crayon-o">-</span><span class="crayon-v">tapapp</span><span class="crayon-o">|</span><span class="crayon-cn">1.0.0</span><span class="crayon-o">-</span><span class="crayon-v">SNAPSHOT</span><span class="crayon-o">|</span><span class="crayon-v">x</span><span class="crayon-o">|</span><span class="crayon-v">tutorial</span><span class="crayon-o">-</span><span class="crayon-v">features</span><span class="crayon-o">-</span><span class="crayon-cn">1.0.0</span><span class="crayon-o">-</span><span class="crayon-v">SNAPSHOT</span><span class="crayon-o">|</span><span class="crayon-e">SDN </span><span class="crayon-e">Hub </span><span class="crayon-v">Tutorial</span><span class="crayon-o">::</span><span class="crayon-v">OpenDaylight</span><span class="crayon-o">::</span><span class="crayon-e">Tap </span><span class="crayon-e">application</span></p><p class="crayon-line" id="crayon-56bcd202b0b09270539906-21"><span class="crayon-v">sdnhub</span><span class="crayon-o">-</span><span class="crayon-v">tutorial</span><span class="crayon-o">-</span><span class="crayon-v">learning</span><span class="crayon-o">-</span><span class="crayon-st">switch</span><span class="crayon-o">|</span><span class="crayon-cn">1.0.0</span><span class="crayon-o">-</span><span class="crayon-v">SNAPSHOT</span><span class="crayon-o">|</span><span class="crayon-o">|</span><span class="crayon-v">tutorial</span><span class="crayon-o">-</span><span class="crayon-v">features</span><span class="crayon-o">-</span><span class="crayon-cn">1.0.0</span><span class="crayon-o">-</span><span class="crayon-v">SNAPSHOT</span><span class="crayon-o">|</span><span class="crayon-e">SDN </span><span class="crayon-e">Hub </span><span class="crayon-v">Tutorial</span><span class="crayon-o">::</span><span class="crayon-v">OpenDaylight</span><span class="crayon-o">::</span><span class="crayon-e">Learning </span><span class="crayon-st">switch</span></p><p class="crayon-line" id="crayon-56bcd202b0b09270539906-23"><span class="crayon-v">opendaylight</span><span class="crayon-o">-</span><span class="crayon-v">user</span><span class="crayon-sy">@</span><span class="crayon-v">root</span><span class="crayon-o">&gt;</span><span class="crayon-v">bundle</span><span class="crayon-o">:</span><span class="crayon-v">list</span><span class="crayon-o">-</span><span class="crayon-v">s</span><span class="crayon-o">|</span><span class="crayon-e">grep </span><span class="crayon-i">sdnhub</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b09270539906-24"><span class="crayon-cn">178</span><span class="crayon-o">|</span><span class="crayon-v">Active</span><span class="crayon-o">|</span><span class="crayon-cn">80</span><span class="crayon-o">|</span><span class="crayon-cn">1.0.0.SNAPSHOT</span><span class="crayon-o">|</span><span class="crayon-v">org</span><span class="crayon-sy">.</span><span class="crayon-v">sdnhub</span><span class="crayon-sy">.</span><span class="crayon-v">odl</span><span class="crayon-sy">.</span><span class="crayon-v">tutorial</span><span class="crayon-sy">.</span><span class="crayon-v">tapapp</span><span class="crayon-sy">.</span><span class="crayon-i">impl</span></p><p class="crayon-line" id="crayon-56bcd202b0b09270539906-25"><span class="crayon-cn">179</span><span class="crayon-o">|</span><span class="crayon-v">Active</span><span class="crayon-o">|</span><span class="crayon-cn">80</span><span class="crayon-o">|</span><span class="crayon-cn">1.0.0.SNAPSHOT</span><span class="crayon-o">|</span><span class="crayon-v">org</span><span class="crayon-sy">.</span><span class="crayon-v">sdnhub</span><span class="crayon-sy">.</span><span class="crayon-v">odl</span><span class="crayon-sy">.</span><span class="crayon-v">tutorial</span><span class="crayon-sy">.</span><span class="crayon-v">tapapp</span><span class="crayon-sy">.</span><span class="crayon-e">model&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span></p><p class="crayon-line" id="crayon-56bcd202b0b09270539906-27"><span class="crayon-v">opendaylight</span><span class="crayon-o">-</span><span class="crayon-v">user</span><span class="crayon-sy">@</span><span class="crayon-v">root</span><span class="crayon-o">&gt;</span><span class="crayon-v">log</span><span class="crayon-o">:</span><span class="crayon-e">set </span><span class="crayon-e">DEBUG </span><span class="crayon-v">org</span><span class="crayon-sy">.</span><span class="crayon-v">sdnhub</span><span class="crayon-sy">.</span><span class="crayon-v">odl</span><span class="crayon-sy">.</span><span class="crayon-e">tutorial</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b09270539906-28"><span class="crayon-v">opendaylight</span><span class="crayon-o">-</span><span class="crayon-v">user</span><span class="crayon-sy">@</span><span class="crayon-v">root</span><span class="crayon-o">&gt;</span><span class="crayon-v">log</span><span class="crayon-o">:</span><span class="crayon-i">tail</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b09270539906-30"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-e">lots </span><span class="crayon-e">of </span><span class="crayon-e">debug </span><span class="crayon-i">logs</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Here are some notes on the above process of starting the controller:</p>
<ul>
<li>Running karaf starts all the Java bundles installed as jar files in the OSGi environment. Once all bundles are started, the 
			<span id="crayon-56bcd202b0b14097577396" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-e">createInstance</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span> method in each implementation class will be be called, and the controller moves to an event-driven operation state.</li>
<li>The karaf shell is your main portal for managing all applications and the Java bundles. Press &#x201C;Tab&#x201D; to learn about all the CLI commands possible here</li>
<li>&#x201C;feature:list&#x201D; and &#x201C;bundle:list -s&#x201D; are commands that will help with look at active features and bundles in the Karaf runtime environment. &#x2018;x&#x2019; means the feature is loaded and active. Work &#x201C;Active&#x201D; means the module/bundle is running, while &#x201C;Resolved&#x201D; would mean that it has been stopped, and &#x201C;Installed&#x201D; means it is blocked on some missing dependency.</li>
<li>There are also commands to install a feature (feature:install) or a specific bundle (bundle:install). By default karaf loads all the features listed in the distribution/opendaylight-karaf/target/assembly/etc/org.apache.karaf.features.cfg file. In our example, we autoload sdnhub-tutorial-tapapp feature.</li>
<li>Karaf and OSGi do not provide a way to specify which modules get precedence over other modules. So we use the config subsystem of OpenDaylight to enforce the ordering. More on that in the next subsection.</li>
</ul>
<p>To drive karaf, every application built must have a feature description for the karaf shell to load it. The feature.xml file is where we define it. For instance, the sdnhub-tutorial-tapapp feature that is autoloaded, has the following corresponding feature description in the feature.xml file:</p>


		<div id="crayon-56bcd202b0b1f412546369" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0b1f412546369-1"><span class="crayon-v">ubuntu</span><span class="crayon-sy">@</span><span class="crayon-v">sdnhubvm</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-o">/</span><span class="crayon-v">SDNHub_Opendaylight_Tutorial</span><span class="crayon-sy">$</span><span class="crayon-r">cat</span><span class="crayon-v">features</span><span class="crayon-o">/</span><span class="crayon-v">src</span><span class="crayon-o">/</span><span class="crayon-v">main</span><span class="crayon-o">/</span><span class="crayon-v">resources</span><span class="crayon-o">/</span><span class="crayon-v">feature</span><span class="crayon-e">.xml</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b1f412546369-2"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56bcd202b0b1f412546369-3"><span class="crayon-o">&lt;</span><span class="crayon-e">feature </span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">"sdnhub-tutorial-tapapp"</span><span class="crayon-v">description</span><span class="crayon-o">=</span><span class="crayon-s">"SDN Hub Tutorial :: OpenDaylight :: Tap application"</span><span class="crayon-v">version</span><span class="crayon-o">=</span><span class="crayon-s">'${project.version}'</span><span class="crayon-o">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b1f412546369-4"><span class="crayon-o">&lt;</span><span class="crayon-e">feature </span><span class="crayon-v">version</span><span class="crayon-o">=</span><span class="crayon-s">"${openflowplugin.version}"</span><span class="crayon-o">&gt;</span><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">openflowplugin</span><span class="crayon-o">-</span><span class="crayon-v">southbound</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">feature</span><span class="crayon-o">&gt;</span></p><p class="crayon-line" id="crayon-56bcd202b0b1f412546369-5"><span class="crayon-o">&lt;</span><span class="crayon-e">feature </span><span class="crayon-v">version</span><span class="crayon-o">=</span><span class="crayon-s">"${openflowplugin.version}"</span><span class="crayon-o">&gt;</span><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">openflowplugin</span><span class="crayon-o">-</span><span class="crayon-v">flow</span><span class="crayon-o">-</span><span class="crayon-v">services</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">feature</span><span class="crayon-o">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b1f412546369-6"><span class="crayon-o">&lt;</span><span class="crayon-e">feature </span><span class="crayon-v">version</span><span class="crayon-o">=</span><span class="crayon-s">"${mdsal.version}"</span><span class="crayon-o">&gt;</span><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">mdsal</span><span class="crayon-o">-</span><span class="crayon-v">broker</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">feature</span><span class="crayon-o">&gt;</span></p><p class="crayon-line" id="crayon-56bcd202b0b1f412546369-7"><span class="crayon-o">&lt;</span><span class="crayon-v">bundle</span><span class="crayon-o">&gt;</span><span class="crayon-v">mvn</span><span class="crayon-o">:</span><span class="crayon-v">org</span><span class="crayon-e">.sdnhub</span><span class="crayon-e">.odl</span><span class="crayon-e">.tutorial</span><span class="crayon-e">.tapapp</span><span class="crayon-o">/</span><span class="crayon-e">tapapp</span><span class="crayon-o">-</span><span class="crayon-e">impl</span><span class="crayon-o">/</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">tapapp</span><span class="crayon-e">.version</span><span class="crayon-sy">}</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">bundle</span><span class="crayon-o">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b1f412546369-8"><span class="crayon-o">&lt;</span><span class="crayon-v">bundle</span><span class="crayon-o">&gt;</span><span class="crayon-v">mvn</span><span class="crayon-o">:</span><span class="crayon-v">org</span><span class="crayon-e">.sdnhub</span><span class="crayon-e">.odl</span><span class="crayon-e">.tutorial</span><span class="crayon-e">.tapapp</span><span class="crayon-o">/</span><span class="crayon-e">tapapp</span><span class="crayon-o">-</span><span class="crayon-e">model</span><span class="crayon-o">/</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">tapapp</span><span class="crayon-e">.version</span><span class="crayon-sy">}</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">bundle</span><span class="crayon-o">&gt;</span></p><p class="crayon-line" id="crayon-56bcd202b0b1f412546369-9"><span class="crayon-o">&lt;</span><span class="crayon-e">configfile </span><span class="crayon-v">finalname</span><span class="crayon-o">=</span><span class="crayon-s">"etc/opendaylight/karaf/${tapapp.configfile}"</span><span class="crayon-o">&gt;</span><span class="crayon-v">mvn</span><span class="crayon-o">:</span><span class="crayon-v">org</span><span class="crayon-e">.sdnhub</span><span class="crayon-e">.odl</span><span class="crayon-e">.tutorial</span><span class="crayon-e">.tapapp</span><span class="crayon-o">/</span><span class="crayon-e">tapapp</span><span class="crayon-o">-</span><span class="crayon-e">config</span><span class="crayon-o">/</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">tapapp</span><span class="crayon-e">.version</span><span class="crayon-sy">}</span><span class="crayon-o">/</span><span class="crayon-v">xml</span><span class="crayon-o">/</span><span class="crayon-v">config</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">configfile</span><span class="crayon-o">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b1f412546369-10"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">feature</span><span class="crayon-o">&gt;</span></p><p class="crayon-line" id="crayon-56bcd202b0b1f412546369-11"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>The above feature description dictates that the installation of the sdnhub-tutorial-tapapp features requires us to load all the following. Even if one of them cannot be loaded, the feature hangs:</p>
<ol>
<li>OpenFlow plugin,</li>
<li>MD-SAL data broker,</li>
<li>TapApp model,</li>
<li>TapApp implementation,</li>
<li>TapApp configuration for the config subsystem</li>
</ol>
<p>If you create a new application, do not forget to include its description in the feature file.</p>
<h3><span id="23_Config_subsystem">2.3 Config subsystem</span></h3>
<p>OpenDaylight has a built-in feature called the config subsystem that instantiates bundles in the appropriate ordering with the MD-SAL right dependencies pre-loaded. This is achieved by having a configuration file, typically named with a number in the beginning to denote the order of loading. </p>
<p>For instance, the tap application has a 
			<span id="crayon-56bcd202b0b2a416262952" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-cn">50</span><span class="crayon-o">-</span><span class="crayon-v">tapapp</span><span class="crayon-o">-</span><span class="crayon-v">config</span><span class="crayon-sy">.</span><span class="crayon-v">xml</span></span></span> that is added to the karaf feature. This xml file is read at run-time and appropriate dependencies are injected.</p>
<p>To get your new application to load correctly, this 
			<span id="crayon-56bcd202b0b33056217931" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">config</span><span class="crayon-sy">.</span><span class="crayon-v">xml</span></span></span>, and the config augmentation with the implementation YANG file (e.g., 
			<span id="crayon-56bcd202b0b3b308315581" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">tap</span><span class="crayon-o">-</span><span class="crayon-v">impl</span><span class="crayon-sy">.</span><span class="crayon-v">yang</span></span></span>) needs to have the right namespace, package name, and artifact id.</p>
<h3><span id="24_Mininet">2.4 Mininet</span></h3>
<p>Mininet is a network emulation software that works with Open vSwitch to create a set of OpenFlow switches connected to virtual hosts and interconnected in varying topologies. The tutorial VM has mininet installed already and can be kicked off in a new terminal with the following command:</p>

		<div id="crayon-56bcd202b0b44370781675" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0b44370781675-1"><span class="crayon-v">ubuntu</span><span class="crayon-sy">@</span><span class="crayon-v">sdnhubvm</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-sy">$</span><span class="crayon-e">sudo </span><span class="crayon-v">mn</span><span class="crayon-o">--</span><span class="crayon-e">topo </span><span class="crayon-v">single</span><span class="crayon-sy">,</span><span class="crayon-cn">3</span><span class="crayon-o">--</span><span class="crayon-v">mac</span><span class="crayon-o">--</span><span class="crayon-st">switch</span><span class="crayon-v">ovsk</span><span class="crayon-sy">,</span><span class="crayon-v">protocols</span><span class="crayon-o">=</span><span class="crayon-v">OpenFlow13</span><span class="crayon-o">--</span><span class="crayon-e">controller </span><span class="crayon-v">remote</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>You will now see a mininet CLI prompt after starting 3 hosts and 1 switch. The switch also attempts connect to a remote controller. Since we started OpenDaylight, you should also see several lines written to the karaf console once the switch connects to it.</p>
<p>You can begin a ping between two of the hosts. However, the ping will fail because there is no intelligence in the switch to learn the MAC addresses of each host and forward traffic to the correct switch ports.</p>

		<div id="crayon-56bcd202b0b4d120834159" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0b4d120834159-1"><span class="crayon-v">mininet</span><span class="crayon-o">&gt;</span><span class="crayon-e">h1 </span><span class="crayon-e">ping </span><span class="crayon-e">h2</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b4d120834159-2"><span class="crayon-i">PING</span><span class="crayon-cn">10.0.0.2</span><span class="crayon-sy">(</span><span class="crayon-cn">10.0.0.2</span><span class="crayon-sy">)</span><span class="crayon-cn">56</span><span class="crayon-sy">(</span><span class="crayon-cn">84</span><span class="crayon-sy">)</span><span class="crayon-e">bytes </span><span class="crayon-e">of </span><span class="crayon-v">data</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56bcd202b0b4d120834159-3"><span class="crayon-i">From</span><span class="crayon-cn">10.0.0.1</span><span class="crayon-v">icmp_seq</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-e">Destination </span><span class="crayon-e">Host </span><span class="crayon-e">Unreachable</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b4d120834159-4"><span class="crayon-i">From</span><span class="crayon-cn">10.0.0.1</span><span class="crayon-v">icmp_seq</span><span class="crayon-o">=</span><span class="crayon-cn">2</span><span class="crayon-e">Destination </span><span class="crayon-e">Host </span><span class="crayon-i">Unreachable</span></p><p class="crayon-line" id="crayon-56bcd202b0b4d120834159-5"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Let us add that intelligence by installing the sdnhub-tutorial-learning-switch feature. You will notice that after doing this the ping will start succeeding.</p>

		<div id="crayon-56bcd202b0b55814052681" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0b55814052681-1"><span class="crayon-v">opendaylight</span><span class="crayon-o">-</span><span class="crayon-v">user</span><span class="crayon-sy">@</span><span class="crayon-v">root</span><span class="crayon-o">&gt;</span><span class="crayon-v">feature</span><span class="crayon-o">:</span><span class="crayon-e">install </span><span class="crayon-v">sdnhub</span><span class="crayon-o">-</span><span class="crayon-v">tutorial</span><span class="crayon-o">-</span><span class="crayon-v">learning</span><span class="crayon-o">-</span><span class="crayon-st">switch</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>



		<div id="crayon-56bcd202b0b5e233754530" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0b5e233754530-1"><span class="crayon-v">mininet</span><span class="crayon-o">&gt;</span><span class="crayon-e">h1 </span><span class="crayon-e">ping </span><span class="crayon-e">h2</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b5e233754530-2"><span class="crayon-i">From</span><span class="crayon-cn">10.0.0.1</span><span class="crayon-v">icmp_seq</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-e">Destination </span><span class="crayon-e">Host </span><span class="crayon-e">Unreachable</span></p><p class="crayon-line" id="crayon-56bcd202b0b5e233754530-3"><span class="crayon-i">From</span><span class="crayon-cn">10.0.0.1</span><span class="crayon-v">icmp_seq</span><span class="crayon-o">=</span><span class="crayon-cn">2</span><span class="crayon-e">Destination </span><span class="crayon-e">Host </span><span class="crayon-v">Unreachable</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>ping still fails because there is no default rule in the switch to send packet-in messages to the controller. Let&#x2019;s add that and verify the ping</p>

		<div id="crayon-56bcd202b0b66363000828" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0b66363000828-1"><span class="crayon-v">mininet</span><span class="crayon-o">&gt;</span><span class="crayon-e">s1 </span><span class="crayon-v">ovs</span><span class="crayon-o">-</span><span class="crayon-e">ofctl </span><span class="crayon-v">add</span><span class="crayon-o">-</span><span class="crayon-e">flow </span><span class="crayon-v">tcp</span><span class="crayon-o">:</span><span class="crayon-cn">127.0.0.1</span><span class="crayon-o">:</span><span class="crayon-cn">6634</span><span class="crayon-o">-</span><span class="crayon-e">OOpenFlow13 </span><span class="crayon-v">priority</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-v">action</span><span class="crayon-o">=</span><span class="crayon-v">output</span><span class="crayon-o">:</span><span class="crayon-e">controller</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b66363000828-2"><span class="crayon-v">mininet</span><span class="crayon-o">&gt;</span><span class="crayon-e">h1 </span><span class="crayon-e">ping </span><span class="crayon-i">h2</span></p><p class="crayon-line" id="crayon-56bcd202b0b66363000828-3"><span class="crayon-cn">64</span><span class="crayon-e">bytes </span><span class="crayon-i">from</span><span class="crayon-cn">10.0.0.2</span><span class="crayon-o">:</span><span class="crayon-v">icmp_req</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-v">ttl</span><span class="crayon-o">=</span><span class="crayon-cn">64</span><span class="crayon-v">time</span><span class="crayon-o">=</span><span class="crayon-cn">94.1</span><span class="crayon-i">ms</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b66363000828-4"><span class="crayon-cn">64</span><span class="crayon-e">bytes </span><span class="crayon-i">from</span><span class="crayon-cn">10.0.0.2</span><span class="crayon-o">:</span><span class="crayon-v">icmp_req</span><span class="crayon-o">=</span><span class="crayon-cn">2</span><span class="crayon-v">ttl</span><span class="crayon-o">=</span><span class="crayon-cn">64</span><span class="crayon-v">time</span><span class="crayon-o">=</span><span class="crayon-cn">21.2</span><span class="crayon-i">ms</span></p><p class="crayon-line" id="crayon-56bcd202b0b66363000828-5"><span class="crayon-cn">64</span><span class="crayon-e">bytes </span><span class="crayon-i">from</span><span class="crayon-cn">10.0.0.2</span><span class="crayon-o">:</span><span class="crayon-v">icmp_req</span><span class="crayon-o">=</span><span class="crayon-cn">3</span><span class="crayon-v">ttl</span><span class="crayon-o">=</span><span class="crayon-cn">64</span><span class="crayon-v">time</span><span class="crayon-o">=</span><span class="crayon-cn">21.9</span><span class="crayon-v">ms</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>You will have noticed that the pings are actually taking longer than they should for a switch (typically sub-1ms) for such a simple single-switch topology. This is because the controller is currently functioning in &#x201C;Hub&#x201D; mode and flooding every packet in the software.</p>
<p>In the next few sections, we will learn enough programming aspects to convert the hub into a switch and also build other functionality in the platform.</p>
<h2><span id="3_Introduction_to_OpenDaylight_architecture">3. Introduction to OpenDaylight architecture</span></h2>
<p>Before we jump into the code, a high-level overview of the OpenDaylight controller is in order. OpenDaylight is a modular platform with most modules reusing some common services and interfaces. Each module is developed under a multi-vendor sub-project. You can find the list of projects <a href="https://wiki.opendaylight.org/view/Main_Page#Projects"><b>here</b></a>.<br>
<a href="http://sdnhub.org/wp-content/uploads/2013/11/opendaylight_helium.jpg"><img class="alignnone wp-image-924" src="http://sdnhub.org/wp-content/uploads/2013/11/700x492xopendaylight_helium-1024x719.jpg.pagespeed.ic.AEEwoRopbL.jpg" alt="opendaylight_helium" width="700"></a></p>
<p>The idea with building applications on the OpenDaylight platform is to leverage functionality in other platform bundles, each of which export important services through Java interfaces. Many of these services are build in a provider-consumer model over an adaptation layer called MD-SAL.</p>
<p><a href="http://sdnhub.org/wp-content/uploads/2015/06/MD-SAL-data-store-at-the-core.png"><img src="http://sdnhub.org/wp-content/uploads/2015/06/Nx300xMD-SAL-data-store-at-the-core.png.pagespeed.ic.xnDYiTgkNj.png" alt="MD-SAL data store at the core" class="alignright wp-image-1168"></a>Programming in OpenDaylight involves adopting the Model-View-Control approach for SDN application development:</p>
<ol>
<li>YANG Model for data, RPC and notifications</li>
<li>REST API view autogenerated and accessible through RESTconf</li>
<li>Java Implementation coded to handle data changes, notifications and RPC call backs</li>
</ol>
<h3><span id="31_Model-driven_SAL_MD-SAL">3.1 Model-driven SAL (MD-SAL)</span></h3>
<p><a href="https://wiki.opendaylight.org/view/OpenDaylight_Controller:MD-SAL:FAQ">Model-driven Service Adaptation Layer (MD-SAL)</a>, is the kernel of the platform where the different layers and modules are interconnected through well-defined API. Here are some important notes about MD-SAL:</p>
<ul>
<li>Each API is generated from models defined in the YANG language during build time and loaded into the controller when the model bundle is loaded onto the Karaf platform.</li>
<li>At the core of the platform is a logically centralized data store that keeps relevant state in two buckets &#x2013; 1) config data store, 2) operational data store.</li>
<li>All event calls and data go from &#x201C;provider&#x201D; to a &#x201C;consumer&#x201D; through this central datastore using MD-SAL mapping logic.</li>
</ul>
<h3><span id="32_YANG_model">3.2 YANG model</span></h3>
<p>OpenDaylight heavily uses YANG to model any data, notification or remote procedure call (RPC) that goes between different modules. For those unfamiliar with YANG, we recommend going over the <a href="http://www.slideshare.net/tailfsystems/netconf-yang-tutorial">YANG tutorial</a> by Tail-F systems. In a nutshell, YANG is a language for describing the basic structure of some application data that is stored in a tree hierarchy within containers.</p>
<p>As an example, here is an excerpt of the YANG model for storing nodes (i.e., switches) and node-connectors (i.e., interfaces or ports) defined within 
			<span id="crayon-56bcd202b0b73010463476" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">opendaylight</span><span class="crayon-o">-</span><span class="crayon-v">inventory</span><span class="crayon-sy">.</span><span class="crayon-v">yang</span></span></span>:</p>

		<div id="crayon-56bcd202b0b7c407621081" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0b7c407621081-1"><span class="crayon-e">module</span><span class="crayon-e">opendaylight</span><span class="crayon-o">-</span><span class="crayon-e">inventory</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b7c407621081-2"><span class="crayon-t">namespace</span><span class="crayon-s">"urn:opendaylight:inventory"</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0b7c407621081-3"><span class="crayon-e">container</span><span class="crayon-e">nodes</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b7c407621081-4"><span class="crayon-e">list</span><span class="crayon-e">node</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56bcd202b0b7c407621081-5"><span class="crayon-i">key</span><span class="crayon-s">"id"</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b7c407621081-6"><span class="crayon-e">leaf</span><span class="crayon-e">id</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56bcd202b0b7c407621081-7"><span class="crayon-e">type </span><span class="crayon-v">node</span><span class="crayon-o">-</span><span class="crayon-v">id</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0b7c407621081-9"><span class="crayon-i">list</span><span class="crayon-s">"node-connector"</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b7c407621081-10"><span class="crayon-i">key</span><span class="crayon-s">"id"</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0b7c407621081-11"><span class="crayon-e">leaf</span><span class="crayon-e">id</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b7c407621081-12"><span class="crayon-e">type </span><span class="crayon-v">node</span><span class="crayon-o">-</span><span class="crayon-v">connector</span><span class="crayon-o">-</span><span class="crayon-v">id</span><span class="crayon-sy">;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Once this model is provided to the MD-SAL platform by appropriately including in the feature file and loading in Karaf, MD-SAL creates two data stores for this module: 1) Config data store, 2) Operational data store. The config data store is persisted by default across different runs of the controller (The config data store is stored in snapshots and journals directories in the karaf run location).</p>
<h3><span id="33_Instance_identifiers">3.3 Instance identifiers</span></h3>
<p>An application or external end-user can post data, either through MD-SAL transaction or RESTconf, to this data store. The individual objects are stored in a parent-child hierarchy and accessible through YANG instance identifiers. For the above YANG model, let&#x2019;s say there is a node-connector &#x201C;openflow:1:1&#x2033; that is stored in the data store. One can access details of that node-connector by creating an instance identifier as follows:</p>

		<div id="crayon-56bcd202b0b86570602064" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0b86570602064-1"><span class="crayon-e">InstanceIdentifier </span><span class="crayon-v">ncIID</span><span class="crayon-o">=</span><span class="crayon-v">InstanceIdentifier</span><span class="crayon-sy">.</span><span class="crayon-e">builder</span><span class="crayon-sy">(</span><span class="crayon-v">Nodes</span><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b86570602064-2"><span class="crayon-sy">.</span><span class="crayon-e">child</span><span class="crayon-sy">(</span><span class="crayon-v">Node</span><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-sy">,</span><span class="crayon-r">new</span><span class="crayon-e">NodeKey</span><span class="crayon-sy">(</span><span class="crayon-r">new</span><span class="crayon-e">NodeId</span><span class="crayon-sy">(</span><span class="crayon-s">"openflow:1"</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56bcd202b0b86570602064-3"><span class="crayon-sy">.</span><span class="crayon-e">child</span><span class="crayon-sy">(</span><span class="crayon-v">NodeConnector</span><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-sy">,</span><span class="crayon-r">new</span><span class="crayon-e">NodeConnectorKey</span><span class="crayon-sy">(</span><span class="crayon-r">new</span><span class="crayon-e">NodeConnectorId</span><span class="crayon-sy">(</span><span class="crayon-s">"openflow:1:1"</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b86570602064-4"><span class="crayon-sy">.</span><span class="crayon-e">build</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Or, it could be accessed through RESTconf by going to the URL <a href="http://localhost:8181/restconf/config/opendaylight-inventory:nodes/node/openflow:1/node-connector/openflow:1:1">http://localhost:8181/restconf/config/opendaylight-inventory:nodes/node/openflow:1/node-connector/openflow:1:1</a>, where the keyword &#x201C;opendaylight-inventory&#x201D; corresponds to the namespace of that module, and &#x201C;nodes&#x201D; corresponds to the container at the root level of the tree.</p>
<p>Useful tip: In case you are provided with an instance identifier, it is possible to extract the instance identifier or key of the parent objects by performing firstKeyOf() or firstIdentifierOf() as follows:</p>

		<div id="crayon-56bcd202b0b90518064546" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0b90518064546-1"><span class="crayon-e">InstanceIdentifier </span><span class="crayon-v">nodeIID</span><span class="crayon-o">=</span><span class="crayon-v">ncIID</span><span class="crayon-sy">.</span><span class="crayon-e">firstIdentifierOf</span><span class="crayon-sy">(</span><span class="crayon-v">Node</span><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b90518064546-2"><span class="crayon-e">NodeId </span><span class="crayon-v">nodeId</span><span class="crayon-o">=</span><span class="crayon-v">ncIID</span><span class="crayon-sy">.</span><span class="crayon-e">firstKeyOf</span><span class="crayon-sy">(</span><span class="crayon-v">Node</span><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-sy">,</span><span class="crayon-v">NodeKey</span><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getId</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


<h3><span id="34_Data_store_Transactions">3.4 Data store Transactions</span></h3>
<p>Once an instance identifier is created, a read or write transaction can be performed to that location in the data store using the DataBroker service. There are two classes (viz., WriteTransaction and ReadOnlyTransaction) that can help you with this.</p>
<p>Let&#x2019;s say we want to write a NodeConnector object to the data store, we use the following code:</p>

		<div id="crayon-56bcd202b0b98376770227" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0b98376770227-1"><span class="crayon-e">WriteTransaction </span><span class="crayon-v">modification</span><span class="crayon-o">=</span><span class="crayon-v">dataBroker</span><span class="crayon-sy">.</span><span class="crayon-e">newWriteOnlyTransaction</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b98376770227-2"><span class="crayon-v">modification</span><span class="crayon-sy">.</span><span class="crayon-e">merge</span><span class="crayon-sy">(</span><span class="crayon-v">LogicalDataStoreType</span><span class="crayon-sy">.</span><span class="crayon-v">CONFIGURATION</span><span class="crayon-sy">,</span><span class="crayon-v">ncIID</span><span class="crayon-sy">,</span><span class="crayon-v">nodeConnector</span><span class="crayon-sy">,</span><span class="crayon-t">true</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0b98376770227-3"><span class="crayon-v">CheckedFuture</span><span class="crayon-o">&lt;</span><span class="crayon-t">Void</span><span class="crayon-sy">,</span><span class="crayon-v">TransactionCommitFailedException</span><span class="crayon-o">&gt;</span><span class="crayon-v">commitFuture</span><span class="crayon-o">=</span><span class="crayon-v">modification</span><span class="crayon-sy">.</span><span class="crayon-e">submit</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b98376770227-4"><span class="crayon-st">try</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56bcd202b0b98376770227-5"><span class="crayon-v">commitFuture</span><span class="crayon-sy">.</span><span class="crayon-e">checkedGet</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0b98376770227-6"><span class="crayon-sy">}</span><span class="crayon-st">catch</span><span class="crayon-sy">(</span><span class="crayon-i">Exception</span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56bcd202b0b98376770227-7"><span class="crayon-v">modification</span><span class="crayon-sy">.</span><span class="crayon-e">cancel</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Most transactions return a Java Future object. It is important to check on the status of this Future object to see if the transaction succeeded and if there are any specific outputs generated.</p>
<p>Let&#x2019;s say we want to read a NodeConnector object from the data store, we use the following code:</p>

		<div id="crayon-56bcd202b0ba2319323905" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0ba2319323905-1"><span class="crayon-e">ReadOnlyTransaction </span><span class="crayon-v">readTransaction</span><span class="crayon-o">=</span><span class="crayon-v">dataBroker</span><span class="crayon-sy">.</span><span class="crayon-e">newReadOnlyTransaction</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ba2319323905-2"><span class="crayon-st">try</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56bcd202b0ba2319323905-3"><span class="crayon-e">Optional </span><span class="crayon-v">optionalData</span><span class="crayon-o">=</span><span class="crayon-v">readTransaction</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-v">LogicalDataStoreType</span><span class="crayon-sy">.</span><span class="crayon-v">CONFIGURATION</span><span class="crayon-sy">,</span><span class="crayon-v">ncIID</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ba2319323905-4"><span class="crayon-st">if</span><span class="crayon-sy">(</span><span class="crayon-v">optionalData</span><span class="crayon-sy">.</span><span class="crayon-e">isPresent</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56bcd202b0ba2319323905-5"><span class="crayon-e">NodeConnector </span><span class="crayon-v">nc</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-v">NodeConnector</span><span class="crayon-sy">)</span><span class="crayon-v">optionalData</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0ba2319323905-7"><span class="crayon-sy">}</span><span class="crayon-st">catch</span><span class="crayon-sy">(</span><span class="crayon-v">ExecutionException</span><span class="crayon-o">|</span><span class="crayon-i">InterruptedException</span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ba2319323905-8"><span class="crayon-v">readTransaction</span><span class="crayon-sy">.</span><span class="crayon-e">close</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Each transaction consumes a certain amount of CPU resources and further more when there is a cluster consistency being enforced. This can limit the number of transactions per second. In OpenDaylight MD-SAL, one can perform batch transactions and transaction chains to get better read and write perform. These are out of scope of this tutorial.</p>
<h3><span id="35_Advanced_YANG_operations">3.5 Advanced YANG operations</span></h3>
<p>Besides basic data models as shown above, it is possible to define following constructs in YANG models to model additional services between modules:</p>
<ul>
<li><b>Augmentations</b>: Unless specified otherwise, YANG models can be expanded, in a new namespace, to add extra data within an existing data model. Note that the augmentations must be declared at build time.
<ul>
<li>
For instance, OpenFlow rules are augmented over the Node object shown above to create the flow table augmentation. Here is how the augmented tree looks like.
</li>
</ul>
</li>
</ul>
<p><a href="http://sdnhub.org/wp-content/uploads/2013/11/odl-restconf-inventory-nodes.png"><img class="aligncenter wp-image-926 size-large" src="http://sdnhub.org/wp-content/uploads/2013/11/1024x467xodl-restconf-inventory-nodes-1024x467.png.pagespeed.ic.yQflkRKZaf.jpg" alt="odl-restconf-inventory-nodes" width="1024"></a></p>
<ul>
<li><b>Notifications</b>: These are also called as YANG-notifications. It is used to oublish one or more notifications with modeled-data to registered listeners. Defining a notification in YANG generates Java interfaces that potential listeners can &#x201C;implement&#x201D; and receive the appropriate callback. 
<ul>
<li>
In the tap application in our sample project, we illustrate listening to the node and node-connector updates and removal.Following is code written to listen for notifications defined in the 
			<span id="crayon-56bcd202b0bad921577829" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">opendaylight</span><span class="crayon-o">-</span><span class="crayon-v">inventory</span><span class="crayon-sy">.</span><span class="crayon-v">yang</span></span></span>. 
			<span id="crayon-56bcd202b0bb5847372052" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">OpendaylightInventoryListener</span></span></span> is an autogenerated interface that defines the callback function called 
			<span id="crayon-56bcd202b0bbd248928623" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-e">onNodeUpdated</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span>.
</li>
</ul>
</li>
</ul>


		<div id="crayon-56bcd202b0bc5629267043" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0bc5629267043-1"><span class="crayon-m">public</span><span class="crayon-t">class</span><span class="crayon-e">TapProvider </span><span class="crayon-r">implements</span><span class="crayon-v">OpendaylightInventoryListener</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56bcd202b0bc5629267043-3"><span class="crayon-m">public</span><span class="crayon-e">TapAppProvider</span><span class="crayon-sy">(</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0bc5629267043-4"><span class="crayon-v">notificationService</span><span class="crayon-sy">.</span><span class="crayon-e">registerNotificationListener</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0bc5629267043-7"><span class="crayon-sy">@</span><span class="crayon-e">Override</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0bc5629267043-8"><span class="crayon-m">public</span><span class="crayon-t">void</span><span class="crayon-e">onNodeUpdated</span><span class="crayon-sy">(</span><span class="crayon-e">NodeUpdated </span><span class="crayon-v">nodeUpdated</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56bcd202b0bc5629267043-9"><span class="crayon-c">//Automatically called when node object is updated&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


<ul>
<li><b>Remote Procedure Call (RPC)</b>: MD-SAL allows one module to perform a procedure call with input/output to another module, without worrying about who the actual provider for that procedure is. MD-SAL handles the appropriate routing to map the caller and the callee. 
<ul>
<li>In the tap application in our sample project, we illustrate performing a RPC call to clear all OpenFlow rules on the underlying switch. Unlike a notification, RPC calls have a unique recipient.Following is code written to perform a RPC call defined in the 
			<span id="crayon-56bcd202b0bcf185237618" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">sal</span><span class="crayon-o">-</span><span class="crayon-v">flow</span><span class="crayon-sy">.</span><span class="crayon-v">yang</span></span></span> part of the OpenFlowPlugin project. First step is to object a reference to the service project, and second step is to perform the YANG-defined function call with the appropriate input.
</li>
</ul>
</li>
</ul>


		<div id="crayon-56bcd202b0bd7069204722" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0bd7069204722-1"><span class="crayon-m">public</span><span class="crayon-t">class</span><span class="crayon-i">TapProvider</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56bcd202b0bd7069204722-3"><span class="crayon-m">public</span><span class="crayon-e">TapAppProvider</span><span class="crayon-sy">(</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0bd7069204722-4"><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">salFlowService</span><span class="crayon-o">=</span><span class="crayon-v">rpcProviderRegistry</span><span class="crayon-sy">.</span><span class="crayon-e">getRpcService</span><span class="crayon-sy">(</span><span class="crayon-v">SalFlowService</span><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56bcd202b0bd7069204722-7"><span class="crayon-m">public</span><span class="crayon-t">void</span><span class="crayon-e">procedure1</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0bd7069204722-8"><span class="crayon-e">RemoveFlowInputBuilder </span><span class="crayon-v">flowBuilder</span><span class="crayon-o">=</span><span class="crayon-r">new</span><span class="crayon-e">RemoveFlowInputBuilder</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0bd7069204722-9"><span class="crayon-v">flowBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">setBarrier</span><span class="crayon-sy">(</span><span class="crayon-t">true</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0bd7069204722-10"><span class="crayon-v">flowBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">setNode</span><span class="crayon-sy">(</span><span class="crayon-v">nodeRef</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0bd7069204722-11"><span class="crayon-c">//RPC to SAL Flow Service in OpenFlowPlugin</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0bd7069204722-12"><span class="crayon-v">salFlowService</span><span class="crayon-sy">.</span><span class="crayon-e">removeFlow</span><span class="crayon-sy">(</span><span class="crayon-v">flowBuilder</span><span class="crayon-sy">.</span><span class="crayon-e">build</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


<h3><span id="36_Northbound_and_Southbound_plugins">3.6 Northbound and Southbound plugins</span></h3>
<p><a href="http://sdnhub.org/wp-content/uploads/2015/06/generic-controller-architecture.png"><img src="http://sdnhub.org/wp-content/uploads/2015/06/400xNxgeneric-controller-architecture.png.pagespeed.ic.SMnkyKTgIe.png" alt="generic-controller-architecture" width="400" class="alignright size-full wp-image-1257"></a>Typically plugins are code abstractions used to integrate OpenDaylight with external systems. Following are some of the common plugins that app developers need to be familiar with.</p>
<ul>
<li><b>Northbound plugins</b>: The two most commonly used northbound plugins are RESTconf (enabled by installing 
			<span id="crayon-56bcd202b0be1075775935" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">restconf</span></span></span>) and NETCONF (enabled by installing 
			<span id="crayon-56bcd202b0be9118681929" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">netconf</span><span class="crayon-o">-</span><span class="crayon-v">mdsal</span></span></span> feature) interface to MD-SAL. Both of these can be used in combination with an intent layer.
</li>
<li><b>Southbound plugins</b>: OpenFlow plugin (enabled by installing 
			<span id="crayon-56bcd202b0bf1429846800" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">openflowplugin</span><span class="crayon-o">-</span><span class="crayon-v">southbound</span></span></span> feature) and NETCONF connector (enabled by installing 
			<span id="crayon-56bcd202b0bfa644622034" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">netconf</span><span class="crayon-o">-</span><span class="crayon-v">connector</span><span class="crayon-o">-</span><span class="crayon-v">all</span></span></span> feature) are two commonly used southbound plugins.
<ul>
<li>The rest of the tutorial builds applications using OpenFlow plugin, wherein OpenFlow FLOW_MOD, PACKET_IN, PACKET_OUT and other discovery operations are supported as YANG modeled data changes, notifications or RPC calls.</li>
<li>For an example of an application or example using NETCONF connector, look at the post on <a href="http://sdnhub.org/tutorials/opendaylight-tutorial/experimenting-with-netconf-connector-in-opendaylight/">experimenting with NETCONF</a> using the 
			<span id="crayon-56bcd202b0c03879644231" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">netconf</span><span class="crayon-o">-</span><span class="crayon-v">exercise</span></span></span> application.</li>
</ul>
</li>
</ul>
<h2><span id="4_Basic_steps_to_writing_an_OpenDayLight_Application">4. Basic steps to writing an OpenDayLight Application</span></h2>
<p>For beginners, we recommend using Eclipse for viewing and editing the source code, and command-line for compiling and running the controller. Open Eclipse using the desktop shortcut.</p>
<p>We have already setup the Eclipse environment for you. But, if you wish to do it from scratch, you should follow <a href="https://wiki.opendaylight.org/view/OpenDaylight_Controller:Eclipse_CLI_Setup">these instructions</a> to setup Maven-Eclipse integration. After that you can and go to File-&gt;Import. Choose &#x2018;Maven &gt; Existing Maven Projects&#x2019;. On the next screen, choose as the Root Directory ~/ubuntu/SDNHub_Opendaylight_Tutorial. Select &#x2018;learning-switch&#x2019; and &#x2018;tapapp&#x2019; implementation pom.xml that it finds, click on &#x2018;Add project(s) to working set&#x2019; below, and click &#x2018;Finish&#x2019;.</p>
<p>Once Eclipse is setup, you should now see &#x2018;learning-switch&#x2019; and &#x2018;tapapp&#x2019; implementation folders on your Project explorer pane. Double-click on one of the two and src/main/java -&gt; org.sdnhub.odl.tutorial.[learning-switch or tapapp].impl and walk-through through the code.</p>
<h3><span id="Step_1_Define_data_model">Step 1: Define data model</span></h3>
<p>The first step to developing an application with the OpenDaylight framework is to visualize the state maintained by your application and modeling that in the YANG language.</p>
<p>If you inspect 
			<span id="crayon-56bcd202b0c0d155931352" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">tapapp</span><span class="crayon-o">/</span><span class="crayon-v">model</span><span class="crayon-o">/</span><span class="crayon-v">src</span><span class="crayon-o">/</span><span class="crayon-v">main</span><span class="crayon-o">/</span><span class="crayon-v">yang</span><span class="crayon-o">/</span><span class="crayon-v">tap</span><span class="crayon-sy">.</span><span class="crayon-v">yang</span></span></span>, you will see an example YANG module, where the container for archiving the tap configurations is defined. The container has a list within it to track each tap configuration. Each tap configuration contains information about the source, sink, type of traffic to capture, src/dst IP address, and src/dst MAC address.</p>
<p>Once you add the model, you can build the project and run Karaf to immediately verify if your model is sufficient for your application. For instance, when we run karaf, even without any implementation or event handlers defined, you will be able to store data in the data store as follows:</p>

		<div id="crayon-56bcd202b0c16230886906" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0c16230886906-1"><span class="crayon-v">ubuntu</span><span class="crayon-sy">@</span><span class="crayon-v">sdnhubvm</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-sy">$</span><span class="crayon-v">curl</span><span class="crayon-o">-</span><span class="crayon-i">H</span><span class="crayon-s">"Content-Type:application/json"</span><span class="crayon-o">-</span><span class="crayon-i">X</span><span class="crayon-v">PUT</span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-s">'{"tap-spec":</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c16230886906-2"><span class="crayon-s"> {"tap":[</span></p><p class="crayon-line" id="crayon-56bcd202b0c16230886906-3"><span class="crayon-s">&#xA0;&#xA0; {"id":"1",</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c16230886906-4"><span class="crayon-s">&#xA0;&#xA0;&#xA0;&#xA0;"node":"openflow:1",</span></p><p class="crayon-line" id="crayon-56bcd202b0c16230886906-5"><span class="crayon-s">&#xA0;&#xA0;&#xA0;&#xA0;"traffic-match":"HTTP",</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c16230886906-6"><span class="crayon-s">&#xA0;&#xA0;&#xA0;&#xA0;"src-node-connector":["openflow:1:1"],</span></p><p class="crayon-line" id="crayon-56bcd202b0c16230886906-7"><span class="crayon-s">&#xA0;&#xA0;&#xA0;&#xA0;"sink-node-connector":["openflow:1:2"]</span></p><p class="crayon-line" id="crayon-56bcd202b0c16230886906-11"><span class="crayon-s">}'</span><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-c">//localhost:8181/restconf/config/tap:tap-spec</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>You can open a browser and inspect the data store at <a href="http://localhost:8181/restconf/config/tap:tap-spec">http://localhost:8181/restconf/config/tap:tap-spec</a>. This is a big advantage with MD-SAL and developing applications with OpenDaylight, wherein you can directly access the data store using REST right after a model is defined and includes in the runtime of karaf. Here is a <a href="http://sdnhub.org/downloads/tutorials/opendaylight/tutorial-postman.json">postman collection</a> you can use for the tap creation and deletion. That collection also contains some sample OpenFlowPlugin REST calls for flow programming.</p>
<h3><span id="Step_2_Activation">Step 2: Activation</span></h3>
<p>In OpenDaylight, we add activation code within the 
			<span id="crayon-56bcd202b0c20534029380" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-e">createInstance</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span> method of the YANG generated implementation module class. For instance, if you look at the auto-generated 
			<span id="crayon-56bcd202b0c29748633180" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">TutorialTapAppModule</span><span class="crayon-sy">.</span><span class="crayon-v">java</span></span></span>, you will see the 
			<span id="crayon-56bcd202b0c31761207298" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-e">createInstance</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span> method with code written to create necessary helper classes. Since most of OpenDaylight applications will primarily interact with the MD-SAL, it is important to extract references to the following necessary services:</p>
<ol>
<li><b>DataBroker</b>: As mentioned earlier, this object is necessary for read or write transaction with the data store</li>
<li><b>NotificationProviderService</b>: This is the service to which any listener needs to register to receive YANG defined notifications</li>
<li><b>RpcProviderRegistry</b>: This service helps connect a RPC provider with the consumer by providing the consumer with an instance of the RPC interface.</li>
</ol>
<h3><span id="Step_3_Event_handlers_and_other_call_backs">Step 3: Event handlers and other call backs</span></h3>
<p>Once you have a model defined and the class activated, the application should perform one or more of the following, typically in the constructor of the helper class:</p>
<ol>
<li>register for data change notifications with the MD-SAL data broker to receive 
			<span id="crayon-56bcd202b0c3a129188302" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-e">onDataChanged</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span> callback</li>
<li>register for YANG notifications with the MD-SAL notification service to receive custom callbacks</li>
<li>register as a provider for certain RPC calls if this application is a provider</li>
<li>obtain access to the relevant RPC provider interfaces to make calls</li>
</ol>
<p>Then, the helper class will implement all necessary logic within the call back function for the event handlers, and RPC provider functions. The application can also publish notifications of its own to other listeners using the notificationProviderService.publish() call.</p>
<p>In the sample 
			<span id="crayon-56bcd202b0c43655059085" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">TutorialTapProvider</span><span class="crayon-sy">.</span><span class="crayon-v">java</span></span></span>, you can see the skeleton for the callback handler included along with some debug logs. Whenever you perform a tap config addition to the data store, you can see what is sent to the 
			<span id="crayon-56bcd202b0c4c197016158" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-e">onDataChanged</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span> callback.</p>
<h2><span id="5_Sample_application">5. Sample application</span></h2>
<h3><span id="51_Tap_application">5.1 Tap application</span></h3>
<p>The traffic monitoring tap application is a simple proactive flow programmer that deals with source, sinks and traffic types. We will follow the steps described earlier to build this application. The model of the tap configuration data was described earlier in <a href="http://sdnhub.org/tutorials/opendaylight/#Step_1_Define_data_model">Step 1</a>. Based on that model, we perform following to make the tap work:</p>
<ol>
<li>Extract header details from the tap object during the 
			<span id="crayon-56bcd202b0c54820204648" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-e">onDataChanged</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span> event handling</li>
<li>For each source-port, perform following steps to create a flow
<ol>
<li>Create match object using appropriate builders</li>
<li>Create action list with a list of actions specifying output to sink-port</li>
<li>Create flow object with match and action list. Write this flow object to the Flow table of the node</li>
</ol>
</li>
</ol>
<p>Note that the traffic type is a special enum field defined in the YANG model to allow user to specific important traffic types worth monitoring, like ARP, ICMP, DNS, DHCP, TCP, UDP. For converting the enum to actual values for the 
			<span id="crayon-56bcd202b0c5d007138944" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dl_type</span><span class="crayon-sy">,</span><span class="crayon-e">nw_proto </span><span class="crayon-st">and</span><span class="crayon-v">tp_port</span></span></span>, one can use the following switch statement:</p>

		<div id="crayon-56bcd202b0c65418015154" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0c65418015154-1"><span class="crayon-t">Integer</span><span class="crayon-v">dlType</span><span class="crayon-o">=</span><span class="crayon-t">null</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c65418015154-2"><span class="crayon-t">Short</span><span class="crayon-v">nwProto</span><span class="crayon-o">=</span><span class="crayon-t">null</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0c65418015154-3"><span class="crayon-t">Integer</span><span class="crayon-v">tpDst</span><span class="crayon-o">=</span><span class="crayon-t">null</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c65418015154-4"><span class="crayon-st">switch</span><span class="crayon-sy">(</span><span class="crayon-v">tap</span><span class="crayon-sy">.</span><span class="crayon-e">getTrafficMatch</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56bcd202b0c65418015154-5"><span class="crayon-st">case</span><span class="crayon-v">ARP</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c65418015154-6"><span class="crayon-v">dlType</span><span class="crayon-o">=</span><span class="crayon-cn">0x806</span><span class="crayon-sy">;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0c65418015154-7"><span class="crayon-st">case</span><span class="crayon-v">ICMP</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c65418015154-8"><span class="crayon-v">dlType</span><span class="crayon-o">=</span><span class="crayon-cn">0x800</span><span class="crayon-sy">;</span><span class="crayon-v">nwProto</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0c65418015154-9"><span class="crayon-st">case</span><span class="crayon-v">TCP</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c65418015154-10"><span class="crayon-v">dlType</span><span class="crayon-o">=</span><span class="crayon-cn">0x800</span><span class="crayon-sy">;</span><span class="crayon-v">nwProto</span><span class="crayon-o">=</span><span class="crayon-cn">6</span><span class="crayon-sy">;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0c65418015154-11"><span class="crayon-st">case</span><span class="crayon-v">HTTP</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c65418015154-12"><span class="crayon-v">dlType</span><span class="crayon-o">=</span><span class="crayon-cn">0x800</span><span class="crayon-sy">;</span><span class="crayon-v">nwProto</span><span class="crayon-o">=</span><span class="crayon-cn">6</span><span class="crayon-sy">;</span><span class="crayon-v">tpDst</span><span class="crayon-o">=</span><span class="crayon-cn">80</span><span class="crayon-sy">;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0c65418015154-13"><span class="crayon-st">case</span><span class="crayon-v">HTTPS</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c65418015154-14"><span class="crayon-v">dlType</span><span class="crayon-o">=</span><span class="crayon-cn">0x800</span><span class="crayon-sy">;</span><span class="crayon-v">nwProto</span><span class="crayon-o">=</span><span class="crayon-cn">6</span><span class="crayon-sy">;</span><span class="crayon-v">tpDst</span><span class="crayon-o">=</span><span class="crayon-cn">443</span><span class="crayon-sy">;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0c65418015154-15"><span class="crayon-st">case</span><span class="crayon-v">UDP</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c65418015154-16"><span class="crayon-v">dlType</span><span class="crayon-o">=</span><span class="crayon-cn">0x800</span><span class="crayon-sy">;</span><span class="crayon-v">nwProto</span><span class="crayon-o">=</span><span class="crayon-cn">0x11</span><span class="crayon-sy">;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0c65418015154-17"><span class="crayon-st">case</span><span class="crayon-v">DNS</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c65418015154-18"><span class="crayon-v">dlType</span><span class="crayon-o">=</span><span class="crayon-cn">0x800</span><span class="crayon-sy">;</span><span class="crayon-v">nwProto</span><span class="crayon-o">=</span><span class="crayon-cn">0x11</span><span class="crayon-sy">;</span><span class="crayon-v">tpDst</span><span class="crayon-o">=</span><span class="crayon-cn">53</span><span class="crayon-sy">;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0c65418015154-19"><span class="crayon-st">case</span><span class="crayon-v">DHCP</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c65418015154-20"><span class="crayon-v">dlType</span><span class="crayon-o">=</span><span class="crayon-cn">0x800</span><span class="crayon-sy">;</span><span class="crayon-v">nwProto</span><span class="crayon-o">=</span><span class="crayon-cn">0x11</span><span class="crayon-sy">;</span><span class="crayon-v">tpDst</span><span class="crayon-o">=</span><span class="crayon-cn">67</span><span class="crayon-sy">;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0c65418015154-21"><span class="crayon-st">default</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c65418015154-22"><span class="crayon-st">break</span><span class="crayon-sy">;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>In the skeleton code provided in the 
			<span id="crayon-56bcd202b0c6f045393856" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">TutorialTapProvider</span><span class="crayon-sy">.</span><span class="crayon-v">java</span></span></span> in the 
			<span id="crayon-56bcd202b0c77212037658" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">tapapp</span><span class="crayon-o">/</span><span class="crayon-v">impl</span></span></span> directory, you will see the activation code already included. You can complete the rest based on the above logic.</p>
<h3><span id="52_Learning_Switch">5.2 Learning Switch</span></h3>
<p>For the purposes of this tutorial, you should attempt to convert the hub learning switch to a MAC learning switch that programs flows. We encourage you to add the necessary code within 
			<span id="crayon-56bcd202b0c7f048070154" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">TutorialL2Forwarding</span><span class="crayon-sy">.</span><span class="crayon-v">java</span></span></span>. The main logic for hub and learning switch are <b><a href="http://sdnhub.org/tutorials/app-pseudo-code/">available here</a></b>. At a high-level here are the steps to perform:</p>
<ol>
<li>Ignore LLDP packets</li>
<li>If behaving as &#x201C;hub&#x201D;, perform a PACKET_OUT with FLOOD action</li>
<li>Else if behaving as &#x201C;learning switch&#x201D;,
<ol>
<li>Extract MAC addresses</li>
<li>Update MAC table with source MAC address</li>
<li>Lookup in MAC table for the target node connector of dst_mac
<ol>
<li>If found, perform FLOW_MOD for that dst_mac through the target node connector, and perform PACKET_OUT of this packet to target node connector</li>
<li>If not found, perform a PACKET_OUT with FLOOD action</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3><span id="53_Your_homework">5.3 Your homework</span></h3>
<ol>
<li>Complete the learning switch to perform flow programming such that the Open vSwitch switch &#x201C;s1&#x2033; will have a single rule matching the destination MAC address and the latency of the ping between h1 and h2 will be &lt; 1ms, and you will see output as follows in the mininet window.<br>


		<div id="crayon-56bcd202b0c89990112227" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0c89990112227-1"><span class="crayon-v">mininet</span><span class="crayon-o">&gt;</span><span class="crayon-e">h1 </span><span class="crayon-e">ping </span><span class="crayon-e">h2</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c89990112227-2"><span class="crayon-i">PING</span><span class="crayon-cn">10.0.0.2</span><span class="crayon-sy">(</span><span class="crayon-cn">10.0.0.2</span><span class="crayon-sy">)</span><span class="crayon-cn">56</span><span class="crayon-sy">(</span><span class="crayon-cn">84</span><span class="crayon-sy">)</span><span class="crayon-e">bytes </span><span class="crayon-e">of </span><span class="crayon-v">data</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56bcd202b0c89990112227-3"><span class="crayon-i">From</span><span class="crayon-cn">10.0.0.1</span><span class="crayon-v">icmp_seq</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-e">Destination </span><span class="crayon-e">Host </span><span class="crayon-e">Unreachable</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c89990112227-4"><span class="crayon-i">From</span><span class="crayon-cn">10.0.0.1</span><span class="crayon-v">icmp_seq</span><span class="crayon-o">=</span><span class="crayon-cn">2</span><span class="crayon-e">Destination </span><span class="crayon-e">Host </span><span class="crayon-e">Unreachable</span></p><p class="crayon-line" id="crayon-56bcd202b0c89990112227-5"><span class="crayon-i">From</span><span class="crayon-cn">10.0.0.1</span><span class="crayon-v">icmp_seq</span><span class="crayon-o">=</span><span class="crayon-cn">3</span><span class="crayon-e">Destination </span><span class="crayon-e">Host </span><span class="crayon-e">Unreachable</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c89990112227-6"><span class="crayon-i">From</span><span class="crayon-cn">10.0.0.1</span><span class="crayon-v">icmp_seq</span><span class="crayon-o">=</span><span class="crayon-cn">4</span><span class="crayon-e">Destination </span><span class="crayon-e">Host </span><span class="crayon-i">Unreachable</span></p><p class="crayon-line" id="crayon-56bcd202b0c89990112227-7"><span class="crayon-cn">64</span><span class="crayon-e">bytes </span><span class="crayon-i">from</span><span class="crayon-cn">10.0.0.2</span><span class="crayon-o">:</span><span class="crayon-v">icmp_req</span><span class="crayon-o">=</span><span class="crayon-cn">5</span><span class="crayon-v">ttl</span><span class="crayon-o">=</span><span class="crayon-cn">64</span><span class="crayon-v">time</span><span class="crayon-o">=</span><span class="crayon-cn">0.529</span><span class="crayon-i">ms</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0c89990112227-8"><span class="crayon-cn">64</span><span class="crayon-e">bytes </span><span class="crayon-i">from</span><span class="crayon-cn">10.0.0.2</span><span class="crayon-o">:</span><span class="crayon-v">icmp_req</span><span class="crayon-o">=</span><span class="crayon-cn">6</span><span class="crayon-v">ttl</span><span class="crayon-o">=</span><span class="crayon-cn">64</span><span class="crayon-v">time</span><span class="crayon-o">=</span><span class="crayon-cn">0.133</span><span class="crayon-i">ms</span></p><p class="crayon-line" id="crayon-56bcd202b0c89990112227-9"><span class="crayon-cn">64</span><span class="crayon-e">bytes </span><span class="crayon-i">from</span><span class="crayon-cn">10.0.0.2</span><span class="crayon-o">:</span><span class="crayon-v">icmp_req</span><span class="crayon-o">=</span><span class="crayon-cn">7</span><span class="crayon-v">ttl</span><span class="crayon-o">=</span><span class="crayon-cn">64</span><span class="crayon-v">time</span><span class="crayon-o">=</span><span class="crayon-cn">0.047</span><span class="crayon-v">ms</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</li>
<li>Convert the MAC table in the 
			<span id="crayon-56bcd202b0c91879267042" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">TutorialL2Forwarding</span><span class="crayon-sy">.</span><span class="crayon-v">java</span></span></span> from a local hashmap to an augmented data in the MD-SAL data store. Perhaps within the 
			<span id="crayon-56bcd202b0c9a172587182" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">openDaylight</span><span class="crayon-o">-</span><span class="crayon-v">inventory</span></span></span> root like follows:<br>


		<div id="crayon-56bcd202b0ca2881116753" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0ca2881116753-1"><span class="crayon-v">augment</span><span class="crayon-o">/</span><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">inv</span><span class="crayon-o">:</span><span class="crayon-v">nodes</span><span class="crayon-o">/</span><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">inv</span><span class="crayon-o">:</span><span class="crayon-e">node</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ca2881116753-2"><span class="crayon-v">ext</span><span class="crayon-o">:</span><span class="crayon-v">augment</span><span class="crayon-o">-</span><span class="crayon-i">identifier</span><span class="crayon-s">"MacTable"</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0ca2881116753-3"><span class="crayon-e">list</span><span class="crayon-e">hosts</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ca2881116753-4"><span class="crayon-e">leaf</span><span class="crayon-e">mac</span><span class="crayon-o">-</span><span class="crayon-e">address</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56bcd202b0ca2881116753-5"><span class="crayon-e">type </span><span class="crayon-v">yang</span><span class="crayon-o">:</span><span class="crayon-v">mac</span><span class="crayon-o">-</span><span class="crayon-v">address</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56bcd202b0ca2881116753-7"><span class="crayon-e">leaf</span><span class="crayon-e">attachment</span><span class="crayon-o">-</span><span class="crayon-e">point</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0ca2881116753-8"><span class="crayon-c">//I choose simple one</span></p><p class="crayon-line" id="crayon-56bcd202b0ca2881116753-9"><span class="crayon-e">type </span><span class="crayon-v">inet</span><span class="crayon-o">:</span><span class="crayon-v">uri</span><span class="crayon-sy">;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</li>
<li>Complete the tap application 
			<span id="crayon-56bcd202b0caa709390901" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-e">onDataChanged</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span> so that the OpenFlow rules are programmed when tap configurations are received. For instance, once the data is inserted using the curl (like in the example above), the rule will be pushed to the switch underneath as follows:<br>


		<div id="crayon-56bcd202b0cb2755698596" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0cb2755698596-1"><span class="crayon-sy">$</span><span class="crayon-e">sudo </span><span class="crayon-v">ovs</span><span class="crayon-o">-</span><span class="crayon-e">ofctl </span><span class="crayon-v">dump</span><span class="crayon-o">-</span><span class="crayon-v">flows</span><span class="crayon-o">-</span><span class="crayon-e">OOpenFlow13 </span><span class="crayon-e">s1</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0cb2755698596-2"><span class="crayon-e">OFPST_FLOW </span><span class="crayon-e">reply</span><span class="crayon-sy">(</span><span class="crayon-v">OF1</span><span class="crayon-sy">.</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-v">xid</span><span class="crayon-o">=</span><span class="crayon-cn">0x2</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56bcd202b0cb2755698596-3"><span class="crayon-v">cookie</span><span class="crayon-o">=</span><span class="crayon-cn">0x0</span><span class="crayon-sy">,</span><span class="crayon-v">duration</span><span class="crayon-o">=</span><span class="crayon-cn">477.342s</span><span class="crayon-sy">,</span><span class="crayon-v">table</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">n_packets</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">n_bytes</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">tcp</span><span class="crayon-sy">,</span><span class="crayon-v">in_port</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-v">tp_dst</span><span class="crayon-o">=</span><span class="crayon-cn">80</span><span class="crayon-v">actions</span><span class="crayon-o">=</span><span class="crayon-v">output</span><span class="crayon-o">:</span><span class="crayon-cn">2</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</li>
</ol>
<h3><span id="54_Solutions">5.4 Solutions</span></h3>
<p>In the impl directory of the two applications, you will see *.solution files that implement the two applications. Copy them over the .java files and recompile to see it in action.</p>
<h3></h3>
<ol>
<li>Extend the learning switch to work with multiple switches. The solution code only works with single switch. In mininet, you can spawn a larger tree topology using following:<br>


		<div id="crayon-56bcd202b0cbb962453739" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0cbb962453739-1"><span class="crayon-v">ubuntu</span><span class="crayon-sy">@</span><span class="crayon-v">sdnhubvm</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-sy">[</span><span class="crayon-cn">22</span><span class="crayon-o">:</span><span class="crayon-cn">11</span><span class="crayon-sy">]</span><span class="crayon-sy">$</span><span class="crayon-e">sudo </span><span class="crayon-v">mn</span><span class="crayon-o">--</span><span class="crayon-e">topo </span><span class="crayon-v">tree</span><span class="crayon-sy">,</span><span class="crayon-cn">2</span><span class="crayon-o">--</span><span class="crayon-v">mac</span><span class="crayon-o">--</span><span class="crayon-st">switch</span><span class="crayon-v">ovsk</span><span class="crayon-sy">,</span><span class="crayon-v">protocols</span><span class="crayon-o">=</span><span class="crayon-v">OpenFlow13</span><span class="crayon-o">--</span><span class="crayon-e">controller </span><span class="crayon-v">remote</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</li>
<li>Support matching tap traffic in both direction, such that the rule programmed will look as follows:<br>


		<div id="crayon-56bcd202b0cc4019537714" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0cc4019537714-1"><span class="crayon-sy">$</span><span class="crayon-e">sudo </span><span class="crayon-v">ovs</span><span class="crayon-o">-</span><span class="crayon-e">ofctl </span><span class="crayon-v">dump</span><span class="crayon-o">-</span><span class="crayon-v">flows</span><span class="crayon-o">-</span><span class="crayon-e">OOpenFlow13 </span><span class="crayon-e">s1</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0cc4019537714-2"><span class="crayon-e">OFPST_FLOW </span><span class="crayon-e">reply</span><span class="crayon-sy">(</span><span class="crayon-v">OF1</span><span class="crayon-sy">.</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-v">xid</span><span class="crayon-o">=</span><span class="crayon-cn">0x2</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56bcd202b0cc4019537714-3"><span class="crayon-v">cookie</span><span class="crayon-o">=</span><span class="crayon-cn">0x0</span><span class="crayon-sy">,</span><span class="crayon-v">duration</span><span class="crayon-o">=</span><span class="crayon-cn">477.342s</span><span class="crayon-sy">,</span><span class="crayon-v">table</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">n_packets</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">n_bytes</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">tcp</span><span class="crayon-sy">,</span><span class="crayon-v">in_port</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-v">tp_dst</span><span class="crayon-o">=</span><span class="crayon-cn">80</span><span class="crayon-v">actions</span><span class="crayon-o">=</span><span class="crayon-v">output</span><span class="crayon-o">:</span><span class="crayon-cn">2</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0cc4019537714-4"><span class="crayon-v">cookie</span><span class="crayon-o">=</span><span class="crayon-cn">0x0</span><span class="crayon-sy">,</span><span class="crayon-v">duration</span><span class="crayon-o">=</span><span class="crayon-cn">477.364s</span><span class="crayon-sy">,</span><span class="crayon-v">table</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">n_packets</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">n_bytes</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">tcp</span><span class="crayon-sy">,</span><span class="crayon-v">in_port</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-v">tp_src</span><span class="crayon-o">=</span><span class="crayon-cn">80</span><span class="crayon-v">actions</span><span class="crayon-o">=</span><span class="crayon-v">output</span><span class="crayon-o">:</span><span class="crayon-cn">2</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</li>
<li>Define a RPC call in YANG called &#x201C;create-tap&#x201D; and &#x201C;delete-tap&#x201D;, and make the 
			<span id="crayon-56bcd202b0ccc326753442" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">TutorialTapProvider</span></span></span> class as a provider for those RPC calls.</li>
<li>Save the IP and TCP header information data, derived from the traffic type, as augmentation to the tap configuration (Note: The 
			<span id="crayon-56bcd202b0cd4280074172" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">tap</span><span class="crayon-sy">.</span><span class="crayon-v">yang</span></span></span> already defines this in the bottom)</li>
<li>Test persistence of tap configuration across reboot.</li>
</ol>
<h2><span id="6_Other_useful_Features">6. Other useful Features</span></h2>
<p>The OpenDaylight distribution has some pre-written applications that will help develop and debug your application. Previously, we learned about how useful the 
			<span id="crayon-56bcd202b0cdd944439012" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">restconf</span><span class="crayon-o">-</span><span class="crayon-v">noauth</span></span></span> feature can be in inspecting the data store. Besides that, we encourage you to also play with the following features:<br>
<a href="http://sdnhub.org/wp-content/uploads/2013/11/odl-mdsal-apidocs-explorer.png"><img class="alignright wp-image-925 size-medium" src="http://sdnhub.org/wp-content/uploads/2013/11/294x300xodl-mdsal-apidocs-explorer-294x300.png.pagespeed.ic.WAtaT12LKH.jpg" alt="odl-mdsal-apidocs-explorer" width="294"></a></p>
<ul>
<li><b>NETCONF client</b>: Install the 
			<span id="crayon-56bcd202b0ce6460757821" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">netconf</span><span class="crayon-o">-</span><span class="crayon-v">connector</span><span class="crayon-o">-</span><span class="crayon-v">all</span></span></span> feature to enable the OpenDaylight controller to configure and manage underlying devices using NETCONF protocol; typically, devices (like routers) with traditional control plane provide this NETCONF option for injecting configuration and performing RPC operations on the device. Here is a <a href="http://sdnhub.org/tutorials/opendaylight-tutorial/experimenting-with-netconf-connector-in-opendaylight/">tutorial post</a> for experimenting with NETCONF support and using that to orchestrate non-OpenFlow devices.</li>
<li><b>l2switch</b>: Has code for ARP handlers, host tracking, more complex L2 switch. You can model your applications after this. Alternatively, you can install this 
			<span id="crayon-56bcd202b0cef955830403" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">l2switch</span><span class="crayon-o">-</span><span class="crayon-v">all</span></span></span> feature to test your switch before doing other applications.</li>
<li><b>dlux</b>: Dlux is the AngularJS-based web UI of OpenDaylight. It has several build in modules to visualize the data cached in the data store. Install 
			<span id="crayon-56bcd202b0cf8837243903" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">dlux</span><span class="crayon-o">-</span><span class="crayon-v">all</span></span></span> feature and visit <a href="http://localhost:8181/dlux">http://localhost:8181/dlux</a></li>
<li><b>Link discovery</b>: Although we have used OpenFlow plugin in both the above applications, we did not use all its features. The plugin also tracks topology and adds it to the 
			<span id="crayon-56bcd202b0d00513553465" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">network</span><span class="crayon-o">-</span><span class="crayon-v">topology</span><span class="crayon-sy">.</span><span class="crayon-v">yang</span></span></span> model. You can view all LLDP discovered links from <a href="http://localhost:8181/restconf/operational/network-topology:network-topology">http://localhost:8181/restconf/operational/network-topology:network-topology</a>. (<b>Quiz</b>: How to get notifications on new link additions? <b>Answer</b>: Register a data change listener for the link instance identifier)</li>
<li><b>apidocs</b>: OpenDaylight provides an interface to get a list of all the defined data models, notifications and RPC calls at runtime. To get list of all APIs exported over RESTConf, you can use the API explorer. Install feature 
			<span id="crayon-56bcd202b0d09640095296" class="crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">odl</span><span class="crayon-o">-</span><span class="crayon-v">mdsal</span><span class="crayon-o">-</span><span class="crayon-v">apidocs</span></span></span> and see the list of API by accessing <a href="http://localhost:8080/apidoc/explorer/">http://localhost:8080/apidoc/explorer/</a>. On the right is an example of list of API.We encourage you to play with this data access and possibly create new flows through this REST interface. Once you create a new flow, you can see it in the Open vSwitch table using the command:<br>


		<div id="crayon-56bcd202b0d12098377317" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0d12098377317-1"><span class="crayon-sy">$</span><span class="crayon-e">sudo </span><span class="crayon-v">ovs</span><span class="crayon-o">-</span><span class="crayon-e">ofctl </span><span class="crayon-v">dump</span><span class="crayon-o">-</span><span class="crayon-e">flows </span><span class="crayon-v">s1</span><span class="crayon-o">-</span><span class="crayon-i">O</span><span class="crayon-e">OpenFlow13</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0d12098377317-2"><span class="crayon-e">OFPST_FLOW </span><span class="crayon-e">reply</span><span class="crayon-sy">(</span><span class="crayon-v">OF1</span><span class="crayon-sy">.</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-v">xid</span><span class="crayon-o">=</span><span class="crayon-cn">0x2</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56bcd202b0d12098377317-3"><span class="crayon-v">cookie</span><span class="crayon-o">=</span><span class="crayon-cn">0x0</span><span class="crayon-sy">,</span><span class="crayon-v">duration</span><span class="crayon-o">=</span><span class="crayon-cn">35.255s</span><span class="crayon-sy">,</span><span class="crayon-v">table</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">n_packets</span><span class="crayon-o">=</span><span class="crayon-cn">22</span><span class="crayon-sy">,</span><span class="crayon-v">n_bytes</span><span class="crayon-o">=</span><span class="crayon-cn">1668</span><span class="crayon-sy">,</span><span class="crayon-v">priority</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-v">actions</span><span class="crayon-o">=</span><span class="crayon-v">CONTROLLER</span><span class="crayon-o">:</span><span class="crayon-cn">65535</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0d12098377317-4"><span class="crayon-v">cookie</span><span class="crayon-o">=</span><span class="crayon-cn">0x2a00000000000000</span><span class="crayon-sy">,</span><span class="crayon-v">duration</span><span class="crayon-o">=</span><span class="crayon-cn">35.248s</span><span class="crayon-sy">,</span><span class="crayon-v">table</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">n_packets</span><span class="crayon-o">=</span><span class="crayon-cn">36</span><span class="crayon-sy">,</span><span class="crayon-v">n_bytes</span><span class="crayon-o">=</span><span class="crayon-cn">3416</span><span class="crayon-sy">,</span><span class="crayon-v">priority</span><span class="crayon-o">=</span><span class="crayon-cn">512</span><span class="crayon-sy">,</span><span class="crayon-v">dl_src</span><span class="crayon-o">=</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">02</span><span class="crayon-sy">,</span><span class="crayon-v">dl_dst</span><span class="crayon-o">=</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">01</span><span class="crayon-v">actions</span><span class="crayon-o">=</span><span class="crayon-v">output</span><span class="crayon-o">:</span><span class="crayon-cn">2</span></p><p class="crayon-line" id="crayon-56bcd202b0d12098377317-5"><span class="crayon-v">cookie</span><span class="crayon-o">=</span><span class="crayon-cn">0x2a00000000000001</span><span class="crayon-sy">,</span><span class="crayon-v">duration</span><span class="crayon-o">=</span><span class="crayon-cn">35.247s</span><span class="crayon-sy">,</span><span class="crayon-v">table</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">n_packets</span><span class="crayon-o">=</span><span class="crayon-cn">35</span><span class="crayon-sy">,</span><span class="crayon-v">n_bytes</span><span class="crayon-o">=</span><span class="crayon-cn">3374</span><span class="crayon-sy">,</span><span class="crayon-v">priority</span><span class="crayon-o">=</span><span class="crayon-cn">512</span><span class="crayon-sy">,</span><span class="crayon-v">dl_src</span><span class="crayon-o">=</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">01</span><span class="crayon-sy">,</span><span class="crayon-v">dl_dst</span><span class="crayon-o">=</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">00</span><span class="crayon-o">:</span><span class="crayon-cn">02</span><span class="crayon-v">actions</span><span class="crayon-o">=</span><span class="crayon-v">output</span><span class="crayon-o">:</span><span class="crayon-cn">1</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</li>
</ul>
<h2><span id="7_Debugging">7. Debugging</span></h2>
<p>Debugging is an important part of app development. With Eclipse (and other IDE), you will be able to connect to the karaf instance and perform a step-wise debug of your code. To debug your code, you need to start OpenDaylight including the command like parameter &#x201C;debug&#x201D;, which will allow IDE (e.g., Eclipse) to connect to Karaf (listening at port 5005) for debugging purposes.</p>

		<div id="crayon-56bcd202b0d1b559411607" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56bcd202b0d1b559411607-1"><span class="crayon-v">ubuntu</span><span class="crayon-sy">@</span><span class="crayon-v">sdnhubvm</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-o">/</span><span class="crayon-v">SDNHub_Opendaylight_Tutorial</span><span class="crayon-sy">$</span><span class="crayon-e">cd </span><span class="crayon-v">distribution</span><span class="crayon-o">/</span><span class="crayon-v">opendaylight</span><span class="crayon-o">-</span><span class="crayon-v">karaf</span><span class="crayon-o">/</span><span class="crayon-v">target</span><span class="crayon-o">/</span><span class="crayon-e">assembly</span></p><p class="crayon-line crayon-striped-line" id="crayon-56bcd202b0d1b559411607-2"><span class="crayon-v">ubuntu</span><span class="crayon-sy">@</span><span class="crayon-v">sdnhubvm</span><span class="crayon-o">:</span><span class="crayon-o">~</span><span class="crayon-o">/</span><span class="crayon-v">SDNHub_Opendaylight_Tutorial</span><span class="crayon-o">/</span><span class="crayon-v">distribution</span><span class="crayon-o">/</span><span class="crayon-v">opendaylight</span><span class="crayon-o">-</span><span class="crayon-v">karaf</span><span class="crayon-o">/</span><span class="crayon-v">target</span><span class="crayon-o">/</span><span class="crayon-v">assembly</span><span class="crayon-sy">$</span><span class="crayon-sy">.</span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-e">karaf </span><span class="crayon-v">debug</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Once you kick off karaf in debug mode, you can connect to that JVM from Eclipse by clicking on Debug -&gt; Configurations and adding a new Remote Java Application as shown in the figure below. Once you have that entered and connected to the JVM, you can add breakpoints in your code to break at specific lines.<br>
<a href="http://sdnhub.org/wp-content/uploads/2015/06/eclipse_debug_configurations.png"><img src="http://sdnhub.org/wp-content/uploads/2015/06/Nx350xeclipse_debug_configurations.png.pagespeed.ic.ZWpdf8S3of.jpg" alt="eclipse_debug_configurations" class="aligncenter wp-image-1148"></a><br>
If execution breaks at the line, you should be able to see the Debug tab, where you can decide how to proceed and debug.<br>
<a href="http://sdnhub.org/wp-content/uploads/2013/11/opendaylight_debug_tab.png"><img class="alignnone size-full wp-image-785" src="http://sdnhub.org/wp-content/uploads/2013/11/800xNxopendaylight_debug_tab.png.pagespeed.ic.lYScpUcibJ.jpg" alt="opendaylight_debug_tab" width="800"></a></p>
</div>
													</div>
</body></html>
