<!DOCTYPE html><html><head><title>How to make Multi-Layered Parallax Illustration with CSS & Javascript</title></head><body>
<h1>How to make Multi-Layered Parallax Illustration with CSS & Javascript</h1><p><a href="https://medium.com/@PatrykZabielski/how-to-make-multi-layered-parallax-illustration-with-css-javascript-2b56883c3f27#.ihm1rcnnu" target="_new">Original URL</a></p>
<p><blockquote>The Painting used for the parallax effect, made by Patryk Zabielski.Hey friends, I will be showing you how to create a simple multi-layered illustration with depth that transitions into the content&hellip;</blockquote></p>
<div score="23.75"><section name="4ae8" class=" section--body section--first" score="41.25"><div class="section-content" score="41.25"><div class="section-inner sectionLayout--outsetColumn" score="1.25"><figure name="91af" id="91af" class="graf--figure graf--layoutOutsetCenter graf-after--h3" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/1200/1*n031qAVaSjia44OBenLOnw.png"></div><figcaption class="imageCaption">The Painting used for the parallax effect, made by Patryk Zabielski.</figcaption></figure></div><div class="section-inner layoutSingleColumn" score="1.25"><p name="e1fd" id="e1fd" class="graf--p graf-after--figure">Hey friends, I will be showing you how to create a simple multi-layered illustration with depth that transitions into the content in a unique way. We&#x2019;ll be using a technique that involves CSS and pure JS (no jQuery!).</p><p name="01b9" id="01b9" class="graf--p graf-after--p">The tutorial is for beginners with basic Javascript and CSS knowledge, so I will be explaining most of the things and link to external sources.</p><p name="2611" id="2611" class="graf--p graf-after--p"><a href="http://codepen.io/zabielski/full/MyoBaY" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">Preview final effect</strong></a></p><p name="f652" id="f652" class="graf--p graf-after--h4">Let&#x2019;s start by cutting the painting into layers. Best-case-scenario would be a picture that you painted or if you have access to a source file with all the layers.</p><p name="164d" id="164d" class="graf--p graf-after--p">If you don&#x2019;t, then do not worry we can fix that.</p><p name="2ffc" id="2ffc" class="graf--p graf-after--p">I will be providing a painting that I did last year. If you don&#x2019;t feel like creating your own assets, you can download assets before we start <em class="markup--em markup--p-em">for free</em>.</p><p name="f34f" id="f34f" class="graf--p graf-after--p"><a href="https://www.dropbox.com/s/o41hppzrgcspto6/parallax_illustration_assets.zip?dl=0" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">Download assets</strong></a></p><figure name="7212" id="7212" class="graf--figure graf--layoutOutsetLeft graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/600/1*AMb-_gXiOj8B_kK1YkqBKw.png"></div><figcaption class="imageCaption">Visualized concept of layers in 3D Space</figcaption></figure><p name="5464" id="5464" class="graf--p graf-after--figure">What we are looking for is splitting the painting into multiple png files with transparent background (layers), which will allow us to create the sense of depth.</p><p name="3b2f" id="3b2f" class="graf--p graf-after--p">Layers in the back will be moving slower than the ones in the foreground what will give us the effect of depth.</p><p name="e3a2" id="e3a2" class="graf--p graf-after--p">One other thing that will give a better transition to next section is making the bottom of the image the same color as the background. I have added a slight foreground line on the bottom and made sure that it&#x2019;s not transparent on the bottom.</p></div><div class="section-inner sectionLayout--outsetColumn" score="1.25"><figure name="d535" id="d535" class="graf--figure graf--layoutOutsetCenter graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/1200/1*MKLaI7GQ1xn2e_fH0Y69hg.png"></div><figcaption class="imageCaption">The Version on the right has a slight line added that will give us better transition into next section.</figcaption></figure></div><div class="section-inner layoutSingleColumn" score="12.0"><p name="7b55" id="7b55" class="graf--p graf-after--h4">What you will need:</p><ul class="postList"><li name="5675" id="5675" class="graf--li graf-after--p">A fresh <a href="http://www.codepen.com" class="markup--anchor markup--li-anchor" rel="nofollow"><strong class="markup--strong markup--li-strong">Codepen</strong></a><strong class="markup--strong markup--li-strong"> </strong>(if you&#x2019;d like to follow code below remember to change HTML to HAML, CSS to SCSS and JS to Coffeescript in Codepen settings)</li><li name="9348" id="9348" class="graf--li graf-after--li">Basic knowledge of <a href="http://haml.info/" class="markup--anchor markup--li-anchor" rel="nofollow"><strong class="markup--strong markup--li-strong">HAML</strong></a><strong class="markup--strong markup--li-strong"> </strong>&amp; <a href="http://sass-lang.com/" class="markup--anchor markup--li-anchor" rel="nofollow"><strong class="markup--strong markup--li-strong">Sass</strong></a><strong class="markup--strong markup--li-strong"> </strong>(or use converters like <a href="http://www.haml-converter.com/" class="markup--anchor markup--li-anchor" rel="nofollow"><strong class="markup--strong markup--li-strong">HAML Converter</strong></a><strong class="markup--strong markup--li-strong"> </strong>&amp;<strong class="markup--strong markup--li-strong"> </strong><a href="http://www.sassmeister.com/" class="markup--anchor markup--li-anchor" rel="nofollow"><strong class="markup--strong markup--li-strong">Sass Converter</strong></a>)</li><li name="26ec" id="26ec" class="graf--li graf-after--li">Basic understanding of <strong class="markup--strong markup--li-strong">Javascript</strong> and <a href="http://coffeescript.org/" class="markup--anchor markup--li-anchor" rel="nofollow"><strong class="markup--strong markup--li-strong">Coffeescript</strong></a> (If you&#x2019;re still struggling with that&#x200A;&#x2014;&#x200A;I recommend <a href="http://www.javascriptbook.com/" class="markup--anchor markup--li-anchor" rel="nofollow"><strong class="markup--strong markup--li-strong">&#x201C;Javascript &amp; jQuery&#x201D; by Jon Duckett</strong></a>).<strong class="markup--strong markup--li-strong"> </strong>If you don&#x2019;t feel like playing around with Coffeescript then you can use <a href="http://js2.coffee/" class="markup--anchor markup--li-anchor" rel="nofollow"><strong class="markup--strong markup--li-strong">this Coffescript converter</strong></a> and paste in code snippets below to get raw js.</li><li name="4077" id="4077" class="graf--li graf-after--li">Your illustration/photo split into multiple png layers.</li></ul><p name="eccd" id="eccd" class="graf--p graf-after--li">Let&#x2019;s start with the HTML structure. We will create a parent container and give it an id of &#x2018;<em class="markup--em markup--p-em">hero</em>&#x2019;. Then we want to add multiple divs with class &#x201C;<em class="markup--em markup--p-em">layer</em>&#x201D; ( one for each layer you have created) and <a href="https://developer.mozilla.org/en/docs/Web/Guide/HTML/Using_data_attributes" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">data-type</strong></a> attribute with value &#x201C;<em class="markup--em markup--p-em">parallax.</em>&#x201D;</p><pre name="0c97" id="0c97" class="graf--pre graf-after--p">#hero<br> .layer{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;}<br> .layer{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;}<br> .layer{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;}<br> .layer{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;}<br> .layer{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;}</pre><p name="3ad6" id="3ad6" class="graf--p graf-after--pre">Let&#x2019;s add our basic styling. We&#x2019;ll start by styling the id <em class="markup--em markup--p-em">&#x201C;hero&#x201D;</em>. I have set the height of the illustration to 800 px.</p><pre name="e82c" id="e82c" class="graf--pre graf-after--p">#hero {<br> height: 800px;<br> overflow: hidden;<br> position: relative;<br>}</pre><p name="28f4" id="28f4" class="graf--p graf-after--pre">Now, let&#x2019;s move to styling the repeating class of layers. All of them will have the same height as the id <em class="markup--em markup--p-em">&#x201C;hero&#x201D;</em> container base positioning, and we&#x2019;ll add <em class="markup--em markup--p-em">position: fixed</em>.</p><pre name="a324" id="a324" class="graf--pre graf-after--p">.layer {<br> background-position: bottom center;<br> background-size: auto;<br> background-repeat: no-repeat;<br> width: 100%;<br> height: 800px;<br> position: fixed;<br> z-index: -1;<br>}</pre><p name="ee4f" id="ee4f" class="graf--p graf-after--pre">The next thing we&#x2019;ll want to do is add the layer images we have previously prepared. We&#x2019;ll create another set of classes, one for every layer. Then, place the URL of the picture inside the &#x201C;<em class="markup--em markup--p-em">background-image</em>&#x201D; property.</p><pre name="b5ee" id="b5ee" class="graf--pre graf-after--p">.layer-01 {<br> background-image: url(&#x2018;input_link_to_image_here<a href="https://s3-us-west-2.amazonaws.com/s.cdpn.io/272781/ilu_bg.jpg%27" class="markup--anchor markup--pre-anchor" rel="nofollow">'</a>);<br>}<br>.layer-02 {<br> background-image: url(&#x2018;input_link_to_image_here<a href="https://s3-us-west-2.amazonaws.com/s.cdpn.io/272781/ilu_bg.jpg%27" class="markup--anchor markup--pre-anchor" rel="nofollow">'</a>);<br>}</pre><pre name="8671" id="8671" class="graf--pre graf-after--pre">// etc.</pre><p name="40b7" id="40b7" class="graf--p graf-after--pre">Let&#x2019;s not forget to update the HTML file and assign the classes to the proper divs in our order, with the first layer being the background; the subsequent layers will be stacked on top of each other as you add the next numbers.</p><pre name="4436" id="4436" class="graf--pre graf-after--p">#hero<br> .layer.layer-01{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;}<br> .layer.layer-02{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;}<br> .layer.layer-03{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;}<br> .layer.layer-04{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;}<br> .layer.layer-05{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;}</pre><p name="922c" id="922c" class="graf--p graf-after--h4">Now, let&#x2019;s add a method that will check if the user has begun scrolling down.</p><pre name="35d4" id="35d4" class="graf--pre graf-after--p">window.addEventListener &#x2018;scroll&#x2019;, (event)</pre><blockquote name="6807" id="6807" class="graf--blockquote graf-after--pre">The EventTarget.addEventListener() method registers the specified listener on the <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget" class="markup--anchor markup--blockquote-anchor" title="EventTarget is an interface implemented by objects that can receive events and may have listeners for them." rel="nofollow">EventTarget</a> it&#x2019;s called on. The event target may be an <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element" class="markup--anchor markup--blockquote-anchor" title="The Element interface represents an object of a Document. This interface describes methods and properties common to all kinds of elements. Specific behaviors are described in interfaces which inherit from Element but add additional functionality." rel="nofollow">Element</a> in a document, the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document" class="markup--anchor markup--blockquote-anchor" title="The Document interface represent any web page loaded in the browser and&#xA0; serves as an entry point into the web page's content, the DOM tree (including elements such as &lt;body&gt; or ). It provides functionality which is global to the document, such as obtaining the page's URL and creating new elements in the document." rel="nofollow">Document</a> itself, a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window" class="markup--anchor markup--blockquote-anchor" title="The window object represents a window containing a DOM document; the document property points to the DOM document loaded in that window." rel="nofollow">Window</a>, or any other object that supports events (such as <a href="https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest" class="markup--anchor markup--blockquote-anchor" rel="nofollow">XMLHttpRequest</a>).</blockquote><p name="61db" id="61db" class="graf--p graf-after--blockquote">Then let&#x2019;s store the value of pixels that the document has already been scrolled vertically into the <em class="markup--em markup--p-em">topDistance</em> variable. To do that, we&#x2019;ll use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollY" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">pageYOffset</strong></a><strong class="markup--strong markup--p-strong"> </strong>property.</p><pre name="06e8" id="06e8" class="graf--pre graf-after--p">window.addEventListener &#x2018;scroll&#x2019;, (event) -&gt;<br> topDistance = @pageYOffset</pre><p name="8490" id="8490" class="graf--p graf-after--pre">After that, we want to select all the layers in our illustration and store them into a variable called &#x2018;<em class="markup--em markup--p-em">layers</em>&#x2019;. To do that, we&#x2019;ll use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">querySelectorAll</strong></a><strong class="markup--strong markup--p-strong"> </strong>method and data attribute inside the HTML that we have specified previously.</p><pre name="51ec" id="51ec" class="graf--pre graf-after--p">window.addEventListener &#x2018;scroll&#x2019;, (event) -&gt;<br> topDistance = @pageYOffset<br> layers = document.querySelectorAll("[data-type='parallax']")</pre><p name="9ee6" id="9ee6" class="graf--p graf-after--pre">Next thing we&#x2019;ll have to do is to loop through all the layers and apply proper <em class="markup--em markup--p-em">transform</em> to each of the layers. But before that, we need to specify one more thing inside of our HTML file, the <em class="markup--em markup--p-em">data-depth</em>. It will allow us to control how fast the elements move, let&#x2019;s not dig too deep into the values inside of it yet, we&#x2019;ll get back to this later on.</p><pre name="6082" id="6082" class="graf--pre graf-after--p">#hero<br> .layer.layer-01{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;, "data-depth" =&gt; "0.10"}<br> .layer.layer-02{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;, "data-depth" =&gt; "0.20"}<br> .layer.layer-03{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;, "data-depth" =&gt; "0.50"}<br> .layer.layer-04{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;, "data-depth" =&gt; "0.80"}<br> .layer.layer-05{&#x201C;data-type&#x201D; =&gt; &#x201C;parallax&#x201D;, "data-depth" =&gt; "1.00"}</pre><p name="667e" id="667e" class="graf--p graf-after--pre">For looping through all the elements, we&#x2019;ll use the <em class="markup--em markup--p-em">for </em>loop. We start the loop by creating a variable where we will be storing our layers (coffescript allows us to do that all with a simple sentence <em class="markup--em markup--p-em">for layer in layers</em>); then take the value from the data-depth attribute we specified inside of our HTML. After that, we calculate the movement of the layers by multiplying the distance from the top of the page by our data-depth for the given layer. Element with the value of 1.0 will flow normally with the rest of the document, you can think of this as a &#x201C;parallax off&#x201D; state.</p><p name="6fa2" id="6fa2" class="graf--p graf-after--p">The last thing we do is we update the final value of movement to the layer&#x2019;s CSS parameter of <em class="markup--em markup--p-em">transform</em> <em class="markup--em markup--p-em">translate3d</em>, to do that we&#x2019;ll use <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">style</strong></a> property along with all the prefixes for <em class="markup--em markup--p-em">transform</em>.</p><p name="c667" id="c667" class="graf--p graf-after--p">To make things more readable and <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">DRY</strong></a>, we&#x2019;ll store the translate3d property in a variable called &#x2018;translate3d&#x2019;.</p><pre name="54bf" id="54bf" class="graf--pre graf-after--p">for layer in layers<br> depth = layer.getAttribute(&#x2018;data-depth&#x2019;)<br> movement = -(topDistance articles _articles bin CAs devops Documents dotfiles gethtml go hnews jason js netdata playground start-thesrc swift thesrc ucii depth)<br> translate3d = 'translate3d(0, ' + movement + 'px, 0)'<br> layer.style['-webkit-transform'] = translate3d<br> layer.style['-moz-transform'] = translate3d<br> layer.style['-ms-transform'] = translate3d<br> layer.style['-o-transform'] = translate3d<br> layer.style.transform = translate3d</pre><p name="9b4f" id="9b4f" class="graf--p graf-after--pre">Now when we specify the <em class="markup--em markup--p-em">data-depth=&#x201D;1.00" </em>the element will move with the page as a standard element with no parallax effect. All values that are less than 100 will have the parallax effect.</p><p name="b2b3" id="b2b3" class="graf--p graf-after--h4">For mobile we&#x2019;ll be turning off the parallax version and replacing it with static image to save up on performance and file size (since it requires multiple png files). To do that we&#x2019;ll create a new div below id <em class="markup--em markup--p-em">hero</em> with id of <em class="markup--em markup--p-em">hero-mobile</em> and apply <em class="markup--em markup--p-em">display: none</em> along with the background and height property.</p><pre name="280f" id="280f" class="graf--pre graf-after--p">#hero-mobile {<br> display: none;<br> background: url(&#x201C;<a href="https://s3-us-west-2.amazonaws.com/s.cdpn.io/272781/full_illustration.png" class="markup--anchor markup--pre-anchor" rel="nofollow">https://s3-us-west-2.amazonaws.com/s.cdpn.io/272781/full_illustration.png</a>") no-repeat center bottom / cover;<br> height: 320px;<br>}</pre><p name="dd11" id="dd11" class="graf--p graf-after--pre">To show it instead of parallax we&#x2019;ll use simple <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">media query</strong></a><strong class="markup--strong markup--p-strong"> </strong>and apply <em class="markup--em markup--p-em">display: none</em> to desktop version, while overriding our <em class="markup--em markup--p-em">display: none</em> with <em class="markup--em markup--p-em">display: block</em> on <em class="markup--em markup--p-em">hero-mobile</em>.</p><pre name="7d96" id="7d96" class="graf--pre graf-after--p"><a href="http://twitter.com/media" class="markup--anchor markup--pre-anchor" title="Twitter profile for @media" rel="nofollow">@media</a> all and (max-width: 640px) {<br> #hero {<br> display: none;<br> }<br> #hero-mobile {<br> display: block;<br> }<br>}</pre><p name="bc70" id="bc70" class="graf--p graf-after--pre">Further tweaking involves adding <em class="markup--em markup--p-em">background-position</em> to the individual layer classes to position elements as you wish.</p></div></div></section><section name="727e" class=" section--body" score="41.25"><div class="section-content" score="31.25"><div class="section-inner layoutSingleColumn"><p name="cf9a" id="cf9a" class="graf--p graf--first">Thank you so much for going through this guide. I sincerely hope that I have managed to show you a trick or two. I did learn a lot by writing this first tutorial of mine, and I would love to hear your feedback.</p><p name="8b55" id="8b55" class="graf--p graf-after--p">Feel free to reach out to me on twitter <a href="https://twitter.com/PatrykZabielski" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">@patrykzabielski</strong></a>.</p><p name="09f2" id="09f2" class="graf--p graf-after--p graf--last"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Thank you for hitting the </em></strong>&#x2764;<strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em"> if you liked the guide.&#xA0;<br>This will tell me to write more!</em></strong></p></div></div></section><section name="b87e" class=" section--body section--last" score="41.25"><div class="section-content" score="31.25"></div></section></div>
</body></html>
