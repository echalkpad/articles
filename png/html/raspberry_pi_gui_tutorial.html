<!DOCTYPE html><html><head><title>Raspberry Pi GUI Tutorial</title></head><body>
<h1>Raspberry Pi GUI Tutorial</h1><p><a href="https://www.baldengineer.com/raspberry-pi-gui-tutorial.html" target="_new">Original URL</a></p>
<p><blockquote>My favorite Raspberry Pi add-on is the PiTFT from Adafruit. With it, you easily get a Raspberry Pi GUI interface and touch screen. The PiTFT software install is just a few things and it is good to go.</blockquote></p>
<div><div class="entry-content">
		<img width="760" src="https://www.baldengineer.com/wp-content/uploads/2016/02/raspberry-pi-gui-tutorial-hero-v3-760x403.jpg" class="featured-image wp-post-image" alt="Raspberry Pi GUI Tutorial"><p class="first-child "><span title="M" class="dropcap">M</span>y favorite Raspberry Pi add-on is the <a href="https://www.adafruit.com/products/2097">PiTFT from Adafruit</a>. With it, you easily get a Raspberry Pi GUI interface and touch screen. The <a href="https://learn.adafruit.com/adafruit-pitft-3-dot-5-touch-screen-for-raspberry-pi/easy-install">PiTFT software install</a> is just a few things and it is good to go.</p>
<div id="attachment_5768" class="wp-caption alignleft"><a href="https://www.adafruit.com/products/2097" rel="attachment wp-att-5768"><img class="size-medium wp-image-5768" src="https://www.baldengineer.com/wp-content/uploads/2016/02/adafruit-pitft-2097-05-300x225.jpg" alt="Adafruit PiTFT - Click for more info" width="300"></a><p class="wp-caption-text">Image from adafruit.com</p></div>
<p>This screen is what I needed in my IoT project. The Pi+Screen will act as the primary controller for all of my things. The problem is I didn&#x2019;t know much about writing GUI applications in Linux. So what could I do to create a Raspberry Pi GUI?</p>
<p>Python is popular in Pi projects, so I decided to stick with it and find out what GUI toolkits are ready to go. &#x201C;Ready to go&#x201D; means they install easily on Raspian and work well on the Pi.</p>
<p>Here is how I got Qt5 for Python up and running to create a Raspberry Pi GUI.</p>

<h2>Raspberry Pi GUI Libraries</h2>
<p>If you start with this article on dice.com, you&#x2019;ll find <a href="http://insights.dice.com/2014/11/26/5-top-python-guis-for-2015/">five potential python toolkits</a>.</p>
<p>Not listed there is <a href="https://wiki.python.org/moin/TkInter">TkInter</a>, which is the most used Python toolkit. If you have Python running on your system, you have TkInter. I decided not to use it though because the widgets have a very dated look to them.</p>
<p>The other toolkit I considered was <a href="http://wxpython.org">wxPython</a>. The UI widgets have a modern feel, though they not entirely native looking. Also &#xA0;plenty of documentation exists. However, I had some trouble getting <a href="http://wxglade.sourceforget.net">wxGlade</a>&#xA0;running, which is a WYSIWYG GUI editor.</p>
<p>This lead me to Qt.</p>
<h2>Why Qt for Raspberry Pi GUI</h2>
<p>In college, I used Qt for my senior design project: an electronic notebook. It was a PC with a 10&#x201D; touch screen. You could write on it, and it&#x2019;d save what you write, about ten years before Apple did it.</p>
<p>Having a little bit of familiarity with Qt, I looked into its Python bindings and was happy. I decided on the <a href="https://www.riverbankcomputing.com/software/pyqt/intro">PyQt binding from Riverbank</a> to go along with Qt5.</p>
<h3>Note about licensing PyQt and Qt</h3>
<p>PyQt is available as GPL or Commercial License while Qt is available under LGPL or Commercial license. I know even the mere mention of &#x201C;commercial&#x201D; will cause some people to turn away. And that&#x2019;s fine. Qt is modern, and it&#x2019;s free (since I&#x2019;m not developing anything commercial.)</p>
<p>If you want &#x201C;pure&#x201D; open source, then you might be happier with <a href="http://wxPython.org">wxPython</a>.</p>
<h2>Development and Production</h2>
<p>While the Raspberry Pi is a perfectly capable computer, I found developing on a 3.2&#x201D; TFT a bit cumbersome. So I wanted to use my laptop &#x201C;for development&#x201D; and then deploy the code to my Pi when done.</p>
<p>In my case, I found it pretty easy to duplicate the Python/Qt environment on both.</p>
<h2>Installing Python3</h2>
<p>It wasn&#x2019;t clear to me if Qt5 worked with the python2.7. I ran into problems and decided to use python3 instead.</p>
<h3>Mac (aka PC) Instructions</h3>
<p>Whether you&#x2019;re on a Mac, Windows, or Linux, get python3 and Qt5 installed. I don&#x2019;t have much to say about Windows or Linux but on the Mac, install python3 and Qt5 with <a href="http://brew.sh/">homebrew</a>.</p>
<p>Simple command:</p>
<pre class="brush: bash; title: ; notranslate" title="">
brew install python3
brew install qt5
</pre>
<p>If you know all the directories, you can probably get away without re-installing these. However, I like that with the homebrew install; they can find each other.</p>
<p>Next you need PyQt5, which installation varies by operation system.</p>
<p>On Mac, use homebrew:</p>
<pre class="brush: bash; title: ; notranslate" title="">
brew install pyqt5
</pre>
<p>On Linux, check your package manager. The <a href="https://riverbankcomputing.com/software/pyqt/download5">PyQt5 download page</a> has binaries for Windows.</p>
<h3>Raspberry Pi Instructions</h3>
<p>Assuming you&#x2019;re running Raspian Jessie, you can install all three with apt-get:</p>
<pre class="brush: bash; title: ; notranslate" title="">
sudo apt-get install python3 python3-pyqt5
</pre>
<p>I&#x2019;m no apt-get expert, but &#x201C;python3-pyqt5&#x201D; might be enough to drag along python3.</p>
<h2>Download QtCreator</h2>
<p>On the PC you plan to develop from, download and install QtCreator. You can <a href="http://www.qt.io/download/">download that from Qt</a>, after answering some questions about how you plan to use it.</p>
<p>Believe it or not, I think getting python3, Qt5, and PyQt5 installed is the hardest part. After that, it&#x2019;s just a matter of copy/paste to get a GUI up and running.</p>
<h2>Making a GUI in QtCreator</h2>
<p>Start a new project in QtCreator and select &#x201C;Desktop Application.&#x201D;</p>
<p><a href="https://www.baldengineer.com/?attachment_id=5757#main" rel="attachment wp-att-5757"><img class="aligncenter size-medium wp-image-5757" src="https://www.baldengineer.com/wp-content/uploads/2016/02/01-qtc-new-project-300x198.png" alt="QtCreator New Project Window" width="300"></a></p>
<p>Where you save it, is up to you. (<em>Note, OSX when selecting a directory, the &#x201C;New Project&#x201D; window gets hidden. It&#x2019;s behind the initial QtCreator window.</em>) On kit selection, I have been sticking with &#x201C;Desktop Qt 5.5.1 clang 64bit.&#x201D; No need to select the others. QtCreator is going to try and create a C++ program, but the only thing we are interested in is the MainWindow.ui file. So double-click that to open the GUI Editor.</p>
<p><a href="https://www.baldengineer.com/?attachment_id=5758#main" rel="attachment wp-att-5758"><img class="aligncenter size-medium wp-image-5758" src="https://www.baldengineer.com/wp-content/uploads/2016/02/02-qtc-select-kits-300x173.png" alt="QtCreator Select Kits" width="300"></a></p>
<p>Last you need&#xA0;to name the class for your program. For this tutorial, leave it as &#x201C;MainWindow.&#x201D; That way the name will match up with the Python stuff later.</p>
<p><a href="https://www.baldengineer.com/?attachment_id=5759#main" rel="attachment wp-att-5759"><img class="aligncenter size-medium wp-image-5759" src="https://www.baldengineer.com/wp-content/uploads/2016/02/03-qtc-name-class-mainwindow-300x173.png" alt="QtCreator Name Classes MainWindow.ui" width="300"></a></p>
<p>Finally, select none for version control and&#xA0;QtCreator going to create a C++ framework.</p>
<p><a href="https://www.baldengineer.com/?attachment_id=5760#main" rel="attachment wp-att-5760"><img class="aligncenter size-medium wp-image-5760" src="https://www.baldengineer.com/wp-content/uploads/2016/02/04-qtc-code-window-annotated-300x223.jpg" alt="QtCreator Open MainWindow.UI from Code Window" width="300"></a></p>
<p>The only thing we are interested in is the MainWindow.ui file. So double-click that to open the GUI Editor. At this point, you&#x2019;re going to add the GUI elements to create whatever GUI you want. I&#x2019;m not going to go into depth about the different widgets or how they work. Plenty of better tutorials on those.</p>
<p><a href="https://www.baldengineer.com/?attachment_id=5761#main" rel="attachment wp-att-5761"><img class="aligncenter size-medium wp-image-5761" src="https://www.baldengineer.com/wp-content/uploads/2016/02/05-qtc-GUI-editor-300x199.png" alt="05-qtc-GUI editor" width="300"></a></p>
<p>Instead, here are the critical things to know when creating your Raspberry Pi GUI.</p>
<ol>
<li>Set the Window to your Screen Size</li>
<li>Pay attention to the widget name</li>
<li>Set defaults for elements</li>
</ol>
<h3>1. Window Size / Screen Size</h3>
<p>In my case, I am using the <a href="https://www.adafruit.com/products/2097">3.5&#x201D; PiTFT</a>. Using screen means I have 460 by 320 pixels available. This resolution is taking into account LXDE&#x2019;s menubar. So I made sure to set my Window to that size.</p>
<h3>2. Widget Name</h3>
<p><a href="https://www.baldengineer.com/?attachment_id=5762#main" rel="attachment wp-att-5762"><img class="alignright size-medium wp-image-5762" src="https://www.baldengineer.com/wp-content/uploads/2016/02/qtc-button-naming-300x146.png" alt="qtc-button-naming" width="300"></a>Here&#x2019;s where my hardware background shows. I&#x2019;m not sure what the right naming convention to use for widget elements. However, 25 years ago when I was forced to learn VisualBasic, I learned the &#x201C;xxxNamey&#x201D; convention. In this case, &#x201C;xxx&#x201D; is a three letter abbreviation for the widget style and &#x201C;y&#x201D; is the numeric element. So for a button it might be &#x201C;btnOK1&#x201D; or &#x201C;btnRedOn1&#x201D; and a Text Box would be &#x201C;txtName1&#x201D;.</p>
<p>If you know a better method, let me know. I encourage this one because it makes the code read easier later on.</p>
<p class="callout">Don&#x2019;t stick to the default widget names QtCreator provides.</p>
<p>In this code I created two buttons &#x201C;On&#x201D; and &#x201C;Off&#x201D; named &#x201C;btnOn&#x201D; and &#x201C;btnOff&#x201D; respectively.</p>
<h3>3. Set Defaults</h3>
<p>Even if you plan for your program/script to fill in values in the GUI, make sure you set appropriate defaults. For example &#x201C;PushButton&#x201D; is a label text for the button. You CAN change in your code, but why not set it now?</p>
<h2>Create the GUI Code</h2>
<p><a href="https://www.baldengineer.com/wp-content/uploads/2016/02/SampleProgram.zip" class="button ">Download Tutorial Code</a></p>
<p>Once you have drawn your GUI elements, it is time to generate the matching Python code. Now, don&#x2019;t worry if your GUI isn&#x2019;t &#x201C;done.&#x201D; You can repeat the following steps as many times as you want.</p>
<p>In QtCreator, just save your GUI. It will update the MainWindow.ui file. In a terminal (or command shell for Windows), we&#x2019;re going to make use of the pyuic5 utility. On Mac and Unix, here&#x2019;s your command:</p>
<pre class="brush: bash; title: ; notranslate" title="">
pyuic5 mainwindow.ui &gt; mainwindow_auto.py
</pre>
<p>Name the result whatever you want, I keep the name mostly the same. Each time you update the GUI in QtCreator, you&#x2019;ll want to run pyuic5 to update the &#x201C;auto.py&#x201D; file.</p>
<p>Okay, you&#x2019;re asking, are we done yet? Do we have a GUI? Yes and no. This code will run and create a GUI, but that&#x2019;s not quite enough yet.</p>
<h2>Add Basic Python Code</h2>
<p>Create a new Python file in the same directory as your mainwindow_auto.py, with this initialization code. Not that it matters really, but I name my main python a very clever name: &#x201C;main.py&#x201D;. I know, right?</p>
<pre class="brush: python; title: ; notranslate" title="">
# always seem to need this
import sys

# This gets the Qt stuff
import PyQt5
from PyQt5.QtWidgets import *

# This is our window from QtCreator
import mainwindow_auto

# create class for our Raspberry Pi GUI
class MainWindow(QMainWindow, mainwindow_auto.Ui_MainWindow):
 # access variables inside of the UI's file
 def __init__(self):
 super(self.__class__, self).__init__()
 self.setupUi(self) # gets defined in the UI file

# I feel better having one of these
def main():
 # a new app instance
 app = QApplication(sys.argv)
 form = MainWindow()
 form.show()
 # without this, the script exits immediately.
 sys.exit(app.exec_())

# python bit to figure how who started This
if __name__ == "__main__":
 main()
</pre>
<p>With just those bits, you can run your new Python script and have basic GUI functions. Of course buttons and other widgets won&#x2019;t know what to do yet, but you can click them.</p>
<pre class="brush: bash; title: ; notranslate" title="">
python3 main.py
</pre>
<p>And here&#x2019;s my GUI:</p>
<p><a href="https://www.baldengineer.com/?attachment_id=5763#main" rel="attachment wp-att-5763"><img class="aligncenter size-large wp-image-5763" src="https://www.baldengineer.com/wp-content/uploads/2016/02/Raspberry-Pi-GUI-running-1024x785.png" alt="Raspberry Pi GUI running" width="760"></a></p>
<h3>Add Handlers</h3>
<p>Remember when I said to pay attention to the widget names you create? This bit of code is why. Now we need to create handlers in the Python code for each button and widget. In your main.py file, you need to add some functions to your MainWindow class.</p>
<pre class="brush: python; title: ; notranslate" title="">
# create class for our Raspberry Pi GUI
class MainWindow(QMainWindow, mainwindow_auto.Ui_MainWindow):
 # access variables inside of the UI's file

 ### functions for the buttons to call
 def pressedOnButton(self):
 print ("Pressed On!")

 def pressedOffButton(self):
 print ("Pressed Off!")

 def __init__(self):
 super(self.__class__, self).__init__()
 self.setupUi(self) # gets defined in the UI file

 ### Hooks to for buttons
 self.btnOn.clicked.connect(lambda: self.pressedOnButton())
 self.btnOff.clicked.connect(lambda: self.pressedOffButton())
</pre>
<p>Replace the MainWindow class from the minimal example before with this code. When it runs a message will be printed on the console with each button press.</p>
<p>In this case, I&#x2019;m only going to provide button examples. With a little bit of Google-fu, you can find example code for other widget types.</p>
<p><a href="https://www.baldengineer.com/?attachment_id=5765#main" rel="attachment wp-att-5765"><img class="aligncenter size-medium wp-image-5765" src="https://www.baldengineer.com/wp-content/uploads/2016/02/Button-Pressing-300x152.png" alt="PyQt5 with button presses" width="300"></a></p>
<h2>Running on startup</h2>
<p>Okay if you&#x2019;ve already configured the Pi to boot into X-Windows when it starts up, you might want to know how to make your python program run. Well first make sure your &#x201C;main.py&#x201D; and &#x201C;mainwindow_auto.py&#x201D; files are in the same directory. In my case, I leave them in my &#x201C;pi&#x201D; user&#x2019;s home directory.</p>
<p>Edit this file:</p>
<pre class="brush: bash; title: ; notranslate" title="">

nano&#xA0;/home/pi/.config/lxsession/LXDE-pi/autostart

</pre>
<p>And add this line:</p>
<pre class="brush: bash; title: ; notranslate" title="">

@/usr/bin/python3 /home/pi/main.py

</pre>
<p>Now issue a sudo reboot and it should load. (Note, you can use the &#x201C;which&#x201D; command to verify the location of the python3 binary.)</p>
<h2>Download The Entire project</h2>
<p>In case you want to download my Qt and Python code, here is a download button.</p>
<p><a href="https://www.baldengineer.com/wp-content/uploads/2016/02/SampleProgram.zip" class="button ">Download Tutorial Code</a></p>
<h2>Conclusion</h2>
<p>As I said, I think the most difficult thing in this tutorial is getting all of the pieces installed&#x2014;in two places.</p>
<p>That isn&#x2019;t to say creating the proper handlers for the widgets is easy. However, there are tons (and tons) of help on how to build Qt programs&#x2014;even if it the code is in C++.</p>
	</div>

	</div>
</body></html>
