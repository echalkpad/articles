<!DOCTYPE html><html><head><title>Developing a street basketball game. (Part I. Getting workflow ready) — WhitestormJS Framework</title></head><body>
<h1>Developing a street basketball game. (Part I. Getting workflow ready) — WhitestormJS Framework</h1><p><a href="https://medium.com/whitestormjs-framework/developing-a-street-basketball-game-part-i-getting-workflow-ready-f4f6968e4d10" target="_new">Original URL</a></p>
<p><blockquote>Some days ago i released a new version of WhitestormJS framework named r10 and decided to develop a game using almost all it&#x2019;s functionality. (Just was curious how easy it would be). The task&hellip;</blockquote></p>
<div score="17.5"><section name="bde0" class=" section--body section--first" score="41.25"><div class="section-content" score="32.5"><div class="section-inner layoutSingleColumn" score="-28.75"><figure name="3f33" id="3f33" class="graf--figure graf-after--h4" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/800/1*t_YNDcu8ZWgE5nDHPAKH5A.png"></div></figure><p name="6b63" id="6b63" class="graf--p graf-after--figure">Some days ago i released a new version of WhitestormJS framework named <strong class="markup--strong markup--p-strong">r10</strong> and decided to develop a game using almost all it&#x2019;s functionality. <em class="markup--em markup--p-em">(Just was curious how easy it would be). </em>The task was to make a 3D game that requires complex 3D physics parts like concave <em class="markup--em markup--p-em">objects</em> and <em class="markup--em markup--p-em">softbodies.</em></p><p name="1c7e" id="1c7e" class="graf--p graf-after--h4">Before starting developing the game i added a couple of directories that i will use later: <strong class="markup--strong markup--p-strong">js</strong>, <strong class="markup--strong markup--p-strong">css</strong>, <strong class="markup--strong markup--p-strong">textures</strong> and <strong class="markup--strong markup--p-strong">img. </strong>Difference between <em class="markup--em markup--p-em">textures</em> and <em class="markup--em markup--p-em">img</em> folders is that <em class="markup--em markup--p-em">textures </em>folder will be used for images that will be used in 3D part of app and <em class="markup--em markup--p-em">img</em> is for images that are used in html, css and stuff like that.</p><p name="b35d" id="b35d" class="graf--p graf-after--h4">Useful thing when you need to work with es6 models in front-end, especially when you use most of es6 features and want them even on old browser versions. I used it with two plugins: <a href="https://github.com/rollup/rollup-plugin-babel" class="markup--anchor markup--p-anchor" rel="nofollow">babel for rollup</a> and <a href="https://github.com/rollup/rollup-plugin-babel" class="markup--anchor markup--p-anchor" rel="nofollow">uglify for rollup</a> to develop a cross-browser 3D app.</p><p name="5832" id="5832" class="graf--p graf-after--h4">Some libraries are getting updates regularly (yep, like <em class="markup--em markup--p-em">whitestorm.js</em>). For them i need front-end package manager like bower (You can use npm too, but bower will be enough). For tweening i used <a href="http://greensock.com/gsap" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">GSAP</strong></a> library, because of it&#x2019;s performance and also we need <a href="https://addyosmani.com/basket.js/" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">basket.js</strong></a> to keep such a large library as WhitestormJS in <em class="markup--em markup--p-em">localStorage</em>.</p><p name="d3fa" id="d3fa" class="graf--p graf-after--p">&#x2026;And also i wrote a small bower plugin that will help me make preloading. <a href="https://github.com/sasha240100/ProgressLoader" class="markup--anchor markup--p-anchor" rel="nofollow">Check it out there.</a></p><pre name="afa6" id="afa6" class="graf--pre graf-after--p">bower install<strong class="markup--strong markup--pre-strong"> whitestormjs gsap progress-loader basket.js</strong></pre><p name="0d22" id="0d22" class="graf--p graf-after--h4">My index.html file will be simple and will contain just loaded scripts and <em class="markup--em markup--p-em">style.css</em> for featured usage. Note that we don&#x2019;t load whitestorm.js yet. We will add it then using <strong class="markup--strong markup--p-strong">basket.js.</strong></p><figure name="ae89" id="ae89" class="graf--figure graf--iframe graf-after--p" score="-13.75"></figure><p name="66a2" id="66a2" class="graf--p graf-after--h4">As you already noticed, we have <em class="markup--em markup--p-em">app.js </em>included. So, let&#x2019;s create an empty 3D world with enabled softbody physics(will be used later for a net), autoresize, filled background, camera position and aspect, + gravity:</p><figure name="99f9" id="99f9" class="graf--figure graf--iframe graf-after--p" score="-13.75"></figure><p name="9f2c" id="9f2c" class="graf--p graf-after--figure">Now we have a basic world that has <em class="markup--em markup--p-em">0xcccccc (grey) </em>as it&#x2019;s background color, gravity set as <em class="markup--em markup--p-em">{x: 0, y: -200, z: 0}</em> and camera that will be at same height as our basket. Also we start the app only after we have whitestorm.js loaded.</p><p name="ee76" id="ee76" class="graf--p graf-after--p">I counted 14 objects that we will load for desktop devices. (I hope we&#x2019;ll also have an optimized version for mobile devices, so i used <strong class="markup--strong markup--p-strong">APP.isMobile</strong> variable which is a boolean.</p><p name="6401" id="6401" class="graf--p graf-after--h4">Next thing we&#x2019;ll do is implementing a floor with just a ground and wall. Wall and ground will be very similar and we create them both from one object. We&#x2019;ll create a default plane 1000x800 with buffer geometry (Actually no need for buffer geometry there, but somebody says it increase performance;), but it won&#x2019;t be a big deal for a plane with 1x1 segments.</p><p name="01c7" id="01c7" class="graf--p graf-after--p"><strong class="markup--strong markup--p-strong">0 mass </strong>means that this object is not affected by gravity and won&#x2019;t move when collides with other objects. And we need to rotate it&#x2019;s by<em class="markup--em markup--p-em"> (-Math.PI / 2, 0, 0)</em> euler.</p><figure name="84de" id="84de" class="graf--figure graf--iframe graf-after--p" score="-13.75"></figure><p name="d599" id="d599" class="graf--p graf-after--figure">When we add each object to world&#x200A;&#x2014;&#x200A;it returns a promise which is resolved when object is generated and added to world. Such stuff is very useful when work with models or object&#x2019;s you want to know they are ready. Such as when we need to update loading status when each one is added.</p><p name="612a" id="612a" class="graf--p graf-after--h4">We need just 2 simple lights to get a cool effect. Ambient light will cast light on the whole scene, Point light will cast only on objects near basket.</p><figure name="109f" id="109f" class="graf--figure graf--iframe graf-after--p" score="-13.75"></figure><p name="dc07" id="dc07" class="graf--p graf-after--figure">That&#x2019;s how it looks now:</p><figure name="9ee3" id="9ee3" class="graf--figure graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/800/1*BH9fCSY_A5x9PIYcWVEH7Q.png"></div><figcaption class="imageCaption">Scene with wall, ground and lights.</figcaption></figure><p name="77fc" id="77fc" class="graf--p graf-after--h4">After we added lights we need to have a basket in which we will throw a ball. Our basket will be a simple torus with thin tube radius. Also i experimented with material parameters to get it metal look.</p><figure name="9622" id="9622" class="graf--figure graf--iframe graf-after--p" score="-13.75"></figure><p name="64d3" id="64d3" class="graf--p graf-after--figure">One more thing is that we set a <em class="markup--em markup--p-em">&#x201C;concave&#x201D; </em>physics object type. By default, in performance reason each mesh with concave geometry works as a convex mesh for physics, but you can simply make it concave by setting this parameter. We make it static by applying 0 mass to this object.</p><p name="6acf" id="6acf" class="graf--p graf-after--h4">Now it&#x2019;s time to make a ball. This time we are going to use optimization for mobile devices again (geometry with less vertices. It won&#x2019;t work with physics because when we process sphere collisions it&#x2019;s enough to have just a sphere radius)</p><p name="0d86" id="0d86" class="graf--p graf-after--p">This time we also have to apply x3 restitution to make out sphere jump like a basketball ball.</p><figure name="a91b" id="a91b" class="graf--figure graf--iframe graf-after--p" score="-13.75"></figure><p name="7aca" id="7aca" class="graf--p graf-after--figure">We use 2 textures for ball material. First one (in <em class="markup--em markup--p-em">map</em> parameter) is a default colored texture. Second one (<em class="markup--em markup--p-em">normalMap</em>) defines how light will be casted on this ball.</p><p name="5287" id="5287" class="graf--p graf-after--p">I generated a normal map using <a href="http://cpetry.github.io/NormalMap-Online/" class="markup--anchor markup--p-anchor" rel="nofollow">this normal map generator</a>. I often use it. You can make a normal map not just from a black-white heightmap, for generating this one, i just used first texture.</p><figure name="85d3" id="85d3" class="graf--figure graf-after--p graf--last" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/800/1*x2f2M9oFNyFLhK-RaaNaQQ.png"></div><figcaption class="imageCaption">How ball map and normal map looks like.</figcaption></figure></div></div></section><section name="0c7c" class=" section--body section--last" score="41.25"><div class="section-content" score="32.5"><div class="section-inner layoutSingleColumn" score="1.25"><p name="4469" id="4469" class="graf--p graf-after--h3">If everything done right, you should see something like this:</p><figure name="2f56" id="2f56" class="graf--figure graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/800/1*8m2Xu1wO-A8odWJDGlqf7w.png"></div></figure><p name="9c0d" id="9c0d" class="graf--p graf-after--figure">&#x2026;And the ball will fall down&#x2026;</p><p name="fa9a" id="fa9a" class="graf--p graf-after--p">Hopefully, second part will be next week. Don&#x2019;t forget to recommend this tutorial;)</p><p name="49d8" id="49d8" class="graf--p graf-after--h4">A result of this part is also <a href="https://github.com/WhitestormJS/StreetBasketballGame/tree/part1" class="markup--anchor markup--p-anchor" rel="nofollow">available on github</a>.</p><p name="a1e3" id="a1e3" class="graf--p graf-after--p graf--last">Full game: <a href="https://github.com/WhitestormJS/StreetBasketballGame" class="markup--anchor markup--p-anchor" rel="nofollow">Github </a>| <a href="http://whitestormjs.xyz/StreetBasketballGame/" class="markup--anchor markup--p-anchor" rel="nofollow">Demo</a></p></div></div></section></div>
</body></html>
