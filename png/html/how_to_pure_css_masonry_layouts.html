<!DOCTYPE html><html><head><title>HOW TO: Pure CSS masonry layouts</title></head><body>
<h1>HOW TO: Pure CSS masonry layouts</h1><p><a href="https://medium.com/@_jh3y/how-to-pure-css-masonry-layouts-a8ede07ba31a#.cf4ev8bi7" target="_new">Original URL</a></p>
<p><blockquote>achieving that aesthetically pleasing staggered effect without any JavaScriptOne popula</blockquote></p>
<div score="26.25"><section name="49d4" class=" section--body section--bottomCenter section-image--aspectRatioViewport is-imageBackgrounded is-backgrounded is-darkBackgrounded section--first" score="23.75"><div class="section-doubleWidthTable u-table u-ignoreBlock" score="8.75"><div class="u-tableCell u-verticalAlignTop u-ignoreBlock" score="2.5"><div class="section-doubleWidthTable u-table u-ignoreBlock" score="21.25"><div class="section-contentCell u-tableCell u-ignoreBlock" score="45.0"><div class="section-content" score="31.25"><div class="section-inner layoutSingleColumn"><p name="06dc" id="06dc" class="graf--p graf-after--h3 graf--last">achieving that aesthetically pleasing staggered effect without any JavaScript</p></div></div></div></div></div></div></section><section name="51ea" class=" section--body" score="41.25"><div class="section-content" score="32.5"><div class="section-inner layoutSingleColumn" score="1.25"><p name="9773" id="9773" class="graf--p graf--first">One popular content layout style is &#x201C;masonry&#x201D;. Not familiar with it? Think Pinterest, Windows&#x2019; Metro etc. To describe it in words, an almost crazy paving effect whereby variable sized blocks of content are pieced together in an aesthetically pleasing style, often staggered.</p><figure name="a969" id="a969" class="graf--figure graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/800/1*TfCvIdT79TwK8zcCeG-qSQ.png"></div></figure><p name="5417" id="5417" class="graf--p graf-after--figure">Masonry style layouts aren&#x2019;t something new. So why look at them now? There are some great solutions out there for getting the masonry effect already aren&#x2019;t there? This is true. However, can we push a pure CSS solution a little further? Could we leverage Flexbox to achieve a more desired effect and push the capabilities a little further?</p><p name="6630" id="6630" class="graf--p graf-after--p graf--last">For those in camp <strong class="markup--strong markup--p-strong">TL;DR</strong> feel free to check out some code I&#x2019;ve pieced together <a href="https://github.com/jh3y/driveway" class="markup--anchor markup--p-anchor" rel="nofollow">here</a>(github) and <a href="https://jsbin.com/loronibali/2/edit?output" class="markup--anchor markup--p-anchor" rel="nofollow">here</a>.</p></div></div></section><section name="1eb4" class=" section--body" score="41.25"><div class="section-content" score="31.25"><div class="section-inner layoutSingleColumn"><p name="5a25" id="5a25" class="graf--p graf-after--h3">Let&#x2019;s start with a basic layout. Imagine the DOM structure for our layout to be something similar to the following;</p><pre name="5678" id="5678" class="graf--pre graf-after--p">&lt;div class="masonry-layout"&gt;<br> &lt;div class="masonry-layout__panel"&gt;<br> &lt;div class="masonry-layout__panel-content"&gt;<br> &lt;-- CONTENT HERE --&gt;<br> &lt;/div&gt;<br> &lt;/div&gt;<br> &lt;div class="masonry-layout__panel"&gt;<br> &lt;div class="masonry-layout__panel-content"&gt;<br> &lt;-- CONTENT HERE --&gt;<br> &lt;/div&gt;<br> &lt;/div&gt;<br> &lt;div class="masonry-layout__panel"&gt;<br> &lt;div class="masonry-layout__panel-content"&gt;<br> &lt;-- CONTENT HERE --&gt;<br> &lt;/div&gt;<br> &lt;/div&gt;</pre><pre name="b71d" id="b71d" class="graf--pre graf-after--pre"> &lt;-- FOLLOWING CONTENT PANELS --&gt;</pre><pre name="3b8c" id="3b8c" class="graf--pre graf-after--pre">&lt;/div&gt;</pre><p name="9058" id="9058" class="graf--p graf-after--pre">We are looking to add columns to our content. Based on our DOM structure, can we can achieve a pretty basic masonry effect with minimal effort using either CSS3 multi-column layouts or Flexbox?</p><p name="3839" id="3839" class="graf--p graf-after--h4">Both introduced with CSS3, multi-column layout properties and Flexbox address ways in which to lay out content. Both have pretty apt names. Multi-column layout properties give you the power to lay out content in columns without too much heavy lifting. Flexbox provides exactly that, flexible boxes for your layout that can shrink, grow and flow how you desire. I won&#x2019;t be going through them in detail in this post so I&#x2019;d recommend familiarising yourself with them before reading any further.</p><p name="6ff6" id="6ff6" class="graf--p graf-after--h4">CSS3 introduced multi-column layouts with properties such as <em class="markup--em markup--p-em">column-count </em>and <em class="markup--em markup--p-em">column-gap. </em>This makes achieving a basic masonry effect rather simple. Note that it is <strong class="markup--strong markup--p-strong">important</strong> to use the <em class="markup--em markup--p-em">break-inside</em> property on the content blocks of the layout. This ensures that content blocks don&#x2019;t break and span across columns. The CSS for a starting point could be;</p><pre name="9b39" id="9b39" class="graf--pre graf-after--p">.masonry-layout {<br> column-count: 3;<br> column-gap: 0;<br>}<br>.masonry-layout__panel {<br> break-inside: avoid;<br> padding: 5px;<br>}<br>.masonry-layout__panel-content {<br> padding: 10px;<br> border-radius: 10px;<br>}</pre><p name="0d8e" id="0d8e" class="graf--p graf-after--pre">See it in action <a href="https://jsbin.com/rezufoxima/2/edit?css,output" class="markup--anchor markup--p-anchor" rel="nofollow">here</a>. It&#x2019;s a good start and shows that the multi-column layout properties can do a lot of the heavy lifting for us.</p><p name="7934" id="7934" class="graf--p graf-after--h4">Could we achieve the same with Flexbox? It isn&#x2019;t quite as loose and forgiving as using the multi-column layout properties. I found issues with the approaches I took trying to tackle the issue with Flexbox.</p><p name="0e07" id="0e07" class="graf--p graf-after--p">On first attempt I thought about mimicking the column layout by using &#x201C;<em class="markup--em markup--p-em">flex-direction: column</em>&#x201D;.<em class="markup--em markup--p-em"> </em>The issue with using &#x201C;<em class="markup--em markup--p-em">column</em>&#x201D; is that you need to define a height for the layout so that columns start wrapping. But this isn&#x2019;t ideal as any overflow becomes horizontally scrollable. Either that or you need to keep adjusting the height of the layout until everything wraps and fits nicely how you want it to. If you are working with dynamic content that may vary in amount and size over time, you may find yourself adjusting to accommodate each time you roll it out. This pretty much goes against the ideals of Flexbox in my opinion.</p><p name="2edb" id="2edb" class="graf--p graf-after--p">Consider the following code using Flexbox;</p><pre name="cb2a" id="cb2a" class="graf--pre graf-after--p">.masonry-layout {<br> display: flex;<br> flex-direction: column;<br> flex-wrap: wrap;<br> padding: 10px;<br> height: 100vw;<br>}<br>.masonry-layout__panel {<br> display: flex;<br> flex: 1 1 auto;<br> width: 33.3%;<br> margin-bottom: 10px;<br> border-radius: 10px;<br>}</pre><p name="5711" id="5711" class="graf--p graf-after--pre">It will yield a result which can be seen <a href="https://jsbin.com/qacawerica/2/edit?html,css,output" class="markup--anchor markup--p-anchor" rel="nofollow">here</a>. Notice that the content becomes horizontally scrollable which isn&#x2019;t desired.</p><p name="2d41" id="2d41" class="graf--p graf-after--p">Another approach is to use &#x201C;<em class="markup--em markup--p-em">flex-direction: row</em>&#x201D;. This doesn&#x2019;t quite work either. You can set the amount of columns by restricting the width of items in the layout, but, wrapping either introduces white space or all items adjusting to be the same width depending on the property you define for &#x201C;<em class="markup--em markup--p-em">align-items</em>&#x201D;. Neither result is desirable. You can see the result of using &#x201C;<em class="markup--em markup--p-em">flex-direction: row</em>&#x201D; with &#x201C;<em class="markup--em markup--p-em">align-items: flex-start</em>&#x201D; <a href="https://jsbin.com/yofikeveba/2/edit?css,output" class="markup--anchor markup--p-anchor" rel="nofollow">here</a>.</p><p name="04c7" id="04c7" class="graf--p graf-after--p">If you&#x2019;re willing to be a bit more controlling with your markup and structure, you <strong class="markup--strong markup--p-strong">can</strong> achieve the desired effect with flexbox. Consider a structure like the following;</p><pre name="2b43" id="2b43" class="graf--pre graf-after--p">&lt;div class="masonry-layout"&gt;<br> &lt;div class="masonry-layout__column"&gt;<br> &lt;div class="masonry-layout__panel&gt;&lt;/div&gt;<br> &lt;div class="masonry-layout__panel&gt;&lt;/div&gt;<br> &lt;/div&gt;<br> &lt;div class="masonry-layout__column"&gt;<br> &lt;div class="masonry-layout__panel&gt;&lt;/div&gt;<br> &lt;div class="masonry-layout__panel&gt;&lt;/div&gt;<br> &lt;/div&gt;<br>&lt;/div&gt;</pre><p name="2d23" id="2d23" class="graf--p graf-after--pre">Adding columns to your layout, you are given some extra control over the layout. However, you will need to give some more thought to how and where you want specific parts of your content to sit. See this approach in action <a href="https://jsbin.com/zurapetono/1/edit?html,css,output" class="markup--anchor markup--p-anchor" rel="nofollow">here</a>.</p><p name="58ba" id="58ba" class="graf--p graf-after--h4">For achieving the basic masonry style layout, multi-column layout properties are a clear winner in my opinion. This is based on the simplicity and reduced markup. They get the job done. If you&#x2019;re looking for the basic masonry effect, then something like this is all you&#x2019;ll need. I can see the benefit of both approaches though for sure.</p><pre name="282b" id="282b" class="graf--pre graf-after--p">.masonry-layout {<br> column-count: 3;<br> column-gap: 0;<br>}<br>.masonry-layout__panel {<br> break-inside: avoid;<br> padding: 5px;<br>}<br>.masonry-layout__panel-content {<br> padding: 10px;<br> border-radius: 10px;<br>}</pre><p name="89b6" id="89b6" class="graf--p graf-after--pre">Looking at that code. Our panels should also be blocks themselves ideally. So we refactor to.</p><pre name="0c78" id="0c78" class="graf--pre graf-after--p">.masonry-layout {<br> column-count: 3;<br> column-gap: 0;<br>}<br>.masonry-layout-panel {<br> break-inside: avoid;<br> padding: 5px;<br>}<br>.masonry-layout-panel__content {<br> padding: 10px;<br> border-radius: 10px;<br>}</pre><p name="674c" id="674c" class="graf--p graf-after--pre graf--last">Our basic masonry effect still has potential. We could take it a little further. Maybe Flexbox will fit nicely elsewhere.</p></div></div></section><section name="8953" class=" section--body section--last" score="41.25"><div class="section-content" score="32.5"><div class="section-inner layoutSingleColumn" score="-10.0"><p name="5aa7" id="5aa7" class="graf--p graf-after--h3">Introducing nested clusters of content to our layout can break the content up a bit and disturb the flow a little which is our intention. It can be used to give the effect that content is spanning columns.</p><p name="90d5" id="90d5" class="graf--p graf-after--p">Nested clusters of contents are essentially nested layouts that will either flow vertically or horizontally. Flexbox is a great fit here.</p><figure name="81a5" id="81a5" class="graf--figure graf--layoutOutsetLeft graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/600/1*XaERXcb0ysiyMTNxva-j4Q.png"></div><figcaption class="imageCaption">A vertically flowing 2 column nested cluster</figcaption></figure><p name="6c8c" id="6c8c" class="graf--p graf-after--figure">Our base layout doesn&#x2019;t fit perfectly into a quadrangle but our clusters <strong class="markup--strong markup--p-strong">must</strong>. This is because we don&#x2019;t want patches of white space appearing in our masonry layout. We could define cluster size classes to combat this. Consider the following example sizes;</p><pre name="ef6b" id="ef6b" class="graf--pre graf-after--p">.masonry-layout-panel--small {<br> height: 200px;<br>}<br>.masonry-layout-panel--medium {<br> height: 300px;<br>}<br>.masonry-layout-panel--large {<br> height: 400px;<br>}</pre><p name="d39f" id="d39f" class="graf--p graf-after--pre">But, this doesn&#x2019;t quite feel right. Set sizes aren&#x2019;t going to play nice in every scenario. The better approach may be to introduce the column-like containers we discussed earlier. Consider something like the following;</p><pre name="ddd1" id="ddd1" class="graf--pre graf-after--p">&lt;div class=&#x201D;masonry-layout-panel masonry-layout-cluster masonry-layout-cluster--vertical&#x201D;&gt;<br> &lt;div class=&#x201D;masonry-layout-cluster__segment masonry-layout-cluster__segment--column&#x201D;&gt;<br> &lt;div class=&#x201D;masonry-layout-panel masonry-layout-cluster__segment&#x201D;&gt;<br> &lt;div class=&#x201D;masonry-layout-panel__content&#x201D;&gt;<br> &lt;h1&gt;hello&lt;/h1&gt;<br> &lt;/div&gt;<br> &lt;/div&gt;<br> &lt;/div&gt;<br> &lt;div class=&#x201D;masonry-layout-cluster__segment masonry-layout-cluster__segment--column&#x201D;&gt;<br> &lt;div class=&#x201D;masonry-layout-panel masonry-layout-cluster__segment&#x201D;&gt;<br> &lt;div class=&#x201D;masonry-layout-panel__content&#x201D;&gt;<br> &lt;h1&gt;yes&lt;/h1&gt;<br> &lt;/div&gt;<br> &lt;/div&gt;<br> &lt;div class=&#x201D;masonry-layout-panel masonry-layout-cluster__segment&#x201D;&gt;<br> &lt;div class=&#x201D;masonry-layout-panel__content&#x201D;&gt;<br> &lt;p&gt;<br> Some cool pics.<br> &lt;/p&gt;<br> &lt;/div&gt;<br> &lt;/div&gt;<br> &lt;/div&gt;<br>&lt;/div&gt;</pre><p name="edbf" id="edbf" class="graf--p graf-after--pre">Clusters can either flow horizontally or vertically. If a cluster flows horizontally, we define columns of segments that flow vertically and vice-versa. We alter the flow using &#x201C;<em class="markup--em markup--p-em">flex-direction</em>&#x201D;. Cluster segments grow/shrink to accommodate white space with clusters becoming blocks in themselves.</p><p name="10a1" id="10a1" class="graf--p graf-after--p">If we want some tighter control on the cluster segments, we can use utility classes to define percentage flex-basis for them. We don&#x2019;t need a &#x201C;full-size&#x201D; utility class as we can just include one item in a container and it will span full width or height. For say &#x201C;half-size&#x201D; though we could define 50% flex-basis. The nice feature of this implementation is that any number of rows or columns should span accordingly to the content.</p><p name="4134" id="4134" class="graf--p graf-after--p">How might the code look? Consider the following;</p><pre name="3cad" id="3cad" class="graf--pre graf-after--p">.masonry-layout-cluster {<br> display: flex;<br> padding: 0;<br>}<br>.masonry-layout-cluster--vertical {<br> flex-direction: row;<br>}<br>.masonry-layout-cluster--horizontal {<br> flex-direction: column;<br>}<br>.masonry-layout-cluster__segment {<br> display: flex;<br> flex: 1 1 auto;<br>}<br>.masonry-layout-cluster__segment--row {<br> flex-direction: row;<br>}<br>.masonry-layout-cluster__segment--column {<br> flex-direction: column;<br>}<br>.masonry-layout-cluster__segment--half {<br> flex-basis: 50%;<br>}<br>.masonry-layout-cluster__segment--quarter {<br> flex-basis: 25%;<br>}</pre><p name="531d" id="531d" class="graf--p graf-after--pre">You can see the code in action <a href="https://jsbin.com/tuxoqusaxu/2/edit?css,output" class="markup--anchor markup--p-anchor" rel="nofollow">here</a>. Nested clusters are the trickiest concept to explain, and with them out of the way, we can tackle some easier features!</p><p name="a64c" id="a64c" class="graf--p graf-after--h3">The aim is to keep our layout structure styling generic and isolated from theming styles. This promotes easier re-use in other projects. If you&#x2019;ve checked out any of the code demos mentioned previously, you&#x2019;ll notice that content panels have rounded borders etc. This can be achieved by adding some minimal theming.</p><figure name="7371" id="7371" class="graf--figure graf--layoutOutsetLeft graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/600/1*n2mjkAnx5NNAK7w-I1zJxw.png"></div><figcaption class="imageCaption">A picture panel</figcaption></figure><pre name="875d" id="875d" class="graf--pre graf-after--figure">.masonry-layout-panel__content {<br> border-radius: 10px;<br> overflow: hidden;<br> padding: 10px;<br>}</pre><p name="9c19" id="9c19" class="graf--p graf-after--pre">How about images? It&#x2019;s quite common that you may wish to display images as complete panels in your masonry layout. If we put an image within our panel content it would be affected by the padding we&#x2019;ve defined for our theme previously. So why don&#x2019;t we just give the &#x201C;<em class="markup--em markup--p-em">masonry-layout__panel-content</em>&#x201D; class to our image with a modifier?</p><pre name="cd04" id="cd04" class="graf--pre graf-after--p">&lt;img src="img/photo.jpg" class="masonry-layout-panel__content--img"&gt;</pre><p name="5758" id="5758" class="graf--p graf-after--pre">It&#x2019;s nearly there but not quite. If we add a little theming specific to images we can get round this.</p><pre name="5793" id="5793" class="graf--pre graf-after--p">.masonry-layout-panel__content--img {<br> max-width: 100%;<br> padding: 0;<br>}</pre><p name="7742" id="7742" class="graf--p graf-after--pre">Check out how it&#x2019;s starting to look <a href="https://jsbin.com/zamabonuhe/2/edit?html,css,output" class="markup--anchor markup--p-anchor" rel="nofollow">here</a>. <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Note: </em></strong>Because the classnames are becoming rather bloated, from here on, abbreviations are being used in code examples. For example; &#x201C;<em class="markup--em markup--p-em">masonry-layout&#x201D;</em> becomes &#x201C;<em class="markup--em markup--p-em">ml</em>&#x201D;, &#x201C;<em class="markup--em markup--p-em">masonry-layout-cluster</em>&#x201D; becomes &#x201C;<em class="markup--em markup--p-em">ml-clstr</em>&#x201D; etc. Also, image placeholders display in yellow.</p><figure name="2482" id="2482" class="graf--figure graf--layoutOutsetLeft graf-after--h3" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/600/1*sDjPLMU-Q2I3KpWOiuO8Gw.png"></div><figcaption class="imageCaption">Panel mid-flip</figcaption></figure><p name="9bb1" id="9bb1" class="graf--p graf-after--figure">How about making panels respond to interaction? We could make it so that panels flip and reveal extra content when we hover over them. In order to do this we make our panel content a flip card. Adding a front and back content container we can define the front and back for a panel. This does requires that we have a set height for our panels so we can use utility classes for defined heights. For example;</p><pre name="5ba6" id="5ba6" class="graf--pre graf-after--p">.masonry-layout-flip--medium {<br> height: 300px;<br>}</pre><p name="f24d" id="f24d" class="graf--p graf-after--pre">We introduce a new block for flippers.</p><pre name="0b13" id="0b13" class="graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">THE MARKUP</strong></pre><pre name="0dc0" id="0dc0" class="graf--pre graf-after--pre">&lt;div class=&#x201D;masonry-layout-panel masonry-layout-flip--medium masonry-layout-flip&#x201D;&gt;<br> &lt;div class=&#x201D;masonry-layout-panel__content masonry-layout-flip__content&#x201D;&gt;<br> &lt;img src=&#x201D;img/photo-1.jpg&#x201D; class=&#x201D;masonry-layout-flip__panel masonry-layout-flip__panel--front masonry-layout-flip__panel--img&#x201D;/&gt;<br> &lt;div class=&#x201D;masonry-layout-flip__panel masonry-layout-flip__panel--back&#x201D;&gt;<br> &lt;p&gt;Here is a flpped image&#x2026;&lt;/p&gt;<br> &lt;/div&gt;<br> &lt;/div&gt;<br>&lt;/div&gt;</pre><pre name="1196" id="1196" class="graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">/* NOTE: long classnames can be avoided in real projects by using abbreviations such as "ml-flp" */</strong></pre><p name="2e82" id="2e82" class="graf--p graf-after--pre">Using CSS3 transforms and transitions we can apply a hover animation so that our panel flips and shows a reverse side to it.</p><pre name="477b" id="477b" class="graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">/* CSS FOR FLIPPER PANELS */</strong></pre><pre name="acbc" id="acbc" class="graf--pre graf-after--pre">.masonry-layout-flip {<br> perspective: 1000;<br>}<br>.masonry-layout-flip:hover .masonry-layout-flip__content {<br> transform: rotateY(180deg);<br>}<br>.masonry-layout-flip--md {<br> height: 300px;<br>}<br>.masonry-layout-flip__panel {<br> backface-visibility: hidden;<br> border-radius: 10px;<br> height: 100%;<br> left: 0;<br> overflow: hidden;<br> position: absolute;<br> top: 0;<br> width: 100%;<br>}<br>.masonry-layout-flip__panel--front {<br> transform: rotateY(0deg);<br> z-index: 2;<br>}<br>.masonry-layout-flip__panel--back {<br> transform: rotateY(180deg);<br>}<br>.masonry-layout-flip__content {<br> height: 100%;<br> overflow: visible;<br> position: relative;<br> transform-style: preserve-3d;<br> transition: 0.25s;<br>}</pre><p name="6ce0" id="6ce0" class="graf--p graf-after--pre">The layout is taking shape, see the animated panel in action <a href="https://jsbin.com/vixaxofato/3/edit?html,css,output" class="markup--anchor markup--p-anchor" rel="nofollow">here</a>.</p><figure name="d116" id="d116" class="graf--figure graf--layoutOutsetLeft graf-after--p" score="-12.5"><div class="aspectRatioPlaceholder is-locked" score="6.25"><img class="graf-image" src="https://cdn-images-1.medium.com/max/600/1*8Y__HtUYHClzv9jTMvxLAQ.png"></div><figcaption class="imageCaption">Panel with focus effect</figcaption></figure><p name="4316" id="4316" class="graf--p graf-after--figure">We aren&#x2019;t just limited to flip panels. We could add various effects and features to panels such as focus effects. I&#x2019;ll include some bonus features in the final bonus code.</p><p name="fb3d" id="fb3d" class="graf--p graf-after--h3">If you&#x2019;ve got this far, you&#x2019;ll notice that our masonry layout isn&#x2019;t looking great on smaller viewports. Let&#x2019;s make it responsive. How do we want it to respond? As our viewport increases in size, we want to increase the amount of columns in our layout. As our viewport decreases in size, in addition the amount of columns decreasing, we might want our nested clusters to collapse and allow the segments to take up full width of the layout. We will also be looking to develop our layout styles mobile first. Consider the following for responsive column count;</p><pre name="8b8e" id="8b8e" class="graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">/* COLUMN CHANGES */</strong></pre><pre name="124f" id="124f" class="graf--pre graf-after--pre">.masonry-layout {<br> column-count: 1;<br> column-gap: 0;<br>}<br><a href="http://twitter.com/media" class="markup--anchor markup--pre-anchor" title="Twitter profile for @media" rel="nofollow">@media</a> (min-width: 768px) {<br> .masonry-layout {<br> column-count: 2;<br> }<br>}<br><a href="http://twitter.com/media" class="markup--anchor markup--pre-anchor" title="Twitter profile for @media" rel="nofollow">@media</a> (min-width: 1200px) {<br> .masonry-layout {<br> column-count: 3;<br> }<br>}</pre><p name="fad1" id="fad1" class="graf--p graf-after--pre">For nested clusters, we want to ignore things such as horizontal flow and flex-basis at lower viewports. We want our clusters to collapse and segments take up full viewport width regardless of whether they are columns, rows, etc.</p><pre name="ffee" id="ffee" class="graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">/* CLUSTER FLOW IGNORED AT LOWER VIEWPORT */</strong></pre><pre name="f314" id="f314" class="graf--pre graf-after--pre"><a href="http://twitter.com/media" class="markup--anchor markup--pre-anchor" title="Twitter profile for @media" rel="nofollow">@media</a> (min-width: 768px) {<br> .masonry-layout-cluster__segment--row {<br> flex-direction: row;<br> }<br>}<br><a href="http://twitter.com/media" class="markup--anchor markup--pre-anchor" title="Twitter profile for @media" rel="nofollow">@media</a> (min-width: 768px) {<br> .masonry-layout-cluster--vertical {<br> flex-direction: row;<br> }<br>}</pre><pre name="258c" id="258c" class="graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong"><br>/* FLEX-BASIS IGNORED AT LOWER VIEWPORT */</strong></pre><pre name="ab97" id="ab97" class="graf--pre graf-after--pre"><a href="http://twitter.com/media" class="markup--anchor markup--pre-anchor" title="Twitter profile for @media" rel="nofollow">@media</a> (min-width: 768px) {<br> .masonry-layout-cluster__segment--half {<br> flex-basis: 50%;<br> }<br> .masonry-layout-cluster__segment--quarter {<br> flex-basis: 25%;<br> }<br>}</pre><p name="d9df" id="d9df" class="graf--p graf-after--pre">You can see a demo of the layout taking on a responsive feel <a href="https://jsbin.com/loronibali/2/edit?css,output" class="markup--anchor markup--p-anchor" rel="nofollow">here</a>.</p><p name="378e" id="378e" class="graf--p graf-after--h3">It goes without saying that developing the CSS is a lot easier if you make the use of a CSS preprocessor. I strongly recommend using one along with tools to aid in adding vendor prefixes. I personally use Stylus and the actual source for developing the styles wasn&#x2019;t that large in comparison to the output.</p><p name="84a8" id="84a8" class="graf--p graf-after--p">Though, just for reference, here is the final CSS used for this post(<em class="markup--em markup--p-em">minus the vendor prefixes and color theming to save some space</em>). It uses abbreviations to reduce class bloat.</p><pre name="950a" id="950a" class="graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">/* MASONRY CSS */</strong><br>.ml {<br> box-sizing: border-box;<br> column-count: 1;<br> column-gap: 0;<br> position: relative;<br>}<br>.ml articles _articles bin CAs devops Documents dotfiles gethtml go hnews jason js netdata start-thesrc thesrc ucii {<br> box-sizing: border-box;<br>}<br><a href="http://twitter.com/media" class="markup--anchor markup--pre-anchor" title="Twitter profile for @media" rel="nofollow">@media</a> (min-width: 768px) {<br> .ml {<br> column-count: 2;<br> }<br>}<br><a href="http://twitter.com/media" class="markup--anchor markup--pre-anchor" title="Twitter profile for @media" rel="nofollow">@media</a> (min-width: 1200px) {<br> .ml {<br> column-count: 3;<br> }<br>}<br>.ml-pnl {<br> margin: 0;<br> padding: 5px;<br>}<br><br><a href="http://twitter.com/media" class="markup--anchor markup--pre-anchor" title="Twitter profile for @media" rel="nofollow">@media</a> (min-width: 768px) {<br> .ml-pnl {<br> break-inside: avoid;<br> }<br>}<br>.ml-pnl__cntnt {<br> border-radius: 10px;<br> overflow: hidden;<br> padding: 10px;<br> width: 100%;<br>}<br>.ml-pnl__cntnt--img {<br> max-width: 100%;<br> padding: 0;<br>}<br>.ml-flp {<br> perspective: 1000;<br>}<br>.ml-flp:hover .ml-flp__cntnt {<br> transform: rotateY(180deg);<br>}<br>.ml-flp--sm {<br> height: 200px;<br>}<br>.ml-flp--md {<br> height: 300px;<br>}<br>.ml-flp--lg {<br> height: 400px;<br>}<br>.ml-flp__pnl {<br> backface-visibility: hidden;<br> border-radius: 10px;<br> height: 100%;<br> left: 0;<br> overflow: hidden;<br> position: absolute;<br> top: 0;<br> width: 100%;<br>}<br>.ml-flp__pnl--frnt {<br> transform: rotateY(0deg);<br> z-index: 2;<br>}<br>.ml-flp__pnl--bck {<br> transform: rotateY(180deg);<br>}<br>.ml-flp__cntnt {<br> height: 100%;<br> overflow: visible;<br> position: relative;<br> transform-style: preserve-3d;<br> transition: 0.25s;<br>}<br>.ml-clstr {<br> display: flex;<br> padding: 0;<br>}<br>.ml-clstr--vrt {<br> flex-direction: column;<br>}<br><a href="http://twitter.com/media" class="markup--anchor markup--pre-anchor" title="Twitter profile for @media" rel="nofollow">@media</a> (min-width: 768px) {<br> .ml-clstr--vrt {<br> flex-direction: row;<br> }<br>}<br>.ml-clstr--hrz {<br> flex-direction: column;<br>}<br>.ml-clstr__sgmnt {<br> display: flex;<br> overflow: hidden;<br> flex: 1 1 auto;<br>}<br>.ml-clstr__sgmnt--rw {<br> display: flex;<br> flex-direction: column;<br>}<br><a href="http://twitter.com/media" class="markup--anchor markup--pre-anchor" title="Twitter profile for @media" rel="nofollow">@media</a> (min-width: 768px) {<br> .ml-clstr__sgmnt--rw {<br> flex-direction: row;<br> }<br>}<br>.ml-clstr__sgmnt--clmn {<br> flex-direction: column;<br>}<br><a href="http://twitter.com/media" class="markup--anchor markup--pre-anchor" title="Twitter profile for @media" rel="nofollow">@media</a> (min-width: 768px) {<br> .ml-clstr__sgmnt--hlf {<br> flex-basis: 50%;<br> }<br> .ml-clstr__sgmnt--qrt {<br> flex-basis: 25%;<br> }<br>}</pre><p name="61e2" id="61e2" class="graf--p graf-after--h3">We&#x2019;ve explored masonry layouts in pure CSS. I&#x2019;m actually quite happy with the outcome. Pure CSS masonry layouts can work. I wouldn&#x2019;t say they are flawless though. I can see potential problem scenarios. For example; if you wanted to display a blog with the content in date order, this would be tricky. I think it would require some extra thought. One solution would be to use columns and then populate them accordingly in date order. The result would be the newest item being in column one, the second newest in column two and so on.</p><p name="b50f" id="b50f" class="graf--p graf-after--p">I am going to continue working on the code and see what else I can come up with <a href="https://github.com/jh3y/driveway" class="markup--anchor markup--p-anchor" rel="nofollow">here</a>(github). Feel free to fork a version or experiment with the demo code <a href="https://jsbin.com/loronibali/2/edit?css,output" class="markup--anchor markup--p-anchor" rel="nofollow">here</a> (<strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Note: </em></strong><em class="markup--em markup--p-em">If you&#x2019;ve got this far and check out the demo you&#x2019;ll notice some extra features such as focus on hover</em>).</p><p name="b3e2" id="b3e2" class="graf--p graf-after--h3 graf--last">It&#x2019;s been a long post for sure and as always if you have any questions or suggestions feel free to tweet me <a href="http://twitter.com/_jh3y" class="markup--anchor markup--p-anchor" rel="nofollow">@_jh3y</a>!</p></div></div></section></div>
</body></html>
